
> jaeger-ui-monorepo@0.0.1 eslint
> eslint --cache 'scripts/*.{js,jsx,ts,tsx}' 'packages/*/src/**/*.{js,jsx,ts,tsx}' 'packages/*/*.{js,jsx,ts,tsx,mts}' --format=json

[{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/.eslintrc.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/actions/ddg.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/actions/file-reader-api.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/actions/file-reader-api.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/actions/jaeger-api.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/actions/jaeger-api.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":33,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[863,866],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[863,866],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":34,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[928,931],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[928,931],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":39,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":39,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1077,1080],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1077,1080],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":40,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1154,1157],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1154,1157],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":49,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":49,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1444,1447],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1444,1447],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":62,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":62,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2100,2103],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2100,2103],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2017 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { createAction } from 'redux-actions';\nimport JaegerAPI from '../api/jaeger';\n\nconst metricType: Record<string, string> = {\n  latencies: 'latencies',\n  calls: 'calls',\n  errors: 'errors',\n};\n\nexport const fetchTrace = createAction(\n  '@JAEGER_API/FETCH_TRACE',\n  (id: string) => JaegerAPI.fetchTrace(id),\n  (id: string) => ({ id })\n);\n\nexport const fetchMultipleTraces = createAction(\n  '@JAEGER_API/FETCH_MULTIPLE_TRACES',\n  (ids: string[]) => JaegerAPI.searchTraces({ traceID: ids }),\n  (ids: string[]) => ({ ids })\n);\n\nexport const archiveTrace = createAction(\n  '@JAEGER_API/ARCHIVE_TRACE',\n  (id: string) => JaegerAPI.archiveTrace(id),\n  (id: string) => ({ id })\n);\n\nexport const searchTraces = createAction(\n  '@JAEGER_API/SEARCH_TRACES',\n  (query: Record<string, any>) => JaegerAPI.searchTraces(query),\n  (query: Record<string, any>) => ({ query })\n);\n\nexport const fetchDeepDependencyGraph = createAction(\n  '@JAEGER_API/FETCH_DEEP_DEPENDENCY_GRAPH',\n  (query: Record<string, any>) => JaegerAPI.fetchDeepDependencyGraph(query),\n  (query: Record<string, any>) => ({ query })\n);\n\nexport const fetchDependencies = createAction('@JAEGER_API/FETCH_DEPENDENCIES', () =>\n  JaegerAPI.fetchDependencies()\n);\n\nexport const fetchAllServiceMetrics = createAction(\n  '@JAEGER_API/FETCH_ALL_SERVICE_METRICS',\n  (serviceName?: string, query?: Record<string, any>) => {\n    return Promise.allSettled([\n      JaegerAPI.fetchMetrics(metricType.latencies, [serviceName!], { ...query, quantile: 0.5 }),\n      JaegerAPI.fetchMetrics(metricType.latencies, [serviceName!], { ...query, quantile: 0.75 }),\n      JaegerAPI.fetchMetrics(metricType.latencies, [serviceName!], { ...query }),\n      JaegerAPI.fetchMetrics(metricType.calls, [serviceName!], { ...query }),\n      JaegerAPI.fetchMetrics(metricType.errors, [serviceName!], { ...query }),\n    ]);\n  }\n);\n\nexport const fetchAggregatedServiceMetrics = createAction(\n  '@JAEGER_API/FETCH_AGGREGATED_SERVICE_METRICS',\n  (serviceName?: string, queryParams?: Record<string, any>) => {\n    const query = { ...queryParams, groupByOperation: true };\n    return Promise.allSettled([\n      JaegerAPI.fetchMetrics(metricType.latencies, [serviceName!], { ...query }),\n      JaegerAPI.fetchMetrics(metricType.calls, [serviceName!], { ...query }),\n      JaegerAPI.fetchMetrics(metricType.errors, [serviceName!], { ...query }),\n    ]);\n  }\n);\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/actions/path-agnostic-decorations.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/actions/path-agnostic-decorations.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/api/jaeger.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/api/jaeger.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":23,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[571,574],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[571,574],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":30,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[725,728],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[725,728],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":44,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":44,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1085,1088],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1085,1088],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":46,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1148,1151],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1148,1151],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":58,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":58,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1540,1543],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1540,1543],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":69,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":69,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1905,1908],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1905,1908],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":94,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":94,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2919,2922],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2919,2922],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":97,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":97,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3043,3046],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3043,3046],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":100,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":100,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3129,3132],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3129,3132],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":100,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":100,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3144,3147],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3144,3147],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":103,"column":100,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":103,"endColumn":103,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3322,3325],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3322,3325],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":106,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":106,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3480,3483],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3480,3483],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":109,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":109,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3620,3623],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3620,3623],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":112,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":112,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3749,3752],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3749,3752],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":112,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":112,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3763,3766],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3763,3766],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":115,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":115,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3923,3926],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3923,3926],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":123,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":123,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4089,4092],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4089,4092],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":126,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":126,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4182,4185],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4182,4185],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":129,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":129,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4282,4285],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4282,4285],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":129,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":129,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4297,4300],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4297,4300],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":132,"column":85,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":132,"endColumn":88,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4449,4452],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4449,4452],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":132,"column":100,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":132,"endColumn":103,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4464,4467],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4464,4467],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":137,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":137,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4720,4723],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4720,4723],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":23,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2017 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport fetch from 'isomorphic-fetch';\nimport dayjs from 'dayjs';\nimport _duration from 'dayjs/plugin/duration';\nimport queryString from 'query-string';\n\nimport getConfig from '../utils/config/get-config';\nimport prefixUrl from '../utils/prefix-url';\n\ndayjs.extend(_duration);\n\ninterface IApiError extends Error {\n  httpStatus?: number;\n  httpStatusText?: string;\n  httpBody?: string;\n  httpUrl?: string;\n  httpQuery?: string;\n}\n\ntype FetchOptions = {\n  query?: string | Record<string, any> | null;\n  method?: string;\n  body?: string;\n  credentials?: RequestCredentials;\n};\n\n// export for tests\nexport function getMessageFromError(errData: any, status: number): string {\n  if (errData.code != null && errData.msg != null) {\n    if (errData.code === status) {\n      return errData.msg;\n    }\n    return `${errData.code} - ${errData.msg}`;\n  }\n  try {\n    return JSON.stringify(errData);\n  } catch {\n    return String(errData);\n  }\n}\n\nfunction getJSON(url: string, options: FetchOptions = {}): Promise<any> {\n  const { query = null, ...init } = options;\n  (init as any).credentials = 'same-origin';\n  let queryStr = '';\n\n  if (query) {\n    queryStr = `?${typeof query === 'string' ? query : queryString.stringify(query)}`;\n  }\n\n  return fetch(`${url}${queryStr}`, init as RequestInit).then((response: Response) => {\n    if (response.status < 400) {\n      return response.json();\n    }\n    return response.text().then((bodyText: string) => {\n      let data: any;\n      let bodyTextFmt: string | null;\n      let errorMessage: string;\n      try {\n        data = JSON.parse(bodyText);\n        bodyTextFmt = JSON.stringify(data, null, 2);\n      } catch {\n        data = null;\n        bodyTextFmt = null;\n      }\n      if (data && Array.isArray(data.errors) && data.errors.length) {\n        errorMessage = data.errors.map((err: any) => getMessageFromError(err, response.status)).join('; ');\n      } else {\n        errorMessage = bodyText || `${response.status} - ${response.statusText}`;\n      }\n      if (typeof errorMessage === 'string') {\n        errorMessage = errorMessage.trim();\n      }\n      const error: IApiError = new Error(`HTTP Error: ${errorMessage}`);\n      error.httpStatus = response.status;\n      error.httpStatusText = response.statusText;\n      error.httpBody = bodyTextFmt || bodyText;\n      error.httpUrl = url;\n      error.httpQuery = typeof query === 'string' ? query : queryString.stringify(query || {});\n      throw error;\n    });\n  });\n}\n\nexport const DEFAULT_API_ROOT = prefixUrl('/api/');\nexport const ANALYTICS_ROOT = prefixUrl('/analytics/');\nexport const QUALITY_METRICS_ROOT = prefixUrl(getConfig().qualityMetrics?.apiEndpoint || '');\nexport const DEFAULT_DEPENDENCY_LOOKBACK = dayjs.duration(1, 'weeks').asMilliseconds();\n\nconst JaegerAPI = {\n  apiRoot: DEFAULT_API_ROOT,\n  archiveTrace(id: string): Promise<any> {\n    return getJSON(`${this.apiRoot}archive/${id}`, { method: 'POST' });\n  },\n  fetchDecoration(url: string): Promise<any> {\n    return getJSON(url);\n  },\n  fetchDeepDependencyGraph(query: Record<string, any>): Promise<any> {\n    return getJSON(`${ANALYTICS_ROOT}v1/dependencies`, { query });\n  },\n  fetchDependencies(endTs = new Date().getTime(), lookback = DEFAULT_DEPENDENCY_LOOKBACK): Promise<any> {\n    return getJSON(`${this.apiRoot}dependencies`, { query: { endTs, lookback } });\n  },\n  fetchQualityMetrics(service: string, hours: number): Promise<any> {\n    return getJSON(QUALITY_METRICS_ROOT, { query: { hours, service } });\n  },\n  fetchServiceOperations(serviceName: string): Promise<any> {\n    return getJSON(`${this.apiRoot}services/${encodeURIComponent(serviceName)}/operations`);\n  },\n  transformOTLP(traces: any): Promise<any> {\n    return getJSON(`${this.apiRoot}transform`, { method: 'POST', body: JSON.stringify(traces) });\n  },\n  fetchServiceServerOps(service: string): Promise<any> {\n    return getJSON(`${this.apiRoot}operations`, {\n      query: {\n        service,\n        spanKind: 'server',\n      },\n    });\n  },\n  fetchServices(): Promise<any> {\n    return getJSON(`${this.apiRoot}services`);\n  },\n  fetchTrace(id: string): Promise<any> {\n    return getJSON(`${this.apiRoot}traces/${id}`);\n  },\n  searchTraces(query: Record<string, any>): Promise<any> {\n    return getJSON(`${this.apiRoot}traces`, { query });\n  },\n  fetchMetrics(metricType: string, serviceNameList: string[], query: Record<string, any>): Promise<any> {\n    const servicesName = serviceNameList.map((serviceName: string) => `service=${serviceName}`).join(',');\n\n    return getJSON(`${this.apiRoot}metrics/${metricType}`, {\n      query: `${servicesName}&${queryString.stringify(query)}`,\n    }).then((d: any) => ({ ...d, quantile: query.quantile }));\n  },\n};\n\nexport default JaegerAPI;\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/api/v3/client.test.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":15,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[408,411],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[408,411],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":20,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[500,503],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[500,503],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'abortController' is assigned a value but never used.","line":202,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":202,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2026 The Jaeger Authors.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { JaegerClient, jaegerClient } from './client';\n\ndescribe('JaegerClient', () => {\n  let client: JaegerClient;\n  let mockFetch: jest.Mock;\n  let originalFetch: typeof globalThis.fetch;\n\n  beforeEach(() => {\n    client = new JaegerClient();\n    originalFetch = globalThis.fetch;\n    mockFetch = jest.fn();\n    (global as any).fetch = mockFetch;\n    jest.useFakeTimers();\n  });\n\n  afterEach(() => {\n    (global as any).fetch = originalFetch;\n    jest.useRealTimers();\n  });\n\n  describe('fetchServices', () => {\n    it('successfully fetches and returns service list', async () => {\n      const mockServices = ['service-a', 'service-b', 'service-c'];\n      mockFetch.mockResolvedValue({\n        ok: true,\n        json: async () => ({ services: mockServices }),\n      });\n\n      const promise = client.fetchServices();\n      jest.runAllTimers();\n      const result = await promise;\n\n      expect(result).toEqual(mockServices);\n      expect(mockFetch).toHaveBeenCalledWith(\n        '/api/v3/services',\n        expect.objectContaining({ signal: expect.any(AbortSignal) })\n      );\n    });\n\n    it('returns empty array when API returns empty services', async () => {\n      mockFetch.mockResolvedValue({\n        ok: true,\n        json: async () => ({ services: [] }),\n      });\n\n      const promise = client.fetchServices();\n      jest.runAllTimers();\n      const result = await promise;\n\n      expect(result).toEqual([]);\n    });\n\n    it('throws validation error when API returns no services field', async () => {\n      mockFetch.mockResolvedValue({\n        ok: true,\n        json: async () => ({}),\n      });\n\n      const promise = client.fetchServices();\n      jest.runAllTimers();\n\n      await expect(promise).rejects.toThrow(); // ZodError\n    });\n\n    it('throws error when response is not OK', async () => {\n      mockFetch.mockResolvedValue({\n        ok: false,\n        status: 500,\n        statusText: 'Internal Server Error',\n        json: async () => ({}),\n      });\n\n      const promise = client.fetchServices();\n      jest.runAllTimers();\n\n      await expect(promise).rejects.toThrow('Failed to fetch services: 500 Internal Server Error');\n    });\n\n    it('throws error when response is 404', async () => {\n      mockFetch.mockResolvedValue({\n        ok: false,\n        status: 404,\n        statusText: 'Not Found',\n        json: async () => ({}),\n      });\n\n      const promise = client.fetchServices();\n      jest.runAllTimers();\n\n      await expect(promise).rejects.toThrow('Failed to fetch services: 404 Not Found');\n    });\n  });\n\n  describe('fetchSpanNames', () => {\n    it('successfully fetches span names for a given service', async () => {\n      const mockOperations = [\n        { name: 'GET /api/users', spanKind: 'server' },\n        { name: 'POST /api/users', spanKind: 'server' },\n      ];\n      mockFetch.mockResolvedValue({\n        ok: true,\n        json: async () => ({ operations: mockOperations }),\n      });\n\n      const promise = client.fetchSpanNames('test-service');\n      jest.runAllTimers();\n      const result = await promise;\n\n      expect(result).toEqual(mockOperations);\n      expect(mockFetch).toHaveBeenCalledWith(\n        '/api/v3/operations?service=test-service',\n        expect.objectContaining({ signal: expect.any(AbortSignal) })\n      );\n    });\n\n    it('properly encodes service name with special characters', async () => {\n      mockFetch.mockResolvedValue({\n        ok: true,\n        json: async () => ({ operations: [] }),\n      });\n\n      const promise = client.fetchSpanNames('service with spaces & special=chars');\n      jest.runAllTimers();\n      await promise;\n\n      expect(mockFetch).toHaveBeenCalledWith(\n        '/api/v3/operations?service=service%20with%20spaces%20%26%20special%3Dchars',\n        expect.objectContaining({ signal: expect.any(AbortSignal) })\n      );\n    });\n\n    it('returns empty array when API returns empty operations', async () => {\n      mockFetch.mockResolvedValue({\n        ok: true,\n        json: async () => ({ operations: [] }),\n      });\n\n      const promise = client.fetchSpanNames('empty-service');\n      jest.runAllTimers();\n      const result = await promise;\n\n      expect(result).toEqual([]);\n    });\n\n    it('throws validation error when API returns no operations field', async () => {\n      mockFetch.mockResolvedValue({\n        ok: true,\n        json: async () => ({}),\n      });\n\n      const promise = client.fetchSpanNames('test-service');\n      jest.runAllTimers();\n\n      await expect(promise).rejects.toThrow(); // ZodError\n    });\n\n    it('throws error when response is not OK with service name in message', async () => {\n      mockFetch.mockResolvedValue({\n        ok: false,\n        status: 500,\n        statusText: 'Internal Server Error',\n        json: async () => ({}),\n      });\n\n      const promise = client.fetchSpanNames('my-service');\n      jest.runAllTimers();\n\n      await expect(promise).rejects.toThrow(\n        'Failed to fetch span names for service \"my-service\": 500 Internal Server Error'\n      );\n    });\n  });\n\n  describe('fetchWithTimeout', () => {\n    it('successfully completes requests within timeout', async () => {\n      const mockResponse = { ok: true, json: async () => ({ services: [] }) };\n      mockFetch.mockResolvedValue(mockResponse);\n\n      const promise = client.fetchServices();\n      jest.runAllTimers();\n      const result = await promise;\n\n      expect(result).toEqual([]);\n    });\n\n    it('throws validation error when API returns invalid structure', async () => {\n      mockFetch.mockResolvedValue({\n        ok: true,\n        json: async () => ({ services: 'not-an-array' }),\n      });\n\n      const promise = client.fetchServices();\n      jest.runAllTimers();\n\n      await expect(promise).rejects.toThrow(); // ZodError\n    });\n\n    it('aborts and throws timeout error after default timeout (10s)', async () => {\n      let abortController: AbortController | null = null;\n      mockFetch.mockImplementation((url: string, options?: { signal?: AbortSignal }) => {\n        return new Promise((resolve, reject) => {\n          if (options?.signal) {\n            options.signal.addEventListener('abort', () => {\n              const abortError = new Error('The operation was aborted');\n              abortError.name = 'AbortError';\n              reject(abortError);\n            });\n          }\n        });\n      });\n\n      const promise = client.fetchServices();\n      jest.advanceTimersByTime(10000);\n\n      await expect(promise).rejects.toThrow('Request timeout after 10000ms');\n    });\n\n    it('clears timeout after successful request', async () => {\n      const clearTimeoutSpy = jest.spyOn(globalThis, 'clearTimeout');\n      mockFetch.mockResolvedValue({\n        ok: true,\n        json: async () => ({ services: [] }),\n      });\n\n      const promise = client.fetchServices();\n      jest.runAllTimers();\n      await promise;\n\n      expect(clearTimeoutSpy).toHaveBeenCalled();\n      clearTimeoutSpy.mockRestore();\n    });\n\n    it('handles network errors that are not timeout-related', async () => {\n      const networkError = new Error('Network connection failed');\n      mockFetch.mockRejectedValue(networkError);\n\n      const promise = client.fetchServices();\n      jest.runAllTimers();\n\n      await expect(promise).rejects.toThrow('Network connection failed');\n    });\n\n    it('clears timeout even when request fails', async () => {\n      const clearTimeoutSpy = jest.spyOn(globalThis, 'clearTimeout');\n      mockFetch.mockRejectedValue(new Error('Network error'));\n\n      const promise = client.fetchServices();\n      jest.runAllTimers();\n\n      await expect(promise).rejects.toThrow('Network error');\n      expect(clearTimeoutSpy).toHaveBeenCalled();\n      clearTimeoutSpy.mockRestore();\n    });\n  });\n\n  describe('singleton instance', () => {\n    it('exports a singleton jaegerClient instance', () => {\n      expect(jaegerClient).toBeInstanceOf(JaegerClient);\n    });\n\n    it('singleton instance has all expected methods', () => {\n      expect(jaegerClient.fetchServices).toBeInstanceOf(Function);\n      expect(jaegerClient.fetchSpanNames).toBeInstanceOf(Function);\n    });\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/api/v3/client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/api/v3/schemas.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/api/v3/schemas.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/App/Branding.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/App/NotFound.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/App/NotFound.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/App/Page.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/App/Page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/App/ThemeProvider.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":234,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":234,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6627,6630],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6627,6630],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":235,"column":5,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":235,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[6646,6659],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":236,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":236,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6682,6685],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6682,6685],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":243,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":243,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6806,6809],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6806,6809],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2025 The Jaeger Authors.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react';\nimport '@testing-library/jest-dom';\nimport { act, fireEvent, render, renderHook, screen, waitFor } from '@testing-library/react';\n\nimport AppThemeProvider, { useThemeMode } from './ThemeProvider';\nimport { THEME_STORAGE_KEY } from './ThemeStorage';\nimport { getConfigValue } from '../../utils/config/get-config';\n\njest.mock('../../utils/config/get-config', () => ({\n  getConfigValue: jest.fn(),\n}));\n\nfunction setupMatchMedia(matches = false) {\n  Object.defineProperty(window, 'matchMedia', {\n    writable: true,\n    value: jest.fn().mockImplementation(query => ({\n      matches,\n      media: query,\n      onchange: null,\n      addListener: jest.fn(),\n      removeListener: jest.fn(),\n      addEventListener: jest.fn(),\n      removeEventListener: jest.fn(),\n      dispatchEvent: jest.fn(),\n    })),\n  });\n}\n\nfunction ThemeConsumer() {\n  const { mode, toggleMode, setMode } = useThemeMode();\n  return (\n    <div>\n      <span data-testid=\"theme-mode\">{mode}</span>\n      <button type=\"button\" onClick={toggleMode}>\n        toggle theme\n      </button>\n      <button type=\"button\" onClick={() => setMode('light')}>\n        force light\n      </button>\n    </div>\n  );\n}\n\ndescribe('AppThemeProvider', () => {\n  beforeEach(() => {\n    window.localStorage.clear();\n    delete document.body.dataset.theme;\n    setupMatchMedia(false);\n    (getConfigValue as jest.Mock).mockImplementation(key => {\n      if (key === 'themes.enabled') {\n        return true;\n      }\n      return undefined;\n    });\n  });\n\n  it('initializes using the stored preference when present', () => {\n    window.localStorage.setItem(THEME_STORAGE_KEY, 'dark');\n\n    render(\n      <AppThemeProvider>\n        <ThemeConsumer />\n      </AppThemeProvider>\n    );\n\n    expect(screen.getByTestId('theme-mode')).toHaveTextContent('dark');\n  });\n\n  it('toggles between light and dark, updating body and storage', async () => {\n    render(\n      <AppThemeProvider>\n        <ThemeConsumer />\n      </AppThemeProvider>\n    );\n\n    const toggleButton = screen.getByRole('button', { name: /toggle theme/i });\n    fireEvent.click(toggleButton);\n\n    await waitFor(() => {\n      expect(screen.getByTestId('theme-mode')).toHaveTextContent('dark');\n      expect(document.body.dataset.theme).toBe('dark');\n      expect(window.localStorage.getItem(THEME_STORAGE_KEY)).toBe('dark');\n    });\n  });\n\n  it('toggles from dark back to light', async () => {\n    window.localStorage.setItem(THEME_STORAGE_KEY, 'dark');\n    render(\n      <AppThemeProvider>\n        <ThemeConsumer />\n      </AppThemeProvider>\n    );\n\n    const toggleButton = screen.getByRole('button', { name: /toggle theme/i });\n    fireEvent.click(toggleButton);\n\n    await waitFor(() => {\n      expect(screen.getByTestId('theme-mode')).toHaveTextContent('light');\n      expect(document.body.dataset.theme).toBe('light');\n      expect(window.localStorage.getItem(THEME_STORAGE_KEY)).toBe('light');\n    });\n  });\n\n  it('prefers system dark mode when no stored preference exists', () => {\n    setupMatchMedia(true);\n\n    render(\n      <AppThemeProvider>\n        <ThemeConsumer />\n      </AppThemeProvider>\n    );\n\n    expect(screen.getByTestId('theme-mode')).toHaveTextContent('dark');\n  });\n\n  it('falls back to the default mode when the stored value is invalid', () => {\n    window.localStorage.setItem(THEME_STORAGE_KEY, 'sepia');\n\n    render(\n      <AppThemeProvider>\n        <ThemeConsumer />\n      </AppThemeProvider>\n    );\n\n    expect(screen.getByTestId('theme-mode')).toHaveTextContent('light');\n  });\n\n  it('ignores stored preference when themes are disabled', () => {\n    (getConfigValue as jest.Mock).mockReturnValue(false);\n    window.localStorage.setItem(THEME_STORAGE_KEY, 'dark');\n\n    render(\n      <AppThemeProvider>\n        <ThemeConsumer />\n      </AppThemeProvider>\n    );\n\n    expect(screen.getByTestId('theme-mode')).toHaveTextContent('light');\n  });\n\n  it('recovers to light mode when setMode is invoked', async () => {\n    window.localStorage.setItem(THEME_STORAGE_KEY, 'dark');\n\n    render(\n      <AppThemeProvider>\n        <ThemeConsumer />\n      </AppThemeProvider>\n    );\n\n    fireEvent.click(screen.getByRole('button', { name: /force light/i }));\n\n    await waitFor(() => {\n      expect(screen.getByTestId('theme-mode')).toHaveTextContent('light');\n      expect(document.body.dataset.theme).toBe('light');\n      expect(window.localStorage.getItem(THEME_STORAGE_KEY)).toBe('light');\n    });\n  });\n\n  it('swallows storage errors when persisting mode changes', async () => {\n    const originalSetItem = window.localStorage.setItem;\n    window.localStorage.setItem = jest.fn(() => {\n      throw new Error('quota exceeded');\n    });\n\n    try {\n      render(\n        <AppThemeProvider>\n          <ThemeConsumer />\n        </AppThemeProvider>\n      );\n\n      const toggleButton = screen.getByRole('button', { name: /toggle theme/i });\n      fireEvent.click(toggleButton);\n\n      await waitFor(() => {\n        expect(screen.getByTestId('theme-mode')).toHaveTextContent('dark');\n        expect(document.body.dataset.theme).toBe('dark');\n      });\n    } finally {\n      window.localStorage.setItem = originalSetItem;\n    }\n  });\n\n  it('ignores errors when reading the stored preference', () => {\n    const originalGetItem = window.localStorage.getItem;\n    window.localStorage.getItem = jest.fn(() => {\n      throw new Error('blocked');\n    });\n\n    try {\n      render(\n        <AppThemeProvider>\n          <ThemeConsumer />\n        </AppThemeProvider>\n      );\n\n      expect(screen.getByTestId('theme-mode')).toHaveTextContent('light');\n    } finally {\n      window.localStorage.getItem = originalGetItem;\n    }\n  });\n\n  it('provides default context values when the hook is used without a provider', () => {\n    const observer = jest.fn();\n\n    function BareConsumer() {\n      const context = useThemeMode();\n      React.useEffect(() => {\n        observer(context);\n      }, [context]);\n      return null;\n    }\n\n    render(<BareConsumer />);\n\n    expect(observer).toHaveBeenCalledWith(\n      expect.objectContaining({\n        mode: 'light',\n        setMode: expect.any(Function),\n        toggleMode: expect.any(Function),\n      })\n    );\n    const context = observer.mock.calls[0][0];\n    expect(context.setMode('dark')).toBeUndefined();\n    expect(context.toggleMode()).toBeUndefined();\n  });\n\n  it('skips updating document body when document is undefined', () => {\n    const { result } = renderHook(() => useThemeMode(), { wrapper: AppThemeProvider });\n\n    const originalDocument = (global as any).document;\n    // @ts-ignore\n    delete (global as any).document;\n\n    try {\n      act(() => {\n        result.current.toggleMode();\n      });\n    } finally {\n      (global as any).document = originalDocument;\n    }\n  });\n\n  it('correctly calculates and syncs AntD tokens in dark mode', async () => {\n    render(\n      <AppThemeProvider>\n        <ThemeConsumer />\n      </AppThemeProvider>\n    );\n\n    const toggleButton = screen.getByRole('button', { name: /toggle theme/i });\n    fireEvent.click(toggleButton);\n\n    await waitFor(() => {\n      expect(screen.getByTestId('theme-mode')).toHaveTextContent('dark');\n    });\n\n    // Verify that a token not manually overridden (like controlItemBgActive)\n    // is synced to a dark color CSS variable.\n    // AntD's darkAlgorithm usually results in dark backgrounds for selected items.\n    const root = document.documentElement;\n    const controlItemBgActive = root.style.getPropertyValue('--ant-control-item-bg-active');\n\n    // In dark mode, controlItemBgActive should NOT be the light mode default (usually #e6f4ff or similar)\n    // It should be a darker color or at least DIFFERENT from light mode.\n    // Note: ThemeTokenSync prefixes with --ant- and converts camelCase to kebab-case.\n    expect(controlItemBgActive).toBeDefined();\n    expect(controlItemBgActive).not.toBe('');\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/App/ThemeProvider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/App/ThemeStorage.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/App/ThemeStorage.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":27,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":27,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":47,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":47,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2025 The Jaeger Authors.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { getConfigValue } from '../../utils/config/get-config';\n\nexport type ThemeMode = 'light' | 'dark';\n\nexport const THEME_STORAGE_KEY = 'jaeger-ui-theme';\nexport const DEFAULT_MODE: ThemeMode = 'light';\n\nexport function readStoredTheme(targetWindow?: Window | null): ThemeMode | null {\n  const activeWindow =\n    targetWindow !== undefined\n      ? (targetWindow ?? undefined)\n      : typeof window !== 'undefined'\n        ? window\n        : undefined;\n  if (!activeWindow) {\n    return null;\n  }\n\n  try {\n    const stored = activeWindow.localStorage.getItem(THEME_STORAGE_KEY) as ThemeMode | null;\n    if (stored === 'light' || stored === 'dark') {\n      return stored;\n    }\n  } catch (err) {\n    // Local storage may be blocked; ignore and fallback below.\n  }\n\n  return null;\n}\n\nexport function writeStoredTheme(mode: ThemeMode, targetWindow?: Window | null) {\n  const activeWindow =\n    targetWindow !== undefined\n      ? (targetWindow ?? undefined)\n      : typeof window !== 'undefined'\n        ? window\n        : undefined;\n  if (!activeWindow) {\n    return;\n  }\n\n  try {\n    activeWindow.localStorage.setItem(THEME_STORAGE_KEY, mode);\n  } catch (err) {\n    // Ignore storage errors (e.g., Safari in private mode).\n  }\n}\n\nexport function getInitialTheme(): ThemeMode {\n  if (!getConfigValue('themes.enabled')) {\n    return DEFAULT_MODE;\n  }\n  const stored = readStoredTheme();\n  if (stored) {\n    return stored;\n  }\n\n  if (\n    typeof window !== 'undefined' &&\n    window.matchMedia &&\n    window.matchMedia('(prefers-color-scheme: dark)').matches\n  ) {\n    return 'dark';\n  }\n\n  return DEFAULT_MODE;\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/App/ThemeToggleButton.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/App/ThemeToggleButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/App/ThemeTokenSync.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/App/ThemeTokenSync.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/App/TopNav.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/App/TopNav.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'prefixUrl' is defined but never used.","line":23,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":23,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2017 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react';\nimport { Dropdown, Menu, MenuProps } from 'antd';\nimport { IoChevronDown } from 'react-icons/io5';\nimport _has from 'lodash/has';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\n\nimport TraceIDSearchInput from './TraceIDSearchInput';\nimport ThemeToggleButton from './ThemeToggleButton';\nimport Branding from './Branding';\nimport * as dependencyGraph from '../DependencyGraph/url';\nimport * as deepDependencies from '../DeepDependencies/url';\nimport * as qualityMetrics from '../QualityMetrics/url';\nimport * as searchUrl from '../SearchTracePage/url';\nimport * as diffUrl from '../TraceDiff/url';\nimport * as monitorATMUrl from '../Monitor/url';\nimport { ReduxState } from '../../types';\nimport { ConfigMenuItem, ConfigMenuGroup } from '../../types/config';\nimport { getConfigValue } from '../../utils/config/get-config';\nimport prefixUrl from '../../utils/prefix-url';\n\nimport './TopNav.css';\nimport withRouteProps, { IWithRouteProps } from '../../utils/withRouteProps';\n\ntype Props = ReduxState & IWithRouteProps;\n\nconst NAV_LINKS = [\n  {\n    to: searchUrl.getUrl(),\n    matches: searchUrl.matches,\n    text: 'Search',\n  },\n  {\n    to: (props: Props) => diffUrl.getUrl(props.traceDiff),\n    matches: diffUrl.matches,\n    text: 'Compare',\n  },\n];\n\nif (getConfigValue('dependencies.menuEnabled')) {\n  NAV_LINKS.push({\n    to: dependencyGraph.getUrl(),\n    matches: dependencyGraph.matches,\n    text: 'System Architecture',\n  });\n}\n\nif (getConfigValue('deepDependencies.menuEnabled')) {\n  NAV_LINKS.push({\n    to: deepDependencies.getUrl(),\n    matches: deepDependencies.matches,\n    text: 'Service Dependencies',\n  });\n}\n\nif (getConfigValue('qualityMetrics.menuEnabled')) {\n  NAV_LINKS.push({\n    to: qualityMetrics.getUrl(),\n    matches: qualityMetrics.matches,\n    text: getConfigValue('qualityMetrics.menuLabel'),\n  });\n}\n\nif (getConfigValue('monitor.menuEnabled')) {\n  NAV_LINKS.push({\n    to: monitorATMUrl.getUrl(),\n    matches: monitorATMUrl.matches,\n    text: 'Monitor',\n  });\n}\n\nfunction getItem(item: ConfigMenuItem) {\n  const { label, anchorTarget, url } = item;\n  const link = (\n    <a href={url} target={anchorTarget || '_blank'} rel=\"noopener noreferrer\">\n      {label}\n    </a>\n  );\n\n  return { label: url ? link : label, key: label, disabled: !url };\n}\n\nfunction CustomNavDropdown({ label, items }: ConfigMenuGroup) {\n  const menuItems = items.map(getItem);\n  return (\n    <Dropdown menu={{ items: menuItems }} placement=\"bottomRight\">\n      <a className=\"Dropdown--icon-container\">\n        {label} <IoChevronDown className=\"Dropdown--icon\" />\n      </a>\n    </Dropdown>\n  );\n}\n\nfunction isItem(itemOrGroup: ConfigMenuItem | ConfigMenuGroup): itemOrGroup is ConfigMenuItem {\n  return !_has(itemOrGroup, 'items');\n}\n\nconst itemsGlobalLeft: MenuProps['items'] = [\n  {\n    label: <Branding />,\n    key: 'Branding',\n  },\n];\n\nexport function TopNavImpl(props: Props) {\n  const { config, pathname } = props;\n  const menuItems = Array.isArray(config.menu) ? config.menu : [];\n\n  const itemsGlobalRight: MenuProps['items'] = [\n    {\n      label: <TraceIDSearchInput />,\n      key: 'TraceIDSearchInput',\n    },\n    ...menuItems.map(m => {\n      if (isItem(m)) {\n        return { label: getItem(m).label, key: getItem(m).key };\n      }\n      return { label: <CustomNavDropdown key={m.label} {...m} />, key: m.label };\n    }),\n    ...(getConfigValue('themes.enabled')\n      ? [\n          {\n            label: <ThemeToggleButton />,\n            key: 'ThemeToggleButton',\n          },\n        ]\n      : []),\n  ];\n\n  return (\n    <div style={{ display: 'flex', justifyContent: 'space-between' }}>\n      <Menu\n        theme=\"dark\"\n        items={itemsGlobalLeft?.concat(\n          NAV_LINKS.map(({ matches, to, text }) => {\n            const url = typeof to === 'string' ? to : to(props);\n            const key = matches(pathname) ? pathname : url;\n            return {\n              key,\n              label: (\n                <Link style={{ outline: 'revert' }} to={url}>\n                  {text}\n                </Link>\n              ),\n            };\n          })\n        )}\n        className=\"Menu--item\"\n        mode=\"horizontal\"\n        selectable={false}\n        selectedKeys={[pathname]}\n        style={{ flex: '1 1 0', minWidth: 0 }}\n      />\n      <Menu\n        theme=\"dark\"\n        items={itemsGlobalRight}\n        className=\"Menu--item\"\n        mode=\"horizontal\"\n        selectable={false}\n        disabledOverflow\n        selectedKeys={[pathname]}\n        style={{ flex: '0 1 auto', minWidth: 0 }}\n      />\n    </div>\n  );\n}\n\nTopNavImpl.CustomNavDropdown = CustomNavDropdown;\n\n// export for tests\nexport function mapStateToProps(state: ReduxState) {\n  return state;\n}\n\nexport default connect(mapStateToProps)(withRouteProps(TopNavImpl));\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/App/TraceIDSearchInput.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/App/TraceIDSearchInput.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/App/index.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/App/index.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":54,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2076,2079],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2076,2079],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":61,"column":12,"nodeType":"Block","messageId":"tsIgnoreInsteadOfExpectError","endLine":61,"endColumn":28,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[2434,2450],"text":"/* @ts-expect-error */"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2017 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Provider } from 'react-redux';\nimport { Route, Redirect, Switch } from 'react-router-dom';\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\n\nimport NotFound from './NotFound';\nimport Page from './Page';\nimport DependencyGraph from '../DependencyGraph';\nimport { ROUTE_PATH as dependenciesPath } from '../DependencyGraph/url';\nimport DeepDependencies from '../DeepDependencies';\nimport { ROUTE_PATH as deepDependenciesPath } from '../DeepDependencies/url';\nimport QualityMetrics from '../QualityMetrics';\nimport { ROUTE_PATH as qualityMetricsPath } from '../QualityMetrics/url';\nimport SearchTracePage from '../SearchTracePage';\nimport { ROUTE_PATH as searchPath } from '../SearchTracePage/url';\nimport TraceDiff from '../TraceDiff';\nimport { ROUTE_PATH as traceDiffPath } from '../TraceDiff/url';\nimport TracePage from '../TracePage';\nimport { ROUTE_PATH as tracePath } from '../TracePage/url';\nimport MonitorATMPage from '../Monitor';\nimport { ROUTE_PATH as monitorATMPath } from '../Monitor/url';\nimport JaegerAPI, { DEFAULT_API_ROOT } from '../../api/jaeger';\nimport processScripts from '../../utils/config/process-scripts';\nimport prefixUrl from '../../utils/prefix-url';\n\nimport '../common/vars.css';\nimport '../common/utils.css';\nimport 'antd/dist/reset.css';\nimport './index.css';\nimport { store } from '../../utils/configure-store';\nimport ThemeProvider from './ThemeProvider';\n\n// Create a React Query client\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      staleTime: 5 * 60 * 1000, // 5 minutes\n      retry: 1,\n    },\n  },\n});\n\n// Initialize API configuration and process configuration scripts at module level\n// to ensure they run once when the application is loaded, before any components are rendered\nJaegerAPI.apiRoot = DEFAULT_API_ROOT;\nprocessScripts();\n\nexport default function JaegerUIApp() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <ThemeProvider>\n        <Provider store={store as any}>\n          {\n            // the Page component is a connected component (wrapped by Redux's connect HOC)\n            // that is also wrapped by a custom withRouteProps HOC.\n            // The @ts-ignore was added because of a specific TypeScript error that occurs\n            // when mixing Redux 5/9, React 19, and complex HOCs.\n          }\n          {/* @ts-ignore */}\n          <Page>\n            <Switch>\n              <Route path={searchPath}>\n                <SearchTracePage />\n              </Route>\n              <Route path={traceDiffPath}>\n                <TraceDiff />\n              </Route>\n              <Route path={tracePath}>\n                <TracePage />\n              </Route>\n              <Route path={dependenciesPath}>\n                <DependencyGraph />\n              </Route>\n              <Route path={deepDependenciesPath}>\n                <DeepDependencies />\n              </Route>\n              <Route path={qualityMetricsPath}>\n                <QualityMetrics />\n              </Route>\n              <Route path={monitorATMPath}>\n                <MonitorATMPage />\n              </Route>\n\n              <Route exact path=\"/\">\n                <Redirect to={searchPath} />\n              </Route>\n              <Route exact path={prefixUrl()}>\n                <Redirect to={searchPath} />\n              </Route>\n              <Route exact path={prefixUrl('/')}>\n                <Redirect to={searchPath} />\n              </Route>\n\n              <Route>\n                <NotFound error=\"Page not found\" />\n              </Route>\n            </Switch>\n          </Page>\n        </Provider>\n      </ThemeProvider>\n    </QueryClientProvider>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DeepDependencies/Graph/DdgNodeContent/calc-positioning.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DeepDependencies/Graph/DdgNodeContent/calc-positioning.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DeepDependencies/Graph/DdgNodeContent/constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DeepDependencies/Graph/DdgNodeContent/index.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DeepDependencies/Graph/DdgNodeContent/index.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-use-before-define","severity":1,"message":"'DdgNodeContent' was used before it was defined.","line":105,"column":8,"nodeType":"JSXIdentifier","messageId":"noUseBeforeDefine","endLine":105,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DeepDependencies/Graph/DdgNodeContent/node-icons.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DeepDependencies/Graph/getNodeRenderers.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DeepDependencies/Graph/getNodeRenderers.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DeepDependencies/Graph/getSetOnEdge.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DeepDependencies/Graph/getSetOnEdge.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DeepDependencies/Graph/index.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DeepDependencies/Graph/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DeepDependencies/Header/ChevronDown.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DeepDependencies/Header/ChevronDown.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DeepDependencies/Header/HopsSelector/Selector.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DeepDependencies/Header/HopsSelector/Selector.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DeepDependencies/Header/HopsSelector/index.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DeepDependencies/Header/HopsSelector/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DeepDependencies/Header/LayoutSettings/index.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DeepDependencies/Header/LayoutSettings/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DeepDependencies/Header/LayoutSettings/settingsIcon.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DeepDependencies/Header/index.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DeepDependencies/Header/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DeepDependencies/SidePanel/DetailsPanel.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DeepDependencies/SidePanel/DetailsPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DeepDependencies/SidePanel/index.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DeepDependencies/SidePanel/index.track.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DeepDependencies/SidePanel/index.track.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DeepDependencies/SidePanel/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DeepDependencies/index.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DeepDependencies/index.track.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DeepDependencies/index.track.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DeepDependencies/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DeepDependencies/traces.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DeepDependencies/traces.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DeepDependencies/url.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DeepDependencies/url.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'visEncoding' is assigned a value but never used.","line":94,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":94,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DependencyGraph/DAG.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DependencyGraph/DAG.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DependencyGraph/DAGOptions.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DependencyGraph/DAGOptions.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DependencyGraph/index.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DependencyGraph/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/DependencyGraph/url.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/Monitor/EmptyState/index.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/Monitor/EmptyState/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/Monitor/ServicesView/index.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/Monitor/ServicesView/index.track.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/Monitor/ServicesView/index.track.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/Monitor/ServicesView/index.tsx","messages":[{"ruleId":"prettier/prettier","severity":2,"message":"Delete ``","line":245,"column":1,"nodeType":null,"messageId":"delete","endLine":246,"endColumn":1,"fix":{"range":[8235,8236],"text":""}}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":1,"fixableWarningCount":0,"source":"// Copyright (c) 2021 The Jaeger Authors.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React, { useEffect, useState, useRef, useCallback } from 'react';\nimport { Row, Col, Input, Alert, Select } from 'antd';\nimport { ActionFunction, Action } from 'redux-actions';\nimport _debounce from 'lodash/debounce';\nimport _isEmpty from 'lodash/isEmpty';\nimport store from 'store';\nimport { connect } from 'react-redux';\nimport { bindActionCreators, Dispatch } from 'redux';\nimport { Link } from 'react-router-dom';\nimport * as jaegerApiActions from '../../../actions/jaeger-api';\nimport OperationTableDetails from './operationDetailsTable';\nimport ServiceGraph from './serviceGraph';\nimport LoadingIndicator from '../../common/LoadingIndicator';\nimport MonitorATMEmptyState from '../EmptyState';\nimport { ReduxState } from '../../../types';\nimport {\n  MetricsAPIQueryParams,\n  MetricsReduxState,\n  Points,\n  ServiceMetricsObject,\n  ServiceOpsMetrics,\n  spanKinds,\n  FetchAggregatedServiceMetricsResponse,\n} from '../../../types/metrics';\nimport prefixUrl from '../../../utils/prefix-url';\nimport { convertToTimeUnit, convertTimeUnitToShortTerm, getSuitableTimeUnit } from '../../../utils/date';\n\nimport './index.css';\nimport { getConfigValue } from '../../../utils/config/get-config';\nimport {\n  trackSearchOperation,\n  trackSelectService,\n  trackSelectSpanKind,\n  trackSelectTimeframe,\n  trackViewAllTraces,\n} from './index.track';\nimport withRouteProps from '../../../utils/withRouteProps';\n\nimport SearchableSelect from '../../common/SearchableSelect';\nimport { useServices } from '../../../hooks/useTraceDiscovery';\n\ntype TReduxProps = {\n  metrics: MetricsReduxState;\n};\n\ntype TProps = TReduxProps & TDispatchProps;\n\ntype TDispatchProps = {\n  fetchAggregatedServiceMetrics: ActionFunction<\n    Action<Promise<FetchAggregatedServiceMetricsResponse>>,\n    string,\n    MetricsAPIQueryParams\n  >;\n  fetchAllServiceMetrics: (serviceName: string, query: MetricsAPIQueryParams) => void;\n};\n\nconst trackSearchOperationDebounced = _debounce(searchQuery => trackSearchOperation(searchQuery), 1000);\n\nconst Search = Input.Search;\nconst Option = Select.Option;\n\nconst oneHourInMilliSeconds = 3600000;\nconst oneMinuteInMilliSeconds = 60000;\nexport const timeFrameOptions = [\n  { label: 'Last 5 minutes', value: 5 * oneMinuteInMilliSeconds },\n  { label: 'Last 15 minutes', value: 15 * oneMinuteInMilliSeconds },\n  { label: 'Last 30 minutes', value: 30 * oneMinuteInMilliSeconds },\n  { label: 'Last Hour', value: oneHourInMilliSeconds },\n  { label: 'Last 2 hours', value: 2 * oneHourInMilliSeconds },\n  { label: 'Last 6 hours', value: 6 * oneHourInMilliSeconds },\n  { label: 'Last 12 hours', value: 12 * oneHourInMilliSeconds },\n  { label: 'Last 24 hours', value: 24 * oneHourInMilliSeconds },\n  { label: 'Last 2 days', value: 48 * oneHourInMilliSeconds },\n];\nexport const spanKindOptions = [\n  { label: 'Client', value: 'client' },\n  { label: 'Server', value: 'server' },\n  { label: 'Internal', value: 'internal' },\n  { label: 'Producer', value: 'producer' },\n  { label: 'Consumer', value: 'consumer' },\n];\n\n// export for tests\nexport const getLoopbackInterval = (interval: number) => {\n  if (interval === undefined) return '';\n\n  const timeFrameObj = timeFrameOptions.find(t => t.value === interval);\n\n  if (timeFrameObj === undefined) return '';\n\n  return timeFrameObj.label.toLowerCase();\n};\n\nconst calcDisplayTimeUnit = (serviceLatencies: ServiceMetricsObject | ServiceMetricsObject[] | null) => {\n  let maxValue = 0;\n\n  if (serviceLatencies && Array.isArray(serviceLatencies)) {\n    const allMaxMetrics = serviceLatencies.map(x => x.max);\n    maxValue = Math.max(...allMaxMetrics);\n  } else if (serviceLatencies) {\n    maxValue = serviceLatencies.max;\n  }\n\n  return getSuitableTimeUnit(maxValue * 1000);\n};\n\n// export for tests\nexport const yAxisTickFormat = (timeInMS: number, displayTimeUnit: string) =>\n  convertToTimeUnit(timeInMS * 1000, displayTimeUnit);\n\nconst convertServiceErrorRateToPercentages = (serviceErrorRate: null | ServiceMetricsObject) => {\n  if (!serviceErrorRate) return null;\n\n  const convertedMetricsPoints = serviceErrorRate.metricPoints.map((metricPoint: Points) => {\n    const y = metricPoint.y;\n\n    if (y === null || y === undefined || Number.isNaN(y)) {\n      return { ...metricPoint, y: null };\n    }\n\n    return { ...metricPoint, y: y * 100 };\n  });\n\n  return { ...serviceErrorRate, metricPoints: convertedMetricsPoints };\n};\n\n// export for tests\n\nexport function MonitorATMServicesViewImpl(props: TProps) {\n  const { fetchAllServiceMetrics, fetchAggregatedServiceMetrics, metrics } = props;\n  const { data: services = [], isLoading: servicesLoading } = useServices();\n  const docsLink = getConfigValue('monitor.docsLink');\n  const graphDivWrapper = useRef<HTMLDivElement>(null);\n  const [endTime, setEndTime] = useState<number>(Date.now());\n  const [graphWidth, setGraphWidth] = useState<number>(300);\n  const [serviceOpsMetrics, setServiceOpsMetrics] = useState<ServiceOpsMetrics[] | undefined>(undefined);\n  const [searchOps, setSearchOps] = useState<string>('');\n  const [graphXDomain, setGraphXDomain] = useState<number[]>([]);\n  const [selectedService, setSelectedService] = useState<string | undefined>(\n    store.get('lastAtmSearchService')\n  );\n  const [selectedSpanKind, setSelectedSpanKind] = useState<spanKinds>(\n    store.get('lastAtmSearchSpanKind') || 'server'\n  );\n  const [selectedTimeFrame, setSelectedTimeFrame] = useState<number>(\n    store.get('lastAtmSearchTimeframe') || oneHourInMilliSeconds\n  );\n\n  const calcGraphXDomain = useCallback(() => {\n    const currentTime = Date.now();\n    setGraphXDomain([currentTime - selectedTimeFrame, currentTime]);\n  }, [selectedTimeFrame]);\n\n  const updateDimensions = useCallback(() => {\n    if (graphDivWrapper.current) {\n      setGraphWidth(graphDivWrapper.current.offsetWidth - 24);\n    }\n  }, []);\n\n  const getSelectedService = useCallback(() => {\n    return selectedService || store.get('lastAtmSearchService') || services[0];\n  }, [services, selectedService]);\n\n  const handleServiceChange = useCallback((value: string) => {\n    setSelectedService(value);\n    trackSelectService(value);\n  }, []);\n\n  const handleSpanKindChange = useCallback((value: string) => {\n    setSelectedSpanKind(value as spanKinds);\n    const { label } = spanKindOptions.find(option => option.value === value)!;\n    trackSelectSpanKind(label);\n  }, []);\n\n  const handleTimeFrameChange = useCallback((value: number) => {\n    setSelectedTimeFrame(value);\n    const { label } = timeFrameOptions.find(option => option.value === value)!;\n    trackSelectTimeframe(label);\n  }, []);\n\n  const fetchMetrics = useCallback(() => {\n    const currentService = selectedService || services[0];\n\n    if (currentService && metrics.isATMActivated) {\n      const newEndTime = Date.now();\n      setEndTime(newEndTime);\n      store.set('lastAtmSearchSpanKind', selectedSpanKind);\n      store.set('lastAtmSearchTimeframe', selectedTimeFrame);\n      store.set('lastAtmSearchService', currentService);\n\n      const metricQueryPayload = {\n        quantile: 0.95,\n        endTs: newEndTime,\n        lookback: selectedTimeFrame,\n        step: 60 * 1000,\n        ratePer: 10 * 60 * 1000,\n        spanKind: selectedSpanKind,\n      };\n\n      fetchAllServiceMetrics(currentService, metricQueryPayload);\n      fetchAggregatedServiceMetrics(currentService, metricQueryPayload);\n\n      setServiceOpsMetrics(undefined);\n      setSearchOps('');\n    }\n  }, [\n    fetchAllServiceMetrics,\n    fetchAggregatedServiceMetrics,\n    metrics.isATMActivated,\n    services,\n    selectedService,\n    selectedSpanKind,\n    selectedTimeFrame,\n  ]);\n\n  // componentDidMount equivalent\n  useEffect(() => {\n    window.addEventListener('resize', updateDimensions);\n    updateDimensions();\n    calcGraphXDomain();\n\n    return () => {\n      window.removeEventListener('resize', updateDimensions);\n    };\n  }, [updateDimensions, calcGraphXDomain]);\n\n  // componentDidUpdate equivalent\n  useEffect(() => {\n    if (services.length !== 0) {\n      fetchMetrics();\n    }\n  }, [services, fetchMetrics]);\n\n  useEffect(() => {\n    calcGraphXDomain();\n  }, [calcGraphXDomain]);\n\n  useEffect(() => {\n    fetchMetrics();\n  }, [fetchMetrics]);\n\n\n  const serviceLatencies = metrics.serviceMetrics ? metrics.serviceMetrics.service_latencies : null;\n  const displayTimeUnit = calcDisplayTimeUnit(serviceLatencies);\n  const serviceErrorRate = metrics.serviceMetrics ? metrics.serviceMetrics.service_error_rate : null;\n\n  if (servicesLoading) {\n    return <LoadingIndicator vcentered centered />;\n  }\n\n  if (metrics.isATMActivated === false) {\n    return <MonitorATMEmptyState />;\n  }\n\n  return (\n    <>\n      {_isEmpty(metrics && metrics.serviceMetrics && metrics.serviceMetrics.service_latencies) && (\n        <Alert\n          message={\n            <>\n              No data yet! Please see these\n              <Link to={{ pathname: docsLink }} target=\"_blank\">\n                &nbsp;instructions&nbsp;\n              </Link>\n              on how to set up your span metrics.\n            </>\n          }\n          type=\"warning\"\n          showIcon\n        />\n      )}\n      <div className=\"service-view-container\">\n        <Row>\n          <Col span={6}>\n            <h2 className=\"service-selector-header\">Service</h2>\n            <SearchableSelect\n              value={getSelectedService()}\n              onChange={handleServiceChange}\n              placeholder=\"Select A Service\"\n              className=\"select-a-service-input\"\n              disabled={metrics.operationMetricsLoading}\n              loading={metrics.operationMetricsLoading}\n            >\n              {services.map((service: string) => (\n                <Option key={service} value={service}>\n                  {service}\n                </Option>\n              ))}\n            </SearchableSelect>\n          </Col>\n          <Col span={6}>\n            <h2 className=\"span-kind-selector-header\">Span Kind</h2>\n            <SearchableSelect\n              value={selectedSpanKind}\n              onChange={handleSpanKindChange}\n              placeholder=\"Select A Span Kind\"\n              className=\"span-kind-selector\"\n              disabled={metrics.operationMetricsLoading}\n              loading={metrics.operationMetricsLoading}\n            >\n              {spanKindOptions.map(option => (\n                <Option key={option.value} value={option.value}>\n                  {option.label}\n                </Option>\n              ))}\n            </SearchableSelect>\n          </Col>\n        </Row>\n        <Row align=\"middle\">\n          <Col span={16}>\n            <p className=\"operations-metrics-text\">\n              Aggregation of all &quot;{getSelectedService()}&quot; metrics in selected timeframe.{' '}\n              <a\n                href={prefixUrl(\n                  `/search?end=${Date.now()}000&limit=20&lookback=${\n                    selectedTimeFrame / (3600 * 1000)\n                  }h&maxDuration&minDuration&service=${getSelectedService()}&start=${\n                    Date.now() - selectedTimeFrame\n                  }000`\n                )}\n                target=\"blank\"\n                onClick={trackViewAllTraces}\n              >\n                View all traces\n              </a>\n            </p>\n          </Col>\n          <Col span={8} className=\"timeframe-selector\">\n            <SearchableSelect\n              value={selectedTimeFrame}\n              onChange={handleTimeFrameChange}\n              placeholder=\"Select A Timeframe\"\n              className=\"select-a-timeframe-input\"\n              disabled={metrics.operationMetricsLoading}\n              loading={metrics.operationMetricsLoading}\n            >\n              {timeFrameOptions.map(option => (\n                <Option key={option.value} value={option.value}>\n                  {option.label}\n                </Option>\n              ))}\n            </SearchableSelect>\n          </Col>\n        </Row>\n        <Row>\n          <Col span={8}>\n            <div ref={graphDivWrapper} />\n            <ServiceGraph\n              key=\"latency\"\n              error={\n                metrics.serviceError.service_latencies_50 &&\n                metrics.serviceError.service_latencies_75 &&\n                metrics.serviceError.service_latencies_95\n              }\n              loading={metrics.loading}\n              name={`Latency (${convertTimeUnitToShortTerm(displayTimeUnit)})`}\n              width={graphWidth}\n              metricsData={serviceLatencies}\n              showLegend\n              marginClassName=\"latency-margins\"\n              showHorizontalLines\n              yAxisTickFormat={timeInMs => yAxisTickFormat(timeInMs, displayTimeUnit)}\n              xDomain={graphXDomain}\n            />\n          </Col>\n          <Col span={8}>\n            <ServiceGraph\n              key=\"errRate\"\n              error={metrics.serviceError.service_error_rate}\n              loading={metrics.loading}\n              name=\"Error rate (%)\"\n              width={graphWidth}\n              metricsData={convertServiceErrorRateToPercentages(serviceErrorRate)}\n              marginClassName=\"error-rate-margins\"\n              color=\"#CD513A\"\n              yDomain={[0, 100]}\n              xDomain={graphXDomain}\n            />\n          </Col>\n          <Col span={8}>\n            <ServiceGraph\n              key=\"requests\"\n              loading={metrics.loading}\n              error={metrics.serviceError.service_call_rate}\n              name=\"Request rate (req/s)\"\n              width={graphWidth}\n              metricsData={metrics.serviceMetrics ? metrics.serviceMetrics.service_call_rate : null}\n              showHorizontalLines\n              color=\"#4795BA\"\n              marginClassName=\"request-margins\"\n              xDomain={graphXDomain}\n            />\n          </Col>\n        </Row>\n        <Row className=\"operation-table-block\">\n          <Col span={16}>\n            <h2 className=\"table-header\">Operations metrics under {getSelectedService()}</h2>{' '}\n            <span className=\"over-the-last\">Over the {getLoopbackInterval(selectedTimeFrame)}</span>\n          </Col>\n          <Col span={8} className=\"select-operation-column\">\n            <Search\n              placeholder=\"Search operation\"\n              className=\"select-operation-input\"\n              value={searchOps}\n              disabled={metrics.operationMetricsLoading === true || metrics.serviceOpsMetrics === undefined}\n              onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\n                const filteredData = metrics.serviceOpsMetrics!.filter(({ name }: { name: string }) => {\n                  return name.toLowerCase().includes(e.target.value.toLowerCase());\n                });\n\n                setSearchOps(e.target.value);\n                setServiceOpsMetrics(filteredData);\n\n                trackSearchOperationDebounced(e.target.value);\n              }}\n            />\n          </Col>\n        </Row>\n        <Row>\n          <OperationTableDetails\n            loading={metrics.operationMetricsLoading}\n            error={metrics.opsError}\n            data={serviceOpsMetrics === undefined ? metrics.serviceOpsMetrics : serviceOpsMetrics}\n            endTime={endTime}\n            lookback={selectedTimeFrame}\n            serviceName={getSelectedService()}\n          />\n        </Row>\n      </div>\n    </>\n  );\n}\n\nexport function mapStateToProps(state: ReduxState): TReduxProps {\n  const { metrics } = state;\n  return {\n    metrics,\n  };\n}\n\nexport function mapDispatchToProps(dispatch: Dispatch<ReduxState>): TDispatchProps {\n  const { fetchAllServiceMetrics, fetchAggregatedServiceMetrics } = bindActionCreators(\n    jaegerApiActions,\n    dispatch\n  );\n\n  return {\n    fetchAllServiceMetrics: fetchAllServiceMetrics as unknown as TDispatchProps['fetchAllServiceMetrics'],\n    fetchAggregatedServiceMetrics:\n      fetchAggregatedServiceMetrics as unknown as TDispatchProps['fetchAggregatedServiceMetrics'],\n  };\n}\n\nexport default withRouteProps(connect(mapStateToProps, mapDispatchToProps)(MonitorATMServicesViewImpl));\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/Monitor/ServicesView/operationDetailsTable/index.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/Monitor/ServicesView/operationDetailsTable/index.track.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/Monitor/ServicesView/operationDetailsTable/index.track.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/Monitor/ServicesView/operationDetailsTable/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/Monitor/ServicesView/operationDetailsTable/opsGraph.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/Monitor/ServicesView/operationDetailsTable/opsGraph.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/Monitor/ServicesView/serviceGraph.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/Monitor/ServicesView/serviceGraph.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/Monitor/index.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/Monitor/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/Monitor/url.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/Monitor/url.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/QualityMetrics/BannerText.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/QualityMetrics/BannerText.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/QualityMetrics/CountCard.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/QualityMetrics/CountCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/QualityMetrics/Header.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/QualityMetrics/Header.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/QualityMetrics/MetricCard.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/QualityMetrics/MetricCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/QualityMetrics/ScoreCard.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/QualityMetrics/ScoreCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/QualityMetrics/index.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/QualityMetrics/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/QualityMetrics/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/QualityMetrics/url.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/QualityMetrics/url.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/SearchTracePage/FileLoader.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/SearchTracePage/FileLoader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/SearchTracePage/SearchForm.markers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/SearchTracePage/SearchForm.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/SearchTracePage/SearchForm.track.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/SearchTracePage/SearchForm.track.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/SearchTracePage/SearchForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useEffect' is defined but never used.","line":4,"column":49,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":58},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":81,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":81,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2811,2814],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2811,2814],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_' is defined but never used.","line":808,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":808,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_' is defined but never used.","line":820,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":820,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'PropsFromRedux' is defined but never used.","line":864,"column":6,"nodeType":null,"messageId":"unusedVar","endLine":864,"endColumn":20}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2017 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React, { useState, useCallback, useMemo, useEffect } from 'react';\nimport { Input, Button, Popover, Select, Row, Col, Form, Switch } from 'antd';\nimport _get from 'lodash/get';\nimport logfmtParser from 'logfmt/lib/logfmt_parser';\nimport { stringify as logfmtStringify } from 'logfmt/lib/stringify';\nimport dayjs from 'dayjs';\nimport memoizeOne from 'memoize-one';\nimport queryString from 'query-string';\nimport { IoHelp } from 'react-icons/io5';\nimport { connect, ConnectedProps } from 'react-redux';\nimport { bindActionCreators, Dispatch } from 'redux';\nimport store from 'store';\n\nimport * as markers from './SearchForm.markers';\nimport { trackFormInput } from './SearchForm.track';\nimport * as jaegerApiActions from '../../actions/jaeger-api';\nimport { formatDate, formatTime } from '../../utils/date';\nimport { DEFAULT_OPERATION, DEFAULT_LIMIT, DEFAULT_LOOKBACK } from '../../constants/search-form';\nimport { getConfigValue } from '../../utils/config/get-config';\nimport SearchableSelect from '../common/SearchableSelect';\nimport './SearchForm.css';\nimport ValidatedFormField from '../../utils/ValidatedFormField';\nimport LoadingIndicator from '../common/LoadingIndicator';\nimport { useConfig } from '../../hooks/useConfig';\nimport { useServices, useSpanNames } from '../../hooks/useTraceDiscovery';\nimport { ReduxState } from '../../types';\nimport { SearchQuery } from '../../types/search';\nimport { fetchedState } from '../../constants';\n\nconst FormItem = Form.Item;\nconst Option = Select.Option;\n\nconst ADJUST_TIME_ENABLED_KEY = 'jaeger-ui/search-adjust-time-enabled';\n\ninterface TimeStampParams {\n  startDate: string;\n  startDateTime: string;\n  endDate: string;\n  endDateTime: string;\n}\n\ninterface TimeStampResult {\n  start: string;\n  end: string;\n}\n\nexport function getUnixTimeStampInMSFromForm({\n  startDate,\n  startDateTime,\n  endDate,\n  endDateTime,\n}: TimeStampParams): TimeStampResult {\n  const start = `${startDate} ${startDateTime}`;\n  const end = `${endDate} ${endDateTime}`;\n  return {\n    start: `${dayjs(start, 'YYYY-MM-DD HH:mm').valueOf()}000`,\n    end: `${dayjs(end, 'YYYY-MM-DD HH:mm').valueOf()}000`,\n  };\n}\n\nexport function convTagsLogfmt(tags: string | null | undefined): string | null {\n  if (!tags) {\n    return null;\n  }\n  const data = logfmtParser.parse(tags);\n  Object.keys(data).forEach(key => {\n    const value = data[key];\n    // make sure all values are strings\n    // https://github.com/jaegertracing/jaeger/issues/550#issuecomment-352850811\n    if (typeof value !== 'string') {\n      data[key] = String(value);\n    }\n  });\n  return JSON.stringify(data);\n}\n\nexport function lookbackToTimestamp(lookback: string, from: Date | number): number {\n  const unit = lookback.substr(-1) as any; // dayjs ManipulateType\n  return dayjs(from).subtract(parseInt(lookback, 10), unit).valueOf() * 1000;\n}\n\ninterface ILookbackOption {\n  label: string;\n  value: string;\n}\n\nconst lookbackOptions: ILookbackOption[] = [\n  {\n    label: '5 Minutes',\n    value: '5m',\n  },\n  {\n    label: '15 Minutes',\n    value: '15m',\n  },\n  {\n    label: '30 Minutes',\n    value: '30m',\n  },\n  {\n    label: 'Hour',\n    value: '1h',\n  },\n  {\n    label: '2 Hours',\n    value: '2h',\n  },\n  {\n    label: '3 Hours',\n    value: '3h',\n  },\n  {\n    label: '6 Hours',\n    value: '6h',\n  },\n  {\n    label: '12 Hours',\n    value: '12h',\n  },\n  {\n    label: '24 Hours',\n    value: '24h',\n  },\n  {\n    label: '2 Days',\n    value: '2d',\n  },\n  {\n    label: '3 Days',\n    value: '3d',\n  },\n  {\n    label: '5 Days',\n    value: '5d',\n  },\n  {\n    label: '7 Days',\n    value: '7d',\n  },\n  {\n    label: '2 Weeks',\n    value: '2w',\n  },\n  {\n    label: '3 Weeks',\n    value: '3w',\n  },\n  {\n    label: '4 Weeks',\n    value: '4w',\n  },\n];\n\nexport const optionsWithinMaxLookback = memoizeOne((maxLookback: ILookbackOption) => {\n  const now = new Date();\n  const minTimestamp = lookbackToTimestamp(maxLookback.value, now);\n  const lookbackToTimestampMap = new Map<string, number>();\n  const options = lookbackOptions.filter(({ value }) => {\n    const lookbackTimestamp = lookbackToTimestamp(value, now);\n    lookbackToTimestampMap.set(value, lookbackTimestamp);\n    return lookbackTimestamp >= minTimestamp;\n  });\n  const lastInRangeIndex = options.length - 1;\n  const lastInRangeOption = options[lastInRangeIndex];\n  if (lastInRangeOption.label !== maxLookback.label) {\n    if (lookbackToTimestampMap.get(lastInRangeOption.value) !== minTimestamp) {\n      options.push(maxLookback);\n    } else {\n      options.splice(lastInRangeIndex, 1, maxLookback);\n    }\n  }\n  return options.map(({ label, value }) => (\n    <Option key={value} value={value}>\n      {`Last ${label}`}\n    </Option>\n  ));\n});\n\nexport function traceIDsToQuery(traceIDs: string | null | undefined): string[] | null {\n  if (!traceIDs) {\n    return null;\n  }\n  return traceIDs.split(',');\n}\n\nexport const placeholderDurationFields = 'e.g. 1.2s, 100ms, 500us';\n\ninterface ValidationError {\n  content: string;\n  title: string;\n}\n\nexport function validateDurationFields(value: string | null | undefined): ValidationError | undefined {\n  if (!value) return undefined;\n  return /\\d[\\d.]*( us|ms|s|m|h)$/.test(value)\n    ? undefined\n    : {\n        content: `Please enter a number followed by a duration unit, ${placeholderDurationFields}`,\n        title: 'Please match the requested format.',\n      };\n}\n\ninterface QueryParams {\n  start?: string;\n  end?: string;\n}\n\ninterface FormDates {\n  queryStartDate?: string;\n  queryStartDateTime?: string;\n  queryEndDate?: string;\n  queryEndDateTime?: string;\n}\n\nexport function convertQueryParamsToFormDates({ start, end }: QueryParams): FormDates {\n  let queryStartDate: string | undefined;\n  let queryStartDateTime: string | undefined;\n  let queryEndDate: string | undefined;\n  let queryEndDateTime: string | undefined;\n  if (end) {\n    const endUnixNs = parseInt(end, 10);\n    queryEndDate = formatDate(endUnixNs);\n    queryEndDateTime = formatTime(endUnixNs);\n  }\n  if (start) {\n    const startUnixNs = parseInt(start, 10);\n    queryStartDate = formatDate(startUnixNs);\n    queryStartDateTime = formatTime(startUnixNs);\n  }\n\n  return {\n    queryStartDate,\n    queryStartDateTime,\n    queryEndDate,\n    queryEndDateTime,\n  };\n}\n\n// Applies time adjustment to shift end time back by the specified duration\n// This helps avoid incomplete traces that may still be receiving spans\nexport function applyAdjustTime(endTimestamp: number, adjustTime: string | null | undefined): number {\n  if (!adjustTime) {\n    return endTimestamp;\n  }\n  const adjustedEnd = lookbackToTimestamp(adjustTime, endTimestamp / 1000);\n  return adjustedEnd;\n}\n\ninterface ISearchFormFields {\n  resultsLimit: string;\n  service: string;\n  startDate: string;\n  startDateTime: string;\n  endDate: string;\n  endDateTime: string;\n  operation: string;\n  tags?: string;\n  minDuration?: string;\n  maxDuration?: string;\n  lookback: string;\n}\n\ntype SearchTracesFunction = typeof jaegerApiActions.searchTraces;\n\nexport function submitForm(\n  fields: ISearchFormFields,\n  searchTraces: SearchTracesFunction,\n  adjustTime: string | null | undefined,\n  adjustTimeEnabled: boolean\n): void {\n  const {\n    resultsLimit,\n    service,\n    startDate,\n    startDateTime,\n    endDate,\n    endDateTime,\n    operation,\n    tags,\n    minDuration,\n    maxDuration,\n    lookback,\n  } = fields;\n  // Note: traceID is ignored when the form is submitted\n  store.set('lastSearch', { service, operation });\n\n  let start: string | number;\n  let end: number;\n  if (lookback !== 'custom') {\n    const now = new Date();\n    start = String(lookbackToTimestamp(lookback, now));\n    end = now.valueOf() * 1000;\n  } else {\n    const times = getUnixTimeStampInMSFromForm({\n      startDate,\n      startDateTime,\n      endDate,\n      endDateTime,\n    });\n    start = times.start;\n    end = parseInt(times.end, 10);\n  }\n\n  // Apply time adjustment to exclude very recent traces that may be incomplete\n  if (adjustTimeEnabled) {\n    end = applyAdjustTime(end, adjustTime);\n  }\n\n  trackFormInput(resultsLimit, operation, tags || '', minDuration, maxDuration, lookback, service);\n\n  searchTraces({\n    service,\n    operation: operation !== DEFAULT_OPERATION ? operation : undefined,\n    limit: resultsLimit,\n    lookback,\n    start: String(start),\n    end: String(end),\n    tags: convTagsLogfmt(tags) || undefined,\n    minDuration: minDuration || null,\n    maxDuration: maxDuration || null,\n  } as SearchQuery);\n}\n\ninterface ISearchFormImplProps {\n  invalid?: boolean;\n  submitting?: boolean;\n  searchMaxLookback?: ILookbackOption;\n  searchAdjustEndTime?: string;\n  initialValues?: Partial<ISearchFormFields> & { traceIDs?: string | null };\n  searchTraces: SearchTracesFunction;\n  submitFormHandler: (\n    fields: ISearchFormFields,\n    adjustEndTime: string | null | undefined,\n    adjustTimeEnabled: boolean\n  ) => void;\n}\n\nexport const SearchFormImpl: React.FC<ISearchFormImplProps> = ({\n  invalid = false,\n  submitting = false,\n  searchMaxLookback,\n  searchAdjustEndTime,\n  initialValues,\n  submitFormHandler,\n}) => {\n  const { useOpenTelemetryTerms: useOtelTerms } = useConfig();\n  const [formData, setFormData] = useState<Partial<ISearchFormFields>>(() => ({\n    service: initialValues?.service,\n    operation: initialValues?.operation,\n    tags: initialValues?.tags,\n    lookback: initialValues?.lookback,\n    startDate: initialValues?.startDate,\n    startDateTime: initialValues?.startDateTime,\n    endDate: initialValues?.endDate,\n    endDateTime: initialValues?.endDateTime,\n    minDuration: initialValues?.minDuration,\n    maxDuration: initialValues?.maxDuration,\n    resultsLimit: initialValues?.resultsLimit,\n  }));\n\n  // Fetch services using React Query\n  const { data: services = [], isLoading: isLoadingServices, error: servicesError } = useServices();\n\n  // Fetch span names for the currently selected service\n  const currentService = formData.service;\n  const {\n    data: spanNamesData,\n    isLoading: isLoadingSpanNames,\n    error: spanNamesError,\n  } = useSpanNames(currentService && currentService !== '-' ? currentService : null);\n\n  // Extract unique operation names from span data\n  // API returns { name, spanKind }[] where the same name can appear with different spanKinds\n  // We deduplicate to show only unique names in the operations dropdown\n  const spanNames = useMemo(\n    () => Array.from(new Set((spanNamesData || []).map(op => op.name))).sort(),\n    [spanNamesData]\n  );\n\n  const [adjustTimeEnabled, setAdjustTimeEnabled] = useState<boolean>(() => {\n    const storedAdjustTimeEnabled = store.get(ADJUST_TIME_ENABLED_KEY);\n    return storedAdjustTimeEnabled !== undefined ? storedAdjustTimeEnabled : Boolean(searchAdjustEndTime);\n  });\n\n  const handleChange = useCallback((fieldData: Partial<ISearchFormFields>) => {\n    setFormData(prev => {\n      const nextFormData = { ...prev, ...fieldData };\n      if (fieldData.service) {\n        nextFormData.operation = DEFAULT_OPERATION;\n      }\n      return nextFormData;\n    });\n  }, []);\n\n  const handleAdjustTimeToggle = useCallback((checked: boolean) => {\n    setAdjustTimeEnabled(checked);\n    store.set(ADJUST_TIME_ENABLED_KEY, checked);\n  }, []);\n\n  const handleSubmit = useCallback(\n    (e: React.FormEvent<HTMLFormElement>) => {\n      e.preventDefault();\n      submitFormHandler(formData as ISearchFormFields, searchAdjustEndTime, adjustTimeEnabled);\n    },\n    [formData, searchAdjustEndTime, adjustTimeEnabled, submitFormHandler]\n  );\n\n  const { service: selectedService, lookback: selectedLookback } = formData;\n  const noSelectedService = selectedService === '-' || !selectedService;\n  const tz = selectedLookback === 'custom' ? new Date().toTimeString().replace(/^.*?GMT/, 'UTC') : null;\n  const invalidDuration =\n    validateDurationFields(formData.minDuration) || validateDurationFields(formData.maxDuration);\n\n  if (isLoadingServices && services.length === 0 && !servicesError) {\n    return <LoadingIndicator />;\n  }\n\n  return (\n    <Form layout=\"vertical\" onSubmitCapture={handleSubmit}>\n      <FormItem\n        label={\n          <span>\n            Service <span className=\"SearchForm--labelCount\">({services.length})</span>\n          </span>\n        }\n        validateStatus={servicesError ? 'error' : undefined}\n        help={servicesError ? `Error loading services: ${(servicesError as Error).message}` : undefined}\n      >\n        <SearchableSelect\n          data-testid=\"service\"\n          value={formData.service}\n          placeholder=\"Select A Service\"\n          disabled={submitting}\n          loading={isLoadingServices}\n          onChange={(value: string) => handleChange({ service: value })}\n        >\n          {services.map(serviceName => (\n            <Option key={serviceName} value={serviceName}>\n              {serviceName}\n            </Option>\n          ))}\n        </SearchableSelect>\n      </FormItem>\n      <FormItem\n        label={\n          <span>\n            {useOtelTerms ? 'Span Name' : 'Operation'}{' '}\n            <span className=\"SearchForm--labelCount\">({spanNames.length})</span>\n          </span>\n        }\n        validateStatus={spanNamesError ? 'error' : undefined}\n        help={spanNamesError ? `Error loading operations: ${(spanNamesError as Error).message}` : undefined}\n      >\n        <SearchableSelect\n          data-testid=\"operation\"\n          value={formData.operation}\n          disabled={submitting || noSelectedService}\n          loading={isLoadingSpanNames}\n          placeholder={useOtelTerms ? 'Select A Span Name' : 'Select An Operation'}\n          onChange={(value: string) => handleChange({ operation: value })}\n        >\n          {['all'].concat(spanNames).map(op => (\n            <Option key={op} value={op}>\n              {op}\n            </Option>\n          ))}\n        </SearchableSelect>\n      </FormItem>\n\n      <FormItem\n        label={\n          <div>\n            {useOtelTerms ? 'Attributes' : 'Tags'}{' '}\n            <Popover\n              placement=\"topLeft\"\n              trigger=\"click\"\n              title={\n                <h3 key=\"title\" className=\"SearchForm--tagsHintTitle\">\n                  Values should be in the{' '}\n                  <a href=\"https://brandur.org/logfmt\" rel=\"noopener noreferrer\" target=\"_blank\">\n                    logfmt\n                  </a>{' '}\n                  format.\n                </h3>\n              }\n              content={\n                <div>\n                  <ul key=\"info\" className=\"SearchForm--tagsHintInfo\">\n                    <li>Use space for AND conjunctions.</li>\n                    <li>\n                      Values containing whitespace or equal-sign &apos;=&apos; should be enclosed in quotes.\n                    </li>\n                    <li>\n                      Elasticsearch/OpenSearch storage supports regex query, therefore{' '}\n                      <a\n                        href=\"https://lucene.apache.org/core/9_0_0/core/org/apache/lucene/util/automaton/RegExp.html\"\n                        rel=\"noopener noreferrer\"\n                        target=\"_blank\"\n                      >\n                        reserved characters\n                      </a>{' '}\n                      need to be escaped for exact match queries.\n                    </li>\n                  </ul>\n                  <p>Examples:</p>\n                  <ul className=\"SearchForm--tagsHintInfo\">\n                    <li>\n                      <code className=\"SearchForm--tagsHintEg\">error=true</code>\n                    </li>\n                    <li>\n                      <code className=\"SearchForm--tagsHintEg\">\n                        db.statement=&quot;select * from User&quot;\n                      </code>\n                    </li>\n                    <li>\n                      <code className=\"SearchForm--tagsHintEg\">\n                        http.url=&quot;http://0.0.0.0:8081/customer\\\\?customer=123&quot;\n                      </code>\n                      <div>\n                        Note: when using Elasticsearch/OpenSearch the{' '}\n                        <a\n                          href=\"https://lucene.apache.org/core/9_0_0/core/org/apache/lucene/util/automaton/RegExp.html\"\n                          rel=\"noopener noreferrer\"\n                          target=\"_blank\"\n                        >\n                          regex-reserved\n                        </a>{' '}\n                        character <code className=\"SearchForm--tagsHintEg\">&quot;?&quot;</code> must be\n                        escaped with <code className=\"SearchForm--tagsHintEg\">&quot;\\\\&quot;</code>.\n                      </div>\n                    </li>\n                  </ul>\n                </div>\n              }\n            >\n              <IoHelp className=\"SearchForm--hintTrigger\" />\n            </Popover>\n          </div>\n        }\n      >\n        <Input\n          name=\"tags\"\n          value={formData.tags}\n          disabled={submitting}\n          placeholder=\"http.status_code=200 error=true\"\n          onChange={e => handleChange({ tags: e.target.value })}\n          allowClear\n        />\n      </FormItem>\n\n      <div className=\"SearchForm--lookbackRow\">\n        <span className=\"SearchForm--lookbackLabel\">Lookback</span>\n        {searchAdjustEndTime && (\n          <div className=\"SearchForm--adjustTime\">\n            <span className=\"SearchForm--adjustTimeLabel\">Adjusted -{searchAdjustEndTime}</span>\n            <Switch\n              size=\"small\"\n              checked={adjustTimeEnabled}\n              onChange={handleAdjustTimeToggle}\n              disabled={submitting}\n            />\n            <Popover\n              placement=\"topLeft\"\n              trigger=\"click\"\n              content={\n                <div className=\"SearchForm--lookbackHint\">\n                  When enabled, search end time is adjusted back by {searchAdjustEndTime} to exclude very\n                  recent traces that may still be receiving spans.\n                </div>\n              }\n            >\n              <IoHelp className=\"SearchForm--hintTrigger\" />\n            </Popover>\n          </div>\n        )}\n      </div>\n      <FormItem>\n        <SearchableSelect\n          data-testid=\"lookback\"\n          value={formData.lookback}\n          disabled={submitting}\n          defaultValue={DEFAULT_LOOKBACK}\n          onChange={(value: string) => handleChange({ lookback: value })}\n        >\n          {searchMaxLookback && optionsWithinMaxLookback(searchMaxLookback)}\n          <Option value=\"custom\">Custom Time Range</Option>\n        </SearchableSelect>\n      </FormItem>\n\n      {selectedLookback === 'custom' && [\n        <FormItem\n          key=\"start\"\n          label={\n            <div>\n              Start Time{' '}\n              <Popover\n                placement=\"topLeft\"\n                trigger=\"click\"\n                content={\n                  <h3 key=\"title\" className=\"SearchForm--tagsHintTitle\">\n                    Times are expressed in {tz}\n                  </h3>\n                }\n              >\n                <IoHelp className=\"SearchForm--hintTrigger\" />\n              </Popover>\n            </div>\n          }\n        >\n          <Row gutter={16}>\n            <Col className=\"gutter-row\" span={14}>\n              <Input\n                name=\"startDate\"\n                value={formData.startDate}\n                disabled={submitting}\n                type=\"date\"\n                placeholder=\"Start Date\"\n                onChange={e => handleChange({ startDate: e.target.value })}\n              />\n            </Col>\n\n            <Col className=\"gutter-row\" span={10}>\n              <Input\n                name=\"startDateTime\"\n                value={formData.startDateTime}\n                disabled={submitting}\n                type=\"time\"\n                onChange={e => handleChange({ startDateTime: e.target.value })}\n              />\n            </Col>\n          </Row>\n        </FormItem>,\n\n        <FormItem\n          key=\"end\"\n          label={\n            <div>\n              End Time{' '}\n              <Popover\n                placement=\"topLeft\"\n                trigger=\"click\"\n                content={\n                  <h3 key=\"title\" className=\"SearchForm--tagsHintTitle\">\n                    Times are expressed in {tz}\n                  </h3>\n                }\n              >\n                <IoHelp className=\"SearchForm--hintTrigger\" />\n              </Popover>\n            </div>\n          }\n        >\n          <Row gutter={16}>\n            <Col className=\"gutter-row\" span={14}>\n              <Input\n                name=\"endDate\"\n                value={formData.endDate}\n                disabled={submitting}\n                type=\"date\"\n                placeholder=\"End Date\"\n                onChange={e => handleChange({ endDate: e.target.value })}\n              />\n            </Col>\n\n            <Col className=\"gutter-row\" span={10}>\n              <Input\n                name=\"endDateTime\"\n                value={formData.endDateTime}\n                disabled={submitting}\n                type=\"time\"\n                onChange={e => handleChange({ endDateTime: e.target.value })}\n              />\n            </Col>\n          </Row>\n        </FormItem>,\n      ]}\n\n      <Row gutter={16}>\n        <Col className=\"gutter-row\" span={12}>\n          <FormItem label=\"Max Duration\">\n            <ValidatedFormField\n              name=\"maxDuration\"\n              value={formData.maxDuration}\n              disabled={submitting}\n              validate={validateDurationFields}\n              placeholder={placeholderDurationFields}\n              onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\n                handleChange({ maxDuration: e.target.value })\n              }\n            />\n          </FormItem>\n        </Col>\n\n        <Col className=\"gutter-row\" span={12}>\n          <FormItem label=\"Min Duration\">\n            <ValidatedFormField\n              name=\"minDuration\"\n              value={formData.minDuration}\n              disabled={submitting}\n              validate={validateDurationFields}\n              placeholder={placeholderDurationFields}\n              onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\n                handleChange({ minDuration: e.target.value })\n              }\n            />\n          </FormItem>\n        </Col>\n      </Row>\n\n      <FormItem label=\"Limit Results\">\n        <Input\n          name=\"resultsLimit\"\n          value={formData.resultsLimit}\n          disabled={submitting}\n          placeholder=\"Limit Results\"\n          type=\"number\"\n          min={1}\n          max={getConfigValue('search.maxLimit')}\n          onChange={e => handleChange({ resultsLimit: e.target.value })}\n        />\n      </FormItem>\n\n      <Button\n        htmlType=\"submit\"\n        className=\"SearchForm--submit\"\n        disabled={submitting || noSelectedService || invalid || invalidDuration !== undefined}\n        data-test={markers.SUBMIT_BTN}\n      >\n        Find Traces\n      </Button>\n    </Form>\n  );\n};\n\nexport function mapStateToProps(state: ReduxState) {\n  const {\n    service,\n    limit,\n    start,\n    end,\n    operation,\n    tag: tagParams,\n    tags: logfmtTags,\n    maxDuration,\n    minDuration,\n    lookback,\n    traceID: traceIDParams,\n  } = queryString.parse(state.router.location.search);\n\n  const nowInMicroseconds = dayjs().valueOf() * 1000;\n  const today = formatDate(nowInMicroseconds);\n  const currentTime = formatTime(nowInMicroseconds);\n  const lastSearch = store.get('lastSearch') as { service?: string; operation?: string } | undefined;\n  let lastSearchService: string | undefined;\n  let lastSearchOperation: string | undefined;\n\n  if (lastSearch) {\n    const { operation: lastOp, service: lastSvc } = lastSearch;\n    if (lastSvc && lastSvc !== '-') {\n      lastSearchService = lastSvc;\n      if (lastOp && lastOp !== '-') {\n        lastSearchOperation = lastOp;\n      }\n    }\n  }\n\n  const { queryStartDate, queryStartDateTime, queryEndDate, queryEndDateTime } =\n    convertQueryParamsToFormDates({\n      start: start as string | undefined,\n      end: end as string | undefined,\n    });\n\n  let tags: string | undefined;\n  // continue to parse tagParams to remain backward compatible with older URLs\n  // but, parse to logfmt format instead of the former \"key:value|k2:v2\"\n  if (tagParams) {\n    function convFormerTag(accum: Record<string, string>, value: string): boolean {\n      const parts = value.split(':', 2);\n      const key = parts[0];\n      if (key) {\n        accum[key] = parts[1] == null ? '' : parts[1];\n        return true;\n      }\n      return false;\n    }\n\n    let data: Record<string, string> | null = null;\n    if (Array.isArray(tagParams)) {\n      data = tagParams\n        .filter((str): str is string => !!str) // skip null, undefined, empty strings\n        .reduce(\n          (accum, str) => {\n            convFormerTag(accum, str);\n            return accum;\n          },\n          {} as Record<string, string>\n        );\n    } else if (typeof tagParams === 'string') {\n      const target: Record<string, string> = {};\n      data = convFormerTag(target, tagParams) ? target : null;\n    }\n    if (data) {\n      try {\n        tags = logfmtStringify(data);\n      } catch (_) {\n        tags = 'Parse Error';\n      }\n    } else {\n      tags = 'Parse Error';\n    }\n  }\n  if (logfmtTags) {\n    let data: Record<string, unknown>;\n    try {\n      data = JSON.parse(logfmtTags as string);\n      tags = logfmtStringify(data);\n    } catch (_) {\n      tags = 'Parse Error';\n    }\n  }\n  let traceIDs: string | undefined;\n  if (traceIDParams) {\n    traceIDs = traceIDParams instanceof Array ? traceIDParams.join(',') : (traceIDParams as string);\n  }\n\n  return {\n    destroyOnUnmount: false,\n    initialValues: {\n      service: (service as string | undefined) || lastSearchService || '-',\n      resultsLimit: (limit as string | undefined) || String(DEFAULT_LIMIT),\n      lookback: (lookback as string | undefined) || DEFAULT_LOOKBACK,\n      startDate: queryStartDate || today,\n      startDateTime: queryStartDateTime || '00:00',\n      endDate: queryEndDate || today,\n      endDateTime: queryEndDateTime || currentTime,\n      operation: (operation as string | undefined) || lastSearchOperation || DEFAULT_OPERATION,\n      tags,\n      minDuration: (minDuration as string | undefined) || undefined,\n      maxDuration: (maxDuration as string | undefined) || undefined,\n      traceIDs: traceIDs || null,\n    },\n    searchMaxLookback: _get(state, 'config.search.maxLookback'),\n    searchAdjustEndTime: _get(state, 'config.search.adjustEndTime'),\n    submitting: state.trace?.search?.state === fetchedState.LOADING,\n  };\n}\n\nexport function mapDispatchToProps(dispatch: Dispatch) {\n  const { searchTraces } = bindActionCreators(jaegerApiActions, dispatch);\n  return {\n    searchTraces,\n    submitFormHandler: (\n      fields: ISearchFormFields,\n      adjustEndTime: string | null | undefined,\n      adjustTimeEnabled: boolean\n    ) => submitForm(fields, searchTraces, adjustEndTime || null, adjustTimeEnabled),\n  };\n}\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\ntype PropsFromRedux = ConnectedProps<typeof connector>;\n\nexport default connector(SearchFormImpl);\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/SearchTracePage/SearchResults/AltViewOptions.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/SearchTracePage/SearchResults/AltViewOptions.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/SearchTracePage/SearchResults/DiffSelection.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/SearchTracePage/SearchResults/DiffSelection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/SearchTracePage/SearchResults/DownloadResults.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/SearchTracePage/SearchResults/DownloadResults.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/SearchTracePage/SearchResults/ResultItem.markers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/SearchTracePage/SearchResults/ResultItem.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/SearchTracePage/SearchResults/ResultItem.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/SearchTracePage/SearchResults/ResultItemTitle.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/SearchTracePage/SearchResults/ResultItemTitle.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/SearchTracePage/SearchResults/ScatterPlot.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/SearchTracePage/SearchResults/ScatterPlot.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":38,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[765,768],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[765,768],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useLayoutEffect has a missing dependency: 'calculateContainerWidth'. Either include it or remove the dependency array. If 'calculateContainerWidth' changes too often, find the parent component that defines it and wrap that definition in useCallback.","line":110,"column":6,"nodeType":"ArrayExpression","endLine":110,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [calculateContainerWidth]","fix":{"range":[2619,2621],"text":"[calculateContainerWidth]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2017 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React, { useRef, useState, useLayoutEffect } from 'react';\nimport dayjs from 'dayjs';\nimport {\n  ScatterChart,\n  Scatter,\n  XAxis,\n  YAxis,\n  Tooltip,\n  ResponsiveContainer,\n  ZAxis,\n  Label,\n  Dot,\n} from 'recharts';\n\nimport { FALLBACK_TRACE_NAME } from '../../../constants';\nimport { ONE_MILLISECOND, formatDuration } from '../../../utils/date';\n\nimport './ScatterPlot.css';\n\nexport type TScatterPlotPoint = {\n  x: number;\n  y: number;\n  traceID: string;\n  size: number;\n  name?: string;\n  services?: ReadonlyArray<{\n    name: string;\n    numberOfSpans: number;\n  }>;\n  color?: string;\n};\n\ntype TScatterPlotProps = {\n  data: TScatterPlotPoint[];\n  onValueClick: (value: any) => void;\n  // JSDOM does not, as of 2023, have a layout engine,\n  // so allow tests to supply a mock width as a workaround\n  calculateContainerWidth?: (container: HTMLElement) => number;\n};\n\nexport const CustomTooltip = ({\n  active,\n  payload,\n}: {\n  active?: boolean;\n  payload?: { payload: TScatterPlotPoint }[];\n}) => {\n  if (active && payload && payload.length) {\n    const data = payload[0].payload;\n    const numServices = data.services ? data.services.length : 0;\n\n    return (\n      <div className=\"scatter-plot-hint\">\n        <h4>{data.name || FALLBACK_TRACE_NAME}</h4>\n        <div className=\"scatter-plot-hint-stats\">\n          <div>\n            <strong>Spans:</strong> {data.size}\n          </div>\n          <div>\n            <strong>Services:</strong> {numServices}\n          </div>\n        </div>\n      </div>\n    );\n  }\n  return null;\n};\n\nexport const RenderDot = ({\n  cx,\n  cy,\n  fill,\n  size,\n}: {\n  cx?: number;\n  cy?: number;\n  fill?: string;\n  size?: number;\n}) => {\n  const maxSize = Math.min(300, size || 0);\n  return (\n    <Dot cx={cx} cy={cy} fill={fill} fillOpacity={0.5} r={maxSize * 0.035} style={{ cursor: 'pointer' }} />\n  );\n};\n\nexport default function ScatterPlot({\n  data,\n  onValueClick,\n  calculateContainerWidth = (container: HTMLElement) => container.clientWidth,\n}: TScatterPlotProps) {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [containerWidth, setContainerWidth] = useState(0);\n\n  useLayoutEffect(() => {\n    function updateContainerWidth() {\n      if (containerRef.current) {\n        setContainerWidth(calculateContainerWidth(containerRef.current));\n      }\n    }\n\n    // Calculate the initial width on first render.\n    updateContainerWidth();\n\n    window.addEventListener('resize', updateContainerWidth);\n\n    return () => window.removeEventListener('resize', updateContainerWidth);\n  }, []);\n\n  const xMin = Math.min(...data.map(d => d.x));\n  const xMax = Math.max(...data.map(d => d.x));\n\n  /*\n  This function generates unique ticks for the x-axis.\n  It ensures that the ticks are unique by checking if the label for a given tick value has already been used.\n  If it has, the tick is not added to the list of ticks.\n  */\n  const generateUniqueTicks = (min: number, max: number, count: number) => {\n    const step = (max - min) / (count - 1);\n    const ticks = [];\n    const seenLabels = new Set();\n\n    for (let i = 0; i < count; i++) {\n      const value = min + step * i;\n      ticks.push(value);\n    }\n\n    return ticks.filter(tick => {\n      const label = dayjs(tick / ONE_MILLISECOND).format('hh:mm:ss a');\n      if (seenLabels.has(label)) {\n        return false;\n      }\n      seenLabels.add(label);\n      return true;\n    });\n  };\n\n  return (\n    <div className=\"TraceResultsScatterPlot\" ref={containerRef} style={{ width: '100%', height: 200 }}>\n      {containerWidth > 0 && (\n        <ResponsiveContainer>\n          <ScatterChart\n            margin={{\n              top: 10,\n              right: 20,\n              left: 10,\n              bottom: 10,\n            }}\n          >\n            <XAxis\n              type=\"number\"\n              dataKey=\"x\"\n              name=\"Time\"\n              domain={[xMin, xMax]}\n              ticks={generateUniqueTicks(xMin, xMax, 10)}\n              tickFormatter={t => dayjs(t / ONE_MILLISECOND).format('hh:mm:ss a')}\n              tick={{ fontSize: 11, dy: 5 }}\n              axisLine={{ stroke: '#e6e6e9', strokeWidth: 2 }}\n              tickLine={{ stroke: '#e6e6e9', strokeWidth: 1 }}\n              allowDecimals={false}\n              interval=\"equidistantPreserveStart\"\n            >\n              <Label\n                value=\"Time\"\n                position=\"insideTopRight\"\n                offset={15}\n                fontSize={11}\n                style={{ textAnchor: 'start' }}\n              />\n            </XAxis>\n            <YAxis\n              type=\"number\"\n              dataKey=\"y\"\n              name=\"Duration\"\n              tickFormatter={t => formatDuration(t)}\n              tick={{ fontSize: 11, dx: -5 }}\n              axisLine={{ stroke: '#e6e6e9', strokeWidth: 2 }}\n              tickLine={{ stroke: '#e6e6e9', strokeWidth: 1 }}\n              tickCount={4}\n              allowDecimals={false}\n              domain={['auto', 'auto']}\n            >\n              <Label\n                value=\"Duration\"\n                position=\"insideTopLeft\"\n                offset={0}\n                fontSize={11}\n                style={{ textAnchor: 'end' }}\n                angle={-90}\n              />\n            </YAxis>\n            <ZAxis dataKey=\"size\" type=\"number\" range={[1, 300]} />\n            <Tooltip content={<CustomTooltip />} cursor={false} isAnimationActive={false} />\n            <Scatter\n              data={data.map(point => {\n                return {\n                  ...point,\n                  fill: point.color,\n                };\n              })}\n              onClick={onValueClick}\n              shape={<RenderDot />}\n            />\n          </ScatterChart>\n        </ResponsiveContainer>\n      )}\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/SearchTracePage/SearchResults/createBlob.test.ts","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":107,"column":5,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":107,"endColumn":82,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[3944,4021],"text":"// @ts-expect-error - access property not in type to verify it's missing at runtime"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2026 The Jaeger Authors.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { createBlob } from './index';\nimport transformTraceData from '../../../model/transform-trace-data';\nimport { TraceData, SpanData, SpanReference } from '../../../types/trace';\n\ndescribe('createBlob regression test', () => {\n  it('successfully serializes a trace with parent-child circular references to a schema-compliant JSON', async () => {\n    // Define types for the serialized data which lacks circular references\n    type SerializedSpanReference = Omit<SpanReference, 'span'>;\n    type SerializedSpanData = Omit<SpanData, 'references'> & { references: SerializedSpanReference[] };\n    type SerializedTraceData = TraceData & { spans: SerializedSpanData[] };\n\n    // 1. Create a raw trace with a parent and a child\n    const rawTrace: SerializedTraceData = {\n      traceID: 'circular-trace-id',\n      processes: {\n        p1: { serviceName: 'service-1', tags: [] },\n      },\n      spans: [\n        {\n          traceID: 'circular-trace-id',\n          spanID: 'parent-span',\n          operationName: 'parent',\n          processID: 'p1',\n          startTime: 1,\n          duration: 1000,\n          tags: [],\n          logs: [],\n          warnings: [],\n          references: [],\n        },\n        {\n          traceID: 'circular-trace-id',\n          spanID: 'child-span-1',\n          operationName: 'child-1',\n          processID: 'p1',\n          startTime: 10,\n          duration: 100,\n          tags: [],\n          logs: [],\n          warnings: [],\n          references: [\n            {\n              refType: 'CHILD_OF',\n              traceID: 'circular-trace-id',\n              spanID: 'parent-span',\n            },\n          ],\n        },\n        {\n          traceID: 'circular-trace-id',\n          spanID: 'child-span-2',\n          operationName: 'child-2',\n          processID: 'p1',\n          startTime: 20,\n          duration: 100,\n          tags: [],\n          logs: [],\n          warnings: [],\n          references: [\n            {\n              refType: 'CHILD_OF',\n              traceID: 'circular-trace-id',\n              spanID: 'parent-span',\n            },\n            {\n              refType: 'FOLLOWS_FROM',\n              traceID: 'circular-trace-id',\n              spanID: 'child-span-1',\n            },\n          ],\n        },\n      ],\n    };\n\n    // 2. Transform it (this introduces circular references like childSpans, references[].span, and subsidiarilyReferencedBy)\n    // We utilize JSON parse/stringify to simulate a fresh object structure similar to what we'd get from API,\n    // ensuring we don't accidentally mutate our expected 'rawTrace' during transformation (though transform mutates inputs, we want rawTrace to stay clean for comparison).\n    const inputTrace = JSON.parse(JSON.stringify(rawTrace));\n    const transformedTrace = transformTraceData(inputTrace);\n    expect(transformedTrace).not.toBeNull();\n\n    // 3. Create the blob (this triggers JSON.stringify with getStripCircular)\n    const blob = createBlob([transformedTrace]);\n\n    // 4. Read the blob content back using FileReader (available in JSDOM)\n    const jsonString = await new Promise<string>((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onload = () => resolve(reader.result as string);\n      reader.onerror = () => reject(reader.error);\n      reader.readAsText(blob);\n    });\n\n    // 5. Verify the output matches TraceData schema\n    // Parse the full object {\"data\": [...]}\n    const parsed: { data: SerializedTraceData[] } = JSON.parse(jsonString);\n    const serializedTrace = parsed.data[0];\n\n    // The expected output should NOT have derived fields like traceName,\n    // duration (at trace level), etc. which are added by transformTraceData.\n    expect(serializedTrace).toEqual(rawTrace);\n\n    // Explicitly verify circular fields are gone\n    expect(serializedTrace.spans[0]).not.toHaveProperty('childSpans');\n    // @ts-ignore - access property not in type to verify it's missing at runtime\n    expect(serializedTrace.spans[1]).not.toHaveProperty('subsidiarilyReferencedBy');\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/SearchTracePage/SearchResults/index.markers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/SearchTracePage/SearchResults/index.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/SearchTracePage/SearchResults/index.track.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/SearchTracePage/SearchResults/index.track.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/SearchTracePage/SearchResults/index.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":50,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":50,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1929,1932],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1929,1932],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":82,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":82,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2876,2879],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2876,2879],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":82,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":82,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2901,2904],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2901,2904],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":121,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":121,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3985,3988],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3985,3988],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":257,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":257,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8522,8525],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8522,8525],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2017 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport * as React from 'react';\nimport { useCallback } from 'react';\nimport { Select } from 'antd';\nimport { Link } from 'react-router-dom';\nimport { Location, useNavigate } from 'react-router-dom-v5-compat';\nimport queryString from 'query-string';\n\nimport AltViewOptions from './AltViewOptions';\nimport DownloadResults from './DownloadResults';\nimport DiffSelection from './DiffSelection';\nimport * as markers from './index.markers';\nimport { EAltViewActions, trackAltView } from './index.track';\nimport ResultItem from './ResultItem';\nimport ScatterPlot from './ScatterPlot';\nimport { getUrl } from '../url';\nimport LoadingIndicator from '../../common/LoadingIndicator';\nimport NewWindowIcon from '../../common/NewWindowIcon';\nimport SearchResultsDDG from '../../DeepDependencies/traces';\nimport { getLocation } from '../../TracePage/url';\nimport * as orderBy from '../../../model/order-by';\nimport { getPercentageOfDuration } from '../../../utils/date';\nimport { stripEmbeddedState } from '../../../utils/embedded-url';\n\nimport { FetchedTrace } from '../../../types';\nimport { SearchQuery } from '../../../types/search';\nimport { IOtelTrace } from '../../../types/otel';\n\nimport './index.css';\nimport { getTargetEmptyOrBlank } from '../../../utils/config/get-target';\nimport withRouteProps from '../../../utils/withRouteProps';\nimport SearchableSelect from '../../common/SearchableSelect';\n\ntype SearchResultsProps = {\n  cohortAddTrace: (traceId: string) => void;\n  cohortRemoveTrace: (traceId: string) => void;\n  diffCohort: FetchedTrace[];\n  disableComparisons: boolean;\n  hideGraph: boolean;\n  loading: boolean;\n  location: Location;\n  maxTraceDuration: number;\n  queryOfResults?: SearchQuery;\n  showStandaloneLink: boolean;\n  skipMessage?: boolean;\n  spanLinks?: Record<string, string> | undefined;\n  traces: IOtelTrace[];\n  rawTraces: any[];\n  sortBy: string;\n  handleSortChange: (sortBy: string) => void;\n};\n\ntype SelectSortProps = {\n  sortBy: string;\n  handleSortChange: (sortBy: string) => void;\n};\n\nconst Option = Select.Option;\n\n/**\n * Contains the dropdown to sort and filter trace search results\n */\nexport function SelectSort({ sortBy, handleSortChange }: SelectSortProps) {\n  return (\n    <label>\n      Sort:{' '}\n      <SearchableSelect value={sortBy} onChange={(value: string) => handleSortChange(value)}>\n        <Option value={orderBy.MOST_RECENT}>Most Recent</Option>\n        <Option value={orderBy.LONGEST_FIRST}>Longest First</Option>\n        <Option value={orderBy.SHORTEST_FIRST}>Shortest First</Option>\n        <Option value={orderBy.MOST_SPANS}>Most Spans</Option>\n        <Option value={orderBy.LEAST_SPANS}>Least Spans</Option>\n      </SearchableSelect>\n    </label>\n  );\n}\n\nconst getStripCircular = () => {\n  const cache = new Set();\n  return function (this: any, key: string, value: any) {\n    if (\n      key === 'childSpans' ||\n      key === 'process' ||\n      key === 'span' ||\n      key === 'subsidiarilyReferencedBy' ||\n      key === '_otelFacade' ||\n      key === 'traceName' ||\n      key === 'tracePageTitle' ||\n      key === 'traceEmoji' ||\n      key === 'services' ||\n      key === 'spanMap' ||\n      key === 'rootSpans' ||\n      key === 'orphanSpanCount' ||\n      key === 'endTime' ||\n      key === 'depth' ||\n      key === 'hasChildren' ||\n      key === 'relativeStartTime'\n    ) {\n      return;\n    }\n    // We need to strip duration and startTime from TraceData but not from SpanData.\n    // The TraceData object can be recognized by the presence of 'processes' field.\n    if ((key === 'duration' || key === 'startTime') && this.processes) {\n      return;\n    }\n\n    if (typeof value === 'object' && value !== null) {\n      if (cache.has(value)) {\n        // Circular reference found, discard key\n        return;\n      }\n      // Store value in our collection\n      cache.add(value);\n    }\n    return value;\n  };\n};\n\nexport function createBlob(rawTraces: any[]) {\n  const stringified = JSON.stringify(rawTraces, getStripCircular());\n  return new Blob([`{\"data\":${stringified}}`], { type: 'application/json' });\n}\n\nexport function UnconnectedSearchResults({\n  diffCohort,\n  disableComparisons,\n  hideGraph,\n  loading,\n  location,\n  maxTraceDuration,\n  queryOfResults,\n  showStandaloneLink,\n  skipMessage = false,\n  spanLinks,\n  traces,\n  rawTraces,\n  sortBy,\n  handleSortChange,\n  cohortAddTrace,\n  cohortRemoveTrace,\n}: SearchResultsProps) {\n  const navigate = useNavigate();\n\n  const toggleComparison = useCallback(\n    (traceID: string, remove?: boolean) => {\n      if (remove) {\n        cohortRemoveTrace(traceID);\n      } else {\n        cohortAddTrace(traceID);\n      }\n    },\n    [cohortAddTrace, cohortRemoveTrace]\n  );\n\n  const goToTrace = useCallback(\n    (traceID: string) => {\n      const searchUrl = queryOfResults ? getUrl(stripEmbeddedState(queryOfResults)) : getUrl();\n      const locationObj = getLocation(traceID, { fromSearch: searchUrl });\n      navigate(locationObj.pathname + (locationObj.search ? `?${locationObj.search}` : ''), {\n        state: locationObj.state,\n      });\n    },\n    [queryOfResults, navigate]\n  );\n\n  const onDdgViewClicked = useCallback(() => {\n    const urlState = queryString.parse(location.search);\n    const view = urlState.view && urlState.view === 'ddg' ? EAltViewActions.Traces : EAltViewActions.Ddg;\n    trackAltView(view);\n    navigate(getUrl({ ...urlState, view }));\n  }, [location, navigate]);\n\n  const onDownloadResultsClicked = useCallback(() => {\n    const file = createBlob(rawTraces);\n    const element = document.createElement('a');\n    element.href = URL.createObjectURL(file);\n    element.download = `traces-${Date.now()}.json`;\n    document.body.appendChild(element);\n    element.click();\n    URL.revokeObjectURL(element.href);\n    element.remove();\n  }, [rawTraces]);\n\n  const traceResultsView = queryString.parse(location.search).view !== 'ddg';\n\n  const diffSelection = !disableComparisons && (\n    <DiffSelection toggleComparison={toggleComparison} traces={diffCohort} />\n  );\n  if (loading) {\n    return (\n      <React.Fragment key=\"loading\">\n        {diffCohort.length > 0 && diffSelection}\n        <LoadingIndicator className=\"u-mt-vast\" centered />\n      </React.Fragment>\n    );\n  }\n  if (!Array.isArray(traces) || !traces.length) {\n    return (\n      <React.Fragment key=\"no-results\">\n        {diffCohort.length > 0 && diffSelection}\n        {!skipMessage && (\n          <div className=\"u-simple-card\" data-test={markers.NO_RESULTS}>\n            No trace results. Try another query.\n          </div>\n        )}\n      </React.Fragment>\n    );\n  }\n  const cohortIds = new Set(diffCohort.map(datum => datum.id));\n  const searchUrl = queryOfResults ? getUrl(stripEmbeddedState(queryOfResults)) : getUrl();\n  return (\n    <div className=\"SearchResults\">\n      <div className=\"SearchResults--header\">\n        {!hideGraph && traceResultsView && (\n          <div className=\"ub-p3 SearchResults--headerScatterPlot\">\n            <ScatterPlot\n              data={traces.map(t => {\n                return {\n                  x: t.startTime,\n                  y: t.duration,\n                  traceID: t.traceID,\n                  size: t.spans.length,\n                  name: t.traceName,\n                  color: t.hasErrors() ? 'red' : '#12939A',\n                  services: t.services || [],\n                };\n              })}\n              onValueClick={(t: IOtelTrace) => {\n                goToTrace(t.traceID);\n              }}\n            />\n          </div>\n        )}\n        <div className=\"SearchResults--headerOverview\">\n          <h2 className=\"ub-m0 u-flex-1\">\n            {traces.length} Trace{traces.length > 1 && 's'}\n          </h2>\n          {traceResultsView && <SelectSort sortBy={sortBy} handleSortChange={handleSortChange} />}\n          {traceResultsView && <DownloadResults onDownloadResultsClicked={onDownloadResultsClicked} />}\n          <AltViewOptions traceResultsView={traceResultsView} onDdgViewClicked={onDdgViewClicked} />\n          {showStandaloneLink && (\n            <Link\n              className=\"u-tx-inherit ub-nowrap ub-ml3\"\n              to={searchUrl}\n              target={getTargetEmptyOrBlank()}\n              rel=\"noopener noreferrer\"\n            >\n              <NewWindowIcon isLarge />\n            </Link>\n          )}\n        </div>\n      </div>\n      {!traceResultsView && (\n        <div className=\"SearchResults--ddg-container\">\n          <SearchResultsDDG location={location as any} />\n        </div>\n      )}\n      {traceResultsView && diffSelection}\n      {traceResultsView && (\n        <ul className=\"ub-list-reset\">\n          {traces.map(trace => (\n            <li className=\"ub-my3\" key={trace.traceID}>\n              <ResultItem\n                durationPercent={getPercentageOfDuration(trace.duration, maxTraceDuration)}\n                isInDiffCohort={cohortIds.has(trace.traceID)}\n                linkTo={getLocation(\n                  trace.traceID,\n                  { fromSearch: searchUrl },\n                  spanLinks && (spanLinks[trace.traceID] || spanLinks[trace.traceID.replace(/^0*/, '')])\n                )}\n                toggleComparison={toggleComparison}\n                trace={trace}\n                disableComparision={disableComparisons}\n              />\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n}\n\nexport default withRouteProps(React.memo(UnconnectedSearchResults));\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/SearchTracePage/index.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/SearchTracePage/index.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'store' is defined but never used.","line":9,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":13},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":104,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":104,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3217,3220],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3217,3220],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":104,"column":81,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":104,"endColumn":84,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3240,3243],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3240,3243],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'diffCohort', 'fetchMultipleTraces', 'isHomepage', 'queryOfResults', 'searchTraces', and 'urlQueryParams'. Either include them or remove the dependency array.","line":115,"column":6,"nodeType":"ArrayExpression","endLine":115,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [diffCohort, fetchMultipleTraces, isHomepage, queryOfResults, searchTraces, urlQueryParams]","fix":{"range":[3652,3654],"text":"[diffCohort, fetchMultipleTraces, isHomepage, queryOfResults, searchTraces, urlQueryParams]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":178,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":178,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5760,5763],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5760,5763],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ITraceMapEntry' is defined but never used.","line":195,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":195,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ISearchState' is defined but never used.","line":199,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":199,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":217,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":217,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6733,6736],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6733,6736],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2026 The Jaeger Authors.\n// Copyright (c) 2017 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { Col, Row, Tabs } from 'antd';\nimport { connect } from 'react-redux';\nimport { bindActionCreators, Dispatch } from 'redux';\nimport store from 'store';\nimport memoizeOne from 'memoize-one';\n\nimport { useConfig } from '../../hooks/useConfig';\n\nimport SearchForm from './SearchForm';\nimport SearchResults from './SearchResults';\nimport { isSameQuery, getUrlState } from './url';\nimport * as jaegerApiActions from '../../actions/jaeger-api';\nimport * as fileReaderActions from '../../actions/file-reader-api';\nimport * as orderBy from '../../model/order-by';\nimport ErrorMessage from '../common/ErrorMessage';\nimport { actions as traceDiffActions } from '../TraceDiff/duck';\nimport { fetchedState } from '../../constants';\nimport { sortTraces } from '../../model/search';\nimport FileLoader from './FileLoader';\n\nimport './index.css';\nimport JaegerLogo from '../../img/jaeger-logo.svg';\nimport withRouteProps from '../../utils/withRouteProps';\nimport { trackSortByChange } from './SearchForm.track';\nimport { ReduxState, FetchedTrace } from '../../types';\nimport { SearchQuery } from '../../types/search';\nimport { Trace } from '../../types/trace';\nimport { IOtelTrace } from '../../types/otel';\nimport type { TUrlState } from './url';\n\ninterface IQueryOfResults extends Partial<SearchQuery> {\n  service?: string;\n  limit?: string | number;\n}\n\ninterface IEmbeddedConfig {\n  searchHideGraph?: boolean;\n}\n\ninterface ISearchTracePageImplOwnProps {\n  isHomepage?: boolean;\n}\n\n// Props from mapStateToProps\ninterface IStateProps {\n  queryOfResults: IQueryOfResults | null;\n  diffCohort: FetchedTrace[];\n  embedded?: IEmbeddedConfig;\n  loadingTraces: boolean;\n  traces: Trace[];\n  traceResultsToDownload: unknown[];\n  errors: Array<{ message: string }> | null;\n  maxTraceDuration: number;\n  sortedTracesXformer: (traces: Trace[], sortBy: string) => IOtelTrace[];\n  urlQueryParams: TUrlState | null;\n}\n\n// Props from mapDispatchToProps\ninterface IDispatchProps {\n  cohortAddTrace: (traceId: string) => void;\n  cohortRemoveTrace: (traceId: string) => void;\n  fetchMultipleTraces: (traceIds: string[]) => void;\n  searchTraces: (query: TUrlState) => void;\n  loadJsonTraces: (fileList: { file: File }) => void;\n}\n\ntype SearchTracePageImplProps = ISearchTracePageImplOwnProps & IStateProps & IDispatchProps;\n\n// export for tests\nexport function SearchTracePageImpl(props: SearchTracePageImplProps) {\n  const {\n    cohortAddTrace,\n    cohortRemoveTrace,\n    diffCohort,\n    embedded,\n    errors,\n    fetchMultipleTraces,\n    isHomepage,\n    loadingTraces,\n    maxTraceDuration,\n    traceResultsToDownload,\n    queryOfResults,\n    loadJsonTraces,\n    searchTraces,\n    urlQueryParams,\n    sortedTracesXformer,\n    traces,\n  } = props;\n\n  const config = useConfig();\n  const { disableFileUploadControl } = config;\n  const [sortBy, setSortBy] = useState(orderBy.MOST_RECENT);\n\n  // componentDidMount logic\n  useEffect(() => {\n    if (\n      !isHomepage &&\n      urlQueryParams &&\n      (!queryOfResults || !isSameQuery(urlQueryParams as any, queryOfResults as any))\n    ) {\n      searchTraces(urlQueryParams);\n    }\n    const needForDiffs = diffCohort.filter(ft => ft.state == null).map(ft => ft.id);\n    if (needForDiffs.length) {\n      fetchMultipleTraces(needForDiffs);\n    }\n    // This may require \"eslint-disable-next-line react-hooks/exhaustive-deps\"\n    // in the future if we enable this linter.\n    // https://github.com/jaegertracing/jaeger-ui/issues/3445\n  }, []);\n\n  const handleSortChange = useCallback((newSortBy: string) => {\n    setSortBy(newSortBy);\n    trackSortByChange(newSortBy);\n  }, []);\n\n  const traceResults = sortedTracesXformer(traces, sortBy);\n  const hasTraceResults = traceResults && traceResults.length > 0;\n  const showErrors = errors && !loadingTraces;\n  const showLogo = isHomepage && !hasTraceResults && !loadingTraces && !errors;\n\n  const tabItems = [];\n  // Always show the search form, loading is handled by SearchForm\n  tabItems.push({\n    label: 'Search',\n    key: 'searchForm',\n    children: <SearchForm key={JSON.stringify(urlQueryParams)} />,\n  });\n  if (!disableFileUploadControl) {\n    tabItems.push({\n      label: 'Upload',\n      key: 'fileLoader',\n      children: <FileLoader loadJsonTraces={loadJsonTraces} />,\n    });\n  }\n\n  return (\n    <Row className=\"SearchTracePage--row\">\n      {!embedded && (\n        <Col span={6} className=\"SearchTracePage--column\">\n          <div className=\"SearchTracePage--find\">\n            <Tabs size=\"large\" items={tabItems} />\n          </div>\n        </Col>\n      )}\n      <Col span={!embedded ? 18 : 24} className=\"SearchTracePage--column\">\n        {showErrors && (\n          <div className=\"js-test-error-message\">\n            <h2>There was an error loading traces: </h2>\n            {errors.map(err => (\n              <ErrorMessage key={err.message} error={err} />\n            ))}\n          </div>\n        )}\n        {!showErrors && (\n          <SearchResults\n            {...({\n              cohortAddTrace,\n              cohortRemoveTrace,\n              diffCohort,\n              disableComparisons: !!embedded,\n              hideGraph: embedded && embedded.searchHideGraph,\n              loading: loadingTraces,\n              maxTraceDuration,\n              queryOfResults,\n              showStandaloneLink: Boolean(embedded),\n              skipMessage: isHomepage,\n              spanLinks: urlQueryParams && urlQueryParams.spanLinks,\n              traces: traceResults,\n              rawTraces: traceResultsToDownload,\n              sortBy,\n              handleSortChange,\n            } as any)}\n          />\n        )}\n        {showLogo && (\n          <img\n            className=\"SearchTracePage--logo js-test-logo\"\n            alt=\"presentation\"\n            src={JaegerLogo}\n            width=\"400\"\n          />\n        )}\n      </Col>\n    </Row>\n  );\n}\n\n// Type definitions\ninterface ITraceMapEntry {\n  data: Trace;\n}\n\ninterface ISearchState {\n  query?: SearchQuery;\n  results: string[];\n  state?: string;\n  error?: { message: string } | null;\n}\n\ninterface IStateTraceDiff {\n  cohort: string[];\n}\n\nconst stateTraceXformer = memoizeOne((stateTrace: ReduxState['trace']) => {\n  const { traces: traceMap, search } = stateTrace;\n  const { query, results, state, error: traceError } = search;\n\n  const loadingTraces = state === fetchedState.LOADING;\n  const traces = results.map(id => traceMap[id].data).filter((t): t is Trace => t !== undefined);\n  // rawTraces is populated by the trace reducer when search results are returned\n  const rawTraces = (stateTrace as any).rawTraces || [];\n  const maxDuration = Math.max(0, ...traces.map(tr => tr.duration || 0));\n  return { traces, rawTraces, maxDuration, traceError, loadingTraces, query };\n});\n\nconst stateTraceDiffXformer = memoizeOne(\n  (stateTrace: ReduxState['trace'], stateTraceDiff: IStateTraceDiff) => {\n    const { traces } = stateTrace;\n    const { cohort } = stateTraceDiff;\n    return cohort.map(id => traces[id] || { id, state: null });\n  }\n);\n\nconst sortedTracesXformer = memoizeOne((traces: Trace[], sortBy: string) => {\n  const traceResults = traces.slice();\n  sortTraces(traceResults, sortBy);\n  // Convert to OTEL traces\n  return traceResults.map(t => t.asOtelTrace());\n});\n\nexport function mapStateToProps(state: ReduxState): IStateProps & { isHomepage: boolean } {\n  const { embedded, router, traceDiff } = state;\n  const query = getUrlState(router.location.search);\n  const isHomepage = !Object.keys(query).length;\n  const {\n    query: queryOfResults,\n    traces,\n    rawTraces,\n    maxDuration,\n    traceError,\n    loadingTraces,\n  } = stateTraceXformer(state.trace);\n  const diffCohort = stateTraceDiffXformer(state.trace, traceDiff);\n  const errors: Array<{ message: string }> = [];\n  if (traceError && typeof traceError === 'object' && 'message' in traceError) {\n    errors.push({ message: traceError.message });\n  }\n  // Note: Removed serviceError, loadingServices and disableFileUploadControl\n  // as we no longer use Redux for services (PR 3329).\n  return {\n    queryOfResults: queryOfResults as IQueryOfResults | null,\n    diffCohort,\n    embedded,\n    isHomepage,\n    loadingTraces,\n    traces,\n    traceResultsToDownload: rawTraces,\n    errors: errors.length ? errors : null,\n    maxTraceDuration: maxDuration,\n    sortedTracesXformer,\n    urlQueryParams: Object.keys(query).length > 0 ? query : null,\n  };\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch): IDispatchProps {\n  const { fetchMultipleTraces, searchTraces } = bindActionCreators(jaegerApiActions, dispatch);\n  const { loadJsonTraces } = bindActionCreators(fileReaderActions, dispatch);\n  const { cohortAddTrace, cohortRemoveTrace } = bindActionCreators(traceDiffActions, dispatch);\n  return {\n    cohortAddTrace,\n    cohortRemoveTrace,\n    fetchMultipleTraces,\n    searchTraces,\n    loadJsonTraces,\n  };\n}\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\nexport default withRouteProps(connector(SearchTracePageImpl));\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/SearchTracePage/url.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/SearchTracePage/url.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TraceDiff/TraceDiff.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TraceDiff/TraceDiff.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TraceDiff/TraceDiffGraph/TraceDiffGraph.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TraceDiff/TraceDiffGraph/TraceDiffGraph.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TraceDiff/TraceDiffGraph/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TraceDiff/TraceDiffGraph/renderNode.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TraceDiff/TraceDiffGraph/renderNode.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TraceDiff/TraceDiffGraph/traceDiffGraphUtils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TraceDiff/TraceDiffHeader/CohortTable.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TraceDiff/TraceDiffHeader/CohortTable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TraceDiff/TraceDiffHeader/TraceDiffHeader.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TraceDiff/TraceDiffHeader/TraceDiffHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TraceDiff/TraceDiffHeader/TraceHeader.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TraceDiff/TraceDiffHeader/TraceHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TraceDiff/TraceDiffHeader/TraceIdInput.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TraceDiff/TraceDiffHeader/TraceIdInput.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TraceDiff/TraceDiffHeader/TraceTimelineLink.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TraceDiff/TraceDiffHeader/TraceTimelineLink.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TraceDiff/TraceDiffHeader/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TraceDiff/duck.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TraceDiff/duck.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TraceDiff/getValidState.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TraceDiff/getValidState.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TraceDiff/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TraceDiff/url.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TraceDiff/url.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/ArchiveNotifier/duck.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/ArchiveNotifier/duck.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":34,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[973,976],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[973,976],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/ArchiveNotifier/index.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/ArchiveNotifier/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/CriticalPath/index.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/CriticalPath/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/CriticalPath/testCases/test1.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/CriticalPath/testCases/test2.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/CriticalPath/testCases/test3.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/CriticalPath/testCases/test4.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/CriticalPath/testCases/test5.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/CriticalPath/testCases/test6.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/CriticalPath/testCases/test7.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/CriticalPath/testCases/test8.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/CriticalPath/testCases/test9.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/CriticalPath/utils/cpspan.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/CriticalPath/utils/findLastFinishingChildSpan.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/CriticalPath/utils/findLastFinishingChildSpan.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/CriticalPath/utils/sanitizeOverFlowingChildren.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/CriticalPath/utils/sanitizeOverFlowingChildren.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/ScrollManager.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/ScrollManager.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceFlamegraph/index.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceFlamegraph/index.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[405,408],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[405,408],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2022 The Jaeger Authors.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react';\nimport { FlamegraphRenderer, convertJaegerTraceToProfile } from '@pyroscope/flamegraph';\nimport _cloneDeep from 'lodash/cloneDeep';\n\nimport { useThemeMode } from '../../App/ThemeProvider';\n\nimport '@pyroscope/flamegraph/dist/index.css';\nimport './index.css';\n\nconst TraceFlamegraph = ({ trace }: any) => {\n  const { mode } = useThemeMode();\n\n  // Cloned b/c convertJaegerTraceToProfile or FlamegraphRenderer can possibly mutate the trace\n  // https://github.com/jaegertracing/jaeger-ui/issues/2483\n  const convertedProfile = trace && trace.data ? convertJaegerTraceToProfile(_cloneDeep(trace.data)) : null;\n\n  return (\n    <div className=\"Flamegraph-wrapper\" data-testid=\"flamegraph-wrapper\">\n      <FlamegraphRenderer colorMode={mode} profile={convertedProfile} />\n    </div>\n  );\n};\n\nexport default TraceFlamegraph;\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceGraph/OpNode.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceGraph/OpNode.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useOtelTerms' is defined but never used.","line":58,"column":89,"nodeType":null,"messageId":"unusedVar","endLine":58,"endColumn":101}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2018 The Jaeger Authors.\n// SPDX-License-Identifier: Apache-2.0\n\nimport * as React from 'react';\nimport { Popover } from 'antd';\nimport { TLayoutVertex } from '@jaegertracing/plexus/lib/types';\n\nimport { TSumSpan } from './types';\nimport CopyIcon from '../../common/CopyIcon';\nimport { TDenseSpanMembers } from '../../../model/trace-dag/types';\nimport TDagPlexusVertex from '../../../model/trace-dag/types/TDagPlexusVertex';\nimport colorGenerator from '../../../utils/color-generator';\n\nimport './OpNode.css';\nimport EmphasizedNode from '../../common/EmphasizedNode';\n\ntype Props = {\n  count: number;\n  errors: number;\n  time: number;\n  percent: number;\n  selfTime: number;\n  percentSelfTime: number;\n  operation: string;\n  service: string;\n  mode: string;\n  useOtelTerms: boolean;\n};\n\nexport const MODE_SERVICE = 'service';\nexport const MODE_TIME = 'time';\nexport const MODE_SELFTIME = 'selftime';\n\nexport const getHelpTable = (useOtelTerms: boolean) => (\n  <table className=\"OpNode OpNode--legendNode\">\n    <tbody>\n      <tr>\n        <td className=\"OpNode--metricCell\">Count / Error</td>\n        <td className=\"OpNode--labelCell\">\n          <strong>Service</strong>\n        </td>\n        <td className=\"OpNode--metricCell\">Avg</td>\n      </tr>\n      <tr>\n        <td className=\"OpNode--metricCell\">Duration</td>\n        <td className=\"OpNode--labelCell\">{useOtelTerms ? 'Span Name' : 'Operation'}</td>\n        <td className=\"OpNode--metricCell\">Self time</td>\n      </tr>\n    </tbody>\n  </table>\n);\n\nexport function round2(percent: number) {\n  return Math.round(percent * 100) / 100;\n}\n\nconst OpNode = React.memo<Props>(\n  ({ count, errors, time, percent, selfTime, percentSelfTime, operation, service, mode, useOtelTerms }) => {\n    // Spans over 20 % time are full red - we have probably to reconsider better approach\n    let backgroundColor;\n    if (mode === MODE_TIME) {\n      const percentBoosted = Math.min(percent / 20, 1);\n      backgroundColor = [255, 0, 0, percentBoosted].join();\n    } else if (mode === MODE_SELFTIME) {\n      backgroundColor = [255, 0, 0, percentSelfTime / 100].join();\n    } else {\n      backgroundColor = colorGenerator.getRgbColorByKey(service).concat(0.8).join();\n    }\n\n    const table = (\n      <table className={`OpNode OpNode--mode-${mode}`} cellSpacing=\"0\">\n        <tbody\n          className=\"OpNode--body\"\n          style={{\n            background: `rgba(${backgroundColor})`,\n          }}\n        >\n          <tr>\n            <td className=\"OpNode--metricCell OpNode--count\">\n              {count} / {errors}\n            </td>\n            <td className=\"OpNode--labelCell OpNode--service\">\n              <strong>{service}</strong>\n              <CopyIcon\n                className=\"OpNode--copyIcon\"\n                copyText={`${service} ${operation}`}\n                tooltipTitle=\"Copy label\"\n                buttonText=\"Copy\"\n              />\n            </td>\n            <td className=\"OpNode--metricCell OpNode--avg\">{round2(time / 1000 / count)} ms</td>\n          </tr>\n          <tr>\n            <td className=\"OpNode--metricCell OpNode--time\">\n              {time / 1000} ms ({round2(percent)} %)\n            </td>\n            <td className=\"OpNode--labelCell OpNode--op\">{operation}</td>\n            <td className=\"OpNode--metricCell OpNode--selfTime\">\n              {selfTime / 1000} ms ({round2(percentSelfTime)} %)\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    );\n    const popoverContent = <div className=\"OpNode--popoverContent\">{table}</div>;\n\n    return (\n      <Popover classNames={{ root: 'OpNode--popover' }} mouseEnterDelay={0.25} content={popoverContent}>\n        {table}\n      </Popover>\n    );\n  }\n);\n\nexport default OpNode;\n\nexport function getNodeRenderer(mode: string, useOtelTerms: boolean) {\n  return function drawNode(vertex: TDagPlexusVertex<TSumSpan & TDenseSpanMembers>) {\n    return <OpNode {...vertex.data} mode={mode} useOtelTerms={useOtelTerms} />;\n  };\n}\n\nexport function getNodeFindEmphasisRenderer(uiFindVertexKeys: Set<string> | null | undefined) {\n  return function renderFindEmphasis(lv: TLayoutVertex<TDagPlexusVertex<TSumSpan & TDenseSpanMembers>>) {\n    if (!uiFindVertexKeys || !uiFindVertexKeys.has(lv.vertex.key)) {\n      return null;\n    }\n    return <EmphasizedNode height={lv.height} width={lv.width} />;\n  };\n}\n\nexport function renderNodeVectorBorder(lv: TLayoutVertex<TDagPlexusVertex<TSumSpan>>) {\n  return (\n    <rect\n      className=\"OpNode--vectorBorder\"\n      vectorEffect=\"non-scaling-stroke\"\n      width={lv.width}\n      height={lv.height}\n    />\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceGraph/TraceGraph.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceGraph/TraceGraph.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":42,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1175,1178],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1175,1178],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2018 The Jaeger Authors.\n// SPDX-License-Identifier: Apache-2.0\n\nimport * as React from 'react';\nimport { Card, Button, Tooltip } from 'antd';\nimport { IoClose, IoHelpCircleOutline } from 'react-icons/io5';\nimport cx from 'classnames';\nimport { Digraph, LayoutManager, cacheAs } from '@jaegertracing/plexus';\n\nimport {\n  getNodeRenderer,\n  getNodeFindEmphasisRenderer,\n  renderNodeVectorBorder,\n  MODE_SERVICE,\n  MODE_TIME,\n  MODE_SELFTIME,\n  getHelpTable,\n} from './OpNode';\nimport { TEv, TSumSpan } from './types';\nimport { TDenseSpanMembers } from '../../../model/trace-dag/types';\nimport TDagPlexusVertex from '../../../model/trace-dag/types/TDagPlexusVertex';\nimport { TNil } from '../../../types';\nimport { TraceGraphConfig } from '../../../types/config';\n\nimport './TraceGraph.css';\n\ntype Props = {\n  headerHeight: number;\n  ev?: TEv | TNil;\n  uiFind: string | TNil;\n  uiFindVertexKeys: Set<string> | TNil;\n  traceGraphConfig?: TraceGraphConfig;\n  useOtelTerms: boolean;\n};\ntype State = {\n  showHelp: boolean;\n  mode: string;\n};\n\nconst { classNameIsSmall, scaleOpacity, scaleStrokeOpacity } = Digraph.propsFactories;\n\nexport function setOnEdgePath(e: any) {\n  return e.isNonBlocking ? { strokeDasharray: 4 } : {};\n}\n\nexport const getHelpContent = (useOtelTerms: boolean) => (\n  <div className=\"TraceGraph--help-content\" data-testid=\"help-content\">\n    {getHelpTable(useOtelTerms)}\n    <div>\n      <table>\n        <tbody>\n          <tr>\n            <td>\n              <Button htmlType=\"button\" shape=\"circle\" size=\"small\" className=\"active\">\n                S\n              </Button>\n            </td>\n            <td>Service</td>\n            <td>Colored by service</td>\n          </tr>\n          <tr>\n            <td>\n              <Button htmlType=\"button\" shape=\"circle\" size=\"small\">\n                T\n              </Button>\n            </td>\n            <td>Time</td>\n            <td>Colored by total time</td>\n          </tr>\n          <tr>\n            <td>\n              <Button htmlType=\"button\" shape=\"circle\" size=\"small\">\n                ST\n              </Button>\n            </td>\n            <td>Selftime</td>\n            <td>Colored by self time (*)</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div>\n      <svg width=\"100%\" height=\"40\">\n        <line x1=\"0\" y1=\"10\" x2=\"90\" y2=\"10\" style={{ stroke: '#000', strokeWidth: 2 }} />\n        <text alignmentBaseline=\"middle\" x=\"100\" y=\"10\">\n          ChildOf\n        </text>\n        <line\n          x1=\"0\"\n          y1=\"30\"\n          x2=\"90\"\n          y2=\"30\"\n          style={{ stroke: '#000', strokeWidth: 2, strokeDasharray: '4' }}\n        />\n        <text alignmentBaseline=\"middle\" x=\"100\" y=\"30\">\n          Non-Blocking\n        </text>\n      </svg>\n    </div>\n    <div>\n      (*) <b>Self time</b> is the total time spent in a span when it was not waiting on children. For example,\n      a 10ms span with two 4ms non-overlapping children would have <b>self-time = 10ms - 2 * 4ms = 2ms</b>.\n    </div>\n  </div>\n);\n\nexport default class TraceGraph extends React.PureComponent<Props, State> {\n  state: State;\n\n  layoutManager: LayoutManager;\n\n  static defaultProps = {\n    ev: null,\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      showHelp: false,\n      mode: MODE_SERVICE,\n    };\n    this.layoutManager = new LayoutManager({\n      totalMemory: props.traceGraphConfig?.layoutManagerMemory,\n      useDotEdges: true,\n      splines: 'polyline',\n    });\n  }\n\n  componentWillUnmount() {\n    this.layoutManager.stopAndRelease();\n  }\n\n  toggleNodeMode(newMode: string) {\n    this.setState({ mode: newMode });\n  }\n\n  showHelp = () => {\n    this.setState({ showHelp: true });\n  };\n\n  closeSidebar = () => {\n    this.setState({ showHelp: false });\n  };\n\n  render() {\n    const { ev, headerHeight, uiFind, uiFindVertexKeys, useOtelTerms } = this.props;\n    const { showHelp, mode } = this.state;\n    if (!ev) {\n      return <h1 className=\"u-mt-vast u-tx-muted ub-tx-center\">No trace found</h1>;\n    }\n\n    const wrapperClassName = cx('TraceGraph--graphWrapper', { 'is-uiFind-mode': uiFind });\n\n    return (\n      <div className={wrapperClassName} style={{ paddingTop: headerHeight + 47 }}>\n        <Digraph<TDagPlexusVertex<TSumSpan & TDenseSpanMembers>>\n          minimap\n          zoom\n          className=\"TraceGraph--dag\"\n          minimapClassName=\"u-miniMap\"\n          layoutManager={this.layoutManager}\n          measurableNodesKey=\"nodes\"\n          layers={[\n            {\n              key: 'node-find-emphasis',\n              layerType: 'svg',\n              renderNode: getNodeFindEmphasisRenderer(uiFindVertexKeys),\n            },\n            {\n              key: 'edges',\n              edges: true,\n              layerType: 'svg',\n              defs: [{ localId: 'arrow' }],\n              markerEndId: 'arrow',\n              setOnContainer: [scaleOpacity, scaleStrokeOpacity],\n              setOnEdge: setOnEdgePath,\n            },\n            {\n              key: 'nodes-borders',\n              layerType: 'svg',\n              setOnContainer: scaleStrokeOpacity,\n              renderNode: renderNodeVectorBorder,\n            },\n            {\n              key: 'nodes',\n              layerType: 'html',\n              measurable: true,\n              renderNode: cacheAs(`trace-graph/nodes/render/${mode}`, getNodeRenderer(mode, useOtelTerms)),\n            },\n          ]}\n          setOnGraph={classNameIsSmall}\n          edges={ev.edges}\n          vertices={ev.vertices}\n        />\n        <a\n          className=\"TraceGraph--experimental\"\n          href=\"https://github.com/jaegertracing/jaeger-ui/issues/293\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          Experimental\n        </a>\n        <div className=\"TraceGraph--sidebar-container\">\n          <ul className=\"TraceGraph--menu\">\n            <li>\n              <IoHelpCircleOutline onClick={this.showHelp} data-testid=\"help-icon\" />\n            </li>\n            <li>\n              <Tooltip placement=\"left\" title=\"Service\">\n                <Button\n                  className={cx('TraceGraph--btn-service', { active: mode === MODE_SERVICE })}\n                  htmlType=\"button\"\n                  shape=\"circle\"\n                  size=\"small\"\n                  onClick={() => this.toggleNodeMode(MODE_SERVICE)}\n                >\n                  S\n                </Button>\n              </Tooltip>\n            </li>\n            <li>\n              <Tooltip placement=\"left\" title=\"Time\">\n                <Button\n                  className={cx('TraceGraph--btn-time', { active: mode === MODE_TIME })}\n                  htmlType=\"button\"\n                  shape=\"circle\"\n                  size=\"small\"\n                  onClick={() => this.toggleNodeMode(MODE_TIME)}\n                >\n                  T\n                </Button>\n              </Tooltip>\n            </li>\n            <li>\n              <Tooltip placement=\"left\" title=\"Selftime\">\n                <Button\n                  className={cx('TraceGraph--btn-selftime', { active: mode === MODE_SELFTIME })}\n                  htmlType=\"button\"\n                  shape=\"circle\"\n                  size=\"small\"\n                  onClick={() => this.toggleNodeMode(MODE_SELFTIME)}\n                >\n                  ST\n                </Button>\n              </Tooltip>\n            </li>\n          </ul>\n          {showHelp && (\n            <Card\n              title=\"Help\"\n              bordered={false}\n              extra={\n                <a onClick={this.closeSidebar} role=\"button\" aria-label=\"Close\">\n                  <IoClose />\n                </a>\n              }\n            >\n              {getHelpContent(useOtelTerms)}\n            </Card>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceGraph/calculateTraceDagEV.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceGraph/calculateTraceDagEV.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceGraph/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TracePageHeader/AltViewOptions.test.js","messages":[{"ruleId":"jsx-a11y/no-static-element-interactions","severity":1,"message":"Avoid non-native interactive elements. If using native HTML is not possible, add an appropriate role and support for tabbing, mouse, keyboard, and touch inputs to an interactive content element.","line":21,"column":13,"nodeType":"JSXOpeningElement","endLine":30,"endColumn":14}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2019 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport * as React from 'react';\nimport { render, screen, fireEvent, cleanup } from '@testing-library/react';\nimport '@testing-library/jest-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport AltViewOptions from './AltViewOptions';\nimport * as track from './TracePageHeader.track';\nimport { ETraceViewType } from '../types';\n\njest.mock('antd', () => {\n  const originalModule = jest.requireActual('antd');\n  return {\n    ...originalModule,\n    Dropdown: ({ children, menu }) => (\n      <div data-testid=\"dropdown\">\n        {children}\n        <div data-testid=\"dropdown-menu\">\n          {menu.items.map(item => (\n            <div\n              key={item.key}\n              data-testid={`menu-item-${item.key}`}\n              onClick={() => {\n                // Simulate clicking the link/button inside\n                if (item.label?.props?.onClick) {\n                  item.label.props.onClick();\n                }\n              }}\n            >\n              {item.label}\n            </div>\n          ))}\n        </div>\n      </div>\n    ),\n    Button: ({ children, className }) => (\n      <button type=\"button\" className={className} data-testid=\"dropdown-button\">\n        {children}\n      </button>\n    ),\n  };\n});\n\ndescribe('AltViewOptions', () => {\n  let trackGanttView;\n  let trackGraphView;\n  let trackJsonView;\n  let trackRawJsonView;\n  let trackStatisticsView;\n  let trackTraceSpansView;\n\n  const props = {\n    viewType: ETraceViewType.TraceTimelineViewer,\n    traceID: 'test trace ID',\n    onTraceViewChange: jest.fn(),\n    disableJsonView: false,\n  };\n\n  beforeAll(() => {\n    trackGanttView = jest.spyOn(track, 'trackGanttView');\n    trackGraphView = jest.spyOn(track, 'trackGraphView');\n    trackJsonView = jest.spyOn(track, 'trackJsonView');\n    trackRawJsonView = jest.spyOn(track, 'trackRawJsonView');\n    trackStatisticsView = jest.spyOn(track, 'trackStatisticsView');\n    trackTraceSpansView = jest.spyOn(track, 'trackTraceSpansView');\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n    cleanup();\n  });\n\n  const renderComponent = (customProps = {}) => {\n    const mergedProps = { ...props, ...customProps };\n    return render(\n      <BrowserRouter>\n        <AltViewOptions {...mergedProps} />\n      </BrowserRouter>\n    );\n  };\n\n  it('renders dropdown button displaying the current view type', () => {\n    renderComponent();\n    const button = screen.getByTestId('dropdown-button');\n    expect(button).toHaveTextContent('Trace Timeline');\n  });\n\n  it('shows \"Alternate Views\" when viewType is not in MENU_ITEMS', () => {\n    renderComponent({ viewType: 'UnknownViewType' });\n    const button = screen.getByTestId('dropdown-button');\n    expect(button).toHaveTextContent('Alternate Views');\n  });\n\n  it('shows all alternate view options except current view', () => {\n    renderComponent();\n\n    expect(screen.queryByTestId('menu-item-TraceTimelineViewer')).not.toBeInTheDocument();\n\n    expect(screen.getByTestId('menu-item-TraceGraph')).toBeInTheDocument();\n    expect(screen.getByTestId('menu-item-TraceStatistics')).toBeInTheDocument();\n    expect(screen.getByTestId('menu-item-TraceSpansView')).toBeInTheDocument();\n    expect(screen.getByTestId('menu-item-TraceFlamegraph')).toBeInTheDocument();\n    expect(screen.getByTestId('menu-item-trace-json')).toBeInTheDocument();\n    expect(screen.getByTestId('menu-item-trace-json-unadjusted')).toBeInTheDocument();\n  });\n\n  it('hides json links when disableJsonView is true', () => {\n    renderComponent({ disableJsonView: true });\n\n    expect(screen.queryByTestId('menu-item-trace-json')).not.toBeInTheDocument();\n    expect(screen.queryByTestId('menu-item-trace-json-unadjusted')).not.toBeInTheDocument();\n\n    expect(screen.getByTestId('menu-item-TraceGraph')).toBeInTheDocument();\n    expect(screen.getByTestId('menu-item-TraceStatistics')).toBeInTheDocument();\n  });\n\n  it('tracks and changes view for Trace Graph', () => {\n    renderComponent({ viewType: ETraceViewType.TraceTimelineViewer });\n    const menuItem = screen.getByTestId('menu-item-TraceGraph');\n\n    fireEvent.click(menuItem);\n\n    expect(props.onTraceViewChange).toHaveBeenCalledWith(ETraceViewType.TraceGraph);\n    expect(trackGraphView).toHaveBeenCalledTimes(1);\n  });\n\n  it('tracks and changes view for Trace Statistics', () => {\n    renderComponent({ viewType: ETraceViewType.TraceGraph });\n    const menuItem = screen.getByTestId('menu-item-TraceStatistics');\n\n    fireEvent.click(menuItem);\n\n    expect(props.onTraceViewChange).toHaveBeenCalledWith(ETraceViewType.TraceStatistics);\n    expect(trackStatisticsView).toHaveBeenCalledTimes(1);\n  });\n\n  it('tracks and changes view for Trace Timeline', () => {\n    renderComponent({ viewType: ETraceViewType.TraceStatistics });\n    const menuItem = screen.getByTestId('menu-item-TraceTimelineViewer');\n\n    fireEvent.click(menuItem);\n\n    expect(props.onTraceViewChange).toHaveBeenCalledWith(ETraceViewType.TraceTimelineViewer);\n    expect(trackGanttView).toHaveBeenCalledTimes(1);\n  });\n\n  it('tracks and changes view for Trace Spans Table', () => {\n    renderComponent({ viewType: ETraceViewType.TraceTimelineViewer });\n    const menuItem = screen.getByTestId('menu-item-TraceSpansView');\n\n    fireEvent.click(menuItem);\n\n    expect(props.onTraceViewChange).toHaveBeenCalledWith(ETraceViewType.TraceSpansView);\n    expect(trackTraceSpansView).toHaveBeenCalledTimes(1);\n  });\n\n  it('does not track or change view for Trace Flamegraph', () => {\n    renderComponent({ viewType: ETraceViewType.TraceTimelineViewer });\n    const menuItem = screen.getByTestId('menu-item-TraceFlamegraph');\n\n    fireEvent.click(menuItem);\n\n    expect(props.onTraceViewChange).toHaveBeenCalledWith(ETraceViewType.TraceFlamegraph);\n\n    expect(trackGanttView).not.toHaveBeenCalled();\n    expect(trackGraphView).not.toHaveBeenCalled();\n    expect(trackStatisticsView).not.toHaveBeenCalled();\n    expect(trackTraceSpansView).not.toHaveBeenCalled();\n  });\n\n  it('renders JSON links with correct URLs', () => {\n    renderComponent();\n\n    const jsonMenuItem = screen.getByTestId('menu-item-trace-json');\n    const jsonLink = jsonMenuItem.querySelector('a');\n    expect(jsonLink).toHaveAttribute('href', '/api/traces/test trace ID?prettyPrint=true');\n\n    const rawJsonMenuItem = screen.getByTestId('menu-item-trace-json-unadjusted');\n    const rawJsonLink = rawJsonMenuItem.querySelector('a');\n    expect(rawJsonLink).toHaveAttribute('href', '/api/traces/test trace ID?raw=true&prettyPrint=true');\n  });\n\n  it('updates dropdown text when view type changes', () => {\n    const { rerender } = renderComponent({ viewType: ETraceViewType.TraceTimelineViewer });\n    expect(screen.getByTestId('dropdown-button')).toHaveTextContent('Trace Timeline');\n\n    const rerenderWithViewType = (viewType, expectedText) => {\n      rerender(\n        <BrowserRouter>\n          <AltViewOptions {...props} viewType={viewType} />\n        </BrowserRouter>\n      );\n      expect(screen.getByTestId('dropdown-button')).toHaveTextContent(expectedText);\n    };\n\n    rerenderWithViewType(ETraceViewType.TraceGraph, 'Trace Graph');\n    rerenderWithViewType(ETraceViewType.TraceStatistics, 'Trace Statistics');\n    rerenderWithViewType(ETraceViewType.TraceSpansView, 'Trace Spans Table');\n    rerenderWithViewType(ETraceViewType.TraceFlamegraph, 'Trace Flamegraph');\n  });\n\n  it('excludes current view from dropdown options for all view types', () => {\n    const viewTypes = [\n      { type: ETraceViewType.TraceTimelineViewer, testId: 'menu-item-TraceTimelineViewer' },\n      { type: ETraceViewType.TraceGraph, testId: 'menu-item-TraceGraph' },\n      { type: ETraceViewType.TraceStatistics, testId: 'menu-item-TraceStatistics' },\n      { type: ETraceViewType.TraceSpansView, testId: 'menu-item-TraceSpansView' },\n      { type: ETraceViewType.TraceFlamegraph, testId: 'menu-item-TraceFlamegraph' },\n    ];\n\n    viewTypes.forEach(({ type, testId }) => {\n      cleanup();\n      renderComponent({ viewType: type });\n      expect(screen.queryByTestId(testId)).not.toBeInTheDocument();\n    });\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TracePageHeader/AltViewOptions.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TracePageHeader/KeyboardShortcutsHelp.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TracePageHeader/KeyboardShortcutsHelp.track.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TracePageHeader/KeyboardShortcutsHelp.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TracePageHeader/SpanGraph/CanvasSpanGraph.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TracePageHeader/SpanGraph/CanvasSpanGraph.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TracePageHeader/SpanGraph/GraphTicks.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TracePageHeader/SpanGraph/GraphTicks.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TracePageHeader/SpanGraph/Scrubber.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TracePageHeader/SpanGraph/Scrubber.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TracePageHeader/SpanGraph/TickLabels.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TracePageHeader/SpanGraph/TickLabels.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TracePageHeader/SpanGraph/ViewingLayer.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TracePageHeader/SpanGraph/ViewingLayer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TracePageHeader/SpanGraph/index.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TracePageHeader/SpanGraph/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TracePageHeader/SpanGraph/render-into-canvas.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TracePageHeader/SpanGraph/render-into-canvas.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TracePageHeader/TracePageHeader.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TracePageHeader/TracePageHeader.track.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TracePageHeader/TracePageHeader.track.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TracePageHeader/TracePageHeader.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":89,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":89,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2988,2991],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2988,2991],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2017 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport * as React from 'react';\nimport { Button, InputRef, Tooltip } from 'antd';\nimport _get from 'lodash/get';\nimport _maxBy from 'lodash/maxBy';\nimport { IoArrowBack, IoFileTrayFull, IoChevronForward, IoWarning } from 'react-icons/io5';\nimport { Link } from 'react-router-dom';\n\nimport DocumentTitle from '../../../utils/documentTitle';\nimport AltViewOptions from './AltViewOptions';\nimport KeyboardShortcutsHelp from './KeyboardShortcutsHelp';\nimport SpanGraph from './SpanGraph';\nimport TracePageSearchBar from './TracePageSearchBar';\nimport { TUpdateViewRangeTimeFunction, IViewRange, ViewRangeTimeUpdate, ETraceViewType } from '../types';\nimport LabeledList from '../../common/LabeledList';\nimport NewWindowIcon from '../../common/NewWindowIcon';\nimport TraceName from '../../common/TraceName';\nimport { TNil } from '../../../types';\nimport { IOtelTrace } from '../../../types/otel';\nimport { formatDatetime, formatDuration } from '../../../utils/date';\nimport { getTraceLinks } from '../../../model/link-patterns';\n\nimport './TracePageHeader.css';\nimport ExternalLinks from '../../common/ExternalLinks';\nimport { getTargetEmptyOrBlank } from '../../../utils/config/get-target';\nimport TraceId from '../../common/TraceId';\n\ntype TracePageHeaderEmbedProps = {\n  canCollapse: boolean;\n  clearSearch: () => void;\n  focusUiFindMatches: () => void;\n  hideMap: boolean;\n  hideSummary: boolean;\n  linkToStandalone: string;\n  nextResult: () => void;\n  onArchiveClicked: () => void;\n  onSlimViewClicked: () => void;\n  onTraceViewChange: (viewType: ETraceViewType) => void;\n  prevResult: () => void;\n  resultCount: number;\n  showArchiveButton: boolean;\n  showShortcutsHelp: boolean;\n  showStandaloneLink: boolean;\n  disableJsonView: boolean;\n  showViewOptions: boolean;\n  slimView: boolean;\n  textFilter: string | TNil;\n  toSearch: string | null;\n  trace: IOtelTrace;\n  viewType: ETraceViewType;\n  updateNextViewRangeTime: (update: ViewRangeTimeUpdate) => void;\n  updateViewRangeTime: TUpdateViewRangeTimeFunction;\n  viewRange: IViewRange;\n  useOtelTerms: boolean;\n};\n\nexport const HEADER_ITEMS = [\n  {\n    key: 'timestamp',\n    label: 'Trace Start',\n    renderer: (trace: IOtelTrace) => {\n      const dateStr = formatDatetime(trace.startTime);\n      const match = dateStr.match(/^(.+)(\\.\\d+)$/);\n      return match ? (\n        <span className=\"TracePageHeader--overviewItem--value\">\n          {match[1]}\n          <span className=\"TracePageHeader--overviewItem--valueDetail\">{match[2]}</span>\n        </span>\n      ) : (\n        dateStr\n      );\n    },\n  },\n  {\n    key: 'duration',\n    label: 'Duration',\n    renderer: (trace: IOtelTrace) => formatDuration(trace.duration),\n  },\n  {\n    key: 'service-count',\n    label: 'Services',\n    renderer: (trace: IOtelTrace) => trace.services.length,\n  },\n  {\n    key: 'depth',\n    label: 'Depth',\n    renderer: (trace: IOtelTrace) => _get(_maxBy(trace.spans as any[], 'depth'), 'depth', 0) + 1,\n  },\n  {\n    key: 'span-count',\n    label: 'Total Spans',\n    renderer: (trace: IOtelTrace) => {\n      const orphanCount = trace.orphanSpanCount ?? 0;\n      const tooltipText = `This trace may be incomplete. ${orphanCount} span${orphanCount !== 1 ? 's' : ''} ${orphanCount !== 1 ? 'have' : 'has'} missing parent span(s).`;\n      return (\n        <span>\n          {trace.spans.length}\n          {orphanCount > 0 && (\n            <>\n              {' '}\n              <Tooltip title={tooltipText}>\n                <span className=\"TracePageHeader--incompleteTag\">\n                  <IoWarning className=\"TracePageHeader--incompleteIcon\" />\n                  Incomplete\n                </span>\n              </Tooltip>\n            </>\n          )}\n        </span>\n      );\n    },\n  },\n];\n\nexport function TracePageHeaderFn(props: TracePageHeaderEmbedProps & { forwardedRef: React.Ref<InputRef> }) {\n  const {\n    canCollapse,\n    clearSearch,\n    focusUiFindMatches,\n    forwardedRef,\n    hideMap,\n    hideSummary,\n    linkToStandalone,\n    nextResult,\n    onArchiveClicked,\n    onSlimViewClicked,\n    onTraceViewChange,\n    prevResult,\n    resultCount,\n    showArchiveButton,\n    showShortcutsHelp,\n    showStandaloneLink,\n    showViewOptions,\n    disableJsonView,\n    slimView,\n    textFilter,\n    toSearch,\n    trace,\n    viewType,\n    updateNextViewRangeTime,\n    updateViewRangeTime,\n    viewRange,\n    useOtelTerms,\n  } = props;\n\n  if (!trace) {\n    return null;\n  }\n\n  const links = getTraceLinks(trace);\n\n  const summaryItems =\n    !hideSummary &&\n    !slimView &&\n    HEADER_ITEMS.map(item => {\n      const { renderer, ...rest } = item;\n      return { ...rest, value: renderer(trace) };\n    });\n\n  const traceShortID = trace.traceID.slice(0, 7);\n\n  const title = (\n    <h1 className={`TracePageHeader--title ${canCollapse ? 'is-collapsible' : ''}`}>\n      <TraceName traceName={trace.traceName} /> <TraceId traceId={trace.traceID} />\n    </h1>\n  );\n\n  return (\n    <header className=\"TracePageHeader\">\n      <DocumentTitle title={`${trace.traceEmoji} ${traceShortID}: ${trace.tracePageTitle}  Jaeger UI`} />\n      <div className=\"TracePageHeader--titleRow\">\n        {toSearch && (\n          <Link className=\"TracePageHeader--back\" to={toSearch}>\n            <IoArrowBack />\n          </Link>\n        )}\n        {links && links.length > 0 && <ExternalLinks links={links} />}\n        {canCollapse ? (\n          <a\n            className=\"TracePageHeader--titleLink\"\n            onClick={onSlimViewClicked}\n            role=\"switch\"\n            aria-checked={!slimView}\n          >\n            <IoChevronForward className={`TracePageHeader--detailToggle ${!slimView ? 'is-expanded' : ''}`} />\n            {title}\n          </a>\n        ) : (\n          title\n        )}\n        <TracePageSearchBar\n          clearSearch={clearSearch}\n          focusUiFindMatches={focusUiFindMatches}\n          nextResult={nextResult}\n          prevResult={prevResult}\n          ref={forwardedRef}\n          resultCount={resultCount}\n          textFilter={textFilter}\n          navigable={viewType === ETraceViewType.TraceTimelineViewer}\n          useOtelTerms={useOtelTerms}\n        />\n        {showShortcutsHelp && <KeyboardShortcutsHelp className=\"ub-m2\" />}\n        {showViewOptions && (\n          <AltViewOptions\n            disableJsonView={disableJsonView}\n            onTraceViewChange={onTraceViewChange}\n            traceID={trace.traceID}\n            viewType={viewType}\n          />\n        )}\n        {showArchiveButton && (\n          <Button className=\"ub-mr2 ub-flex ub-items-center\" htmlType=\"button\" onClick={onArchiveClicked}>\n            <IoFileTrayFull className=\"TracePageHeader--archiveIcon\" />\n            Archive Trace\n          </Button>\n        )}\n        {showStandaloneLink && (\n          <Link\n            className=\"u-tx-inherit ub-nowrap ub-mx2\"\n            to={linkToStandalone}\n            target={getTargetEmptyOrBlank()}\n            rel=\"noopener noreferrer\"\n          >\n            <NewWindowIcon isLarge />\n          </Link>\n        )}\n      </div>\n      {summaryItems && <LabeledList className=\"TracePageHeader--overviewItems\" items={summaryItems} />}\n      {!hideMap && !slimView && (\n        <SpanGraph\n          trace={trace}\n          viewRange={viewRange}\n          updateNextViewRangeTime={updateNextViewRangeTime}\n          updateViewRangeTime={updateViewRangeTime}\n        />\n      )}\n    </header>\n  );\n}\n\nexport default React.forwardRef((props: TracePageHeaderEmbedProps, ref: React.Ref<InputRef>) => (\n  <TracePageHeaderFn {...props} forwardedRef={ref} />\n));\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TracePageHeader/TracePageSearchBar.markers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TracePageHeader/TracePageSearchBar.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TracePageHeader/TracePageSearchBar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'IoClose' is defined but never used.","line":7,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":35}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2018 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport * as React from 'react';\nimport { Button, Input, InputRef, Tooltip } from 'antd';\nimport cx from 'classnames';\nimport { IoLocate, IoHelp, IoClose, IoChevronDown, IoChevronUp } from 'react-icons/io5';\n\nimport * as markers from './TracePageSearchBar.markers';\nimport { trackFilter } from '../index.track';\nimport UiFindInput from '../../common/UiFindInput';\nimport { TNil } from '../../../types';\nimport './TracePageSearchBar.css';\n\ntype TracePageSearchBarProps = {\n  textFilter: string | TNil;\n  prevResult: () => void;\n  nextResult: () => void;\n  clearSearch: () => void;\n  focusUiFindMatches: () => void;\n  resultCount: number;\n  navigable: boolean;\n  useOtelTerms: boolean;\n};\n\nexport function TracePageSearchBarFn(props: TracePageSearchBarProps & { forwardedRef: React.Ref<InputRef> }) {\n  const {\n    focusUiFindMatches,\n    forwardedRef,\n    navigable,\n    nextResult,\n    prevResult,\n    resultCount,\n    textFilter,\n    useOtelTerms,\n  } = props;\n\n  const count = textFilter ? <span className=\"TracePageSearchBar--count\">{resultCount}</span> : null;\n\n  const btnClass = cx('TracePageSearchBar--btn', { 'is-disabled': !textFilter });\n  const uiFindInputInputProps = {\n    'data-test': markers.IN_TRACE_SEARCH,\n    className: 'TracePageSearchBar--bar ub-flex-auto',\n    name: 'search',\n    suffix: count,\n  };\n\n  const renderTooltip = () => {\n    return (\n      <div style={{ wordBreak: 'normal' }}>\n        <p>\n          This is an in-page search. Enter the query as a list of space-separated string terms. Each term is\n          used in a substring match against any of the following data elements: service name,{' '}\n          {useOtelTerms ? 'span name' : 'operation name'}, span ID, and key-value pairs in{' '}\n          {useOtelTerms ? 'attributes and events' : 'tags and logs'}. The spans that match any of the search\n          terms will be highlighted.\n        </p>\n        <p>\n          For exact phrase search surround the query in double quotes like{' '}\n          <code>&quot;The quick brown fox&quot;</code>\n        </p>\n        <p>\n          When matching key-value pairs, the substring search is applied separately against the key, the\n          value, and the concatenated <code>&quot;key=value&quot;</code> string. The latter allows searching\n          for exact matches like <code>http.status_code=200</code>.\n        </p>\n        <p>\n          To preclude certain key-value pairs from participating in the matching, prefix the key with the\n          minus <code>&apos;-&apos;</code> sign, e.g., <code>-http.status_code</code>.\n        </p>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"TracePageSearchBar\">\n      {/* style inline because compact overwrites the display */}\n      <Input.Group className=\"ub-justify-end\" compact style={{ display: 'flex' }}>\n        <UiFindInput\n          inputProps={uiFindInputInputProps}\n          forwardedRef={forwardedRef}\n          trackFindFunction={trackFilter}\n        />\n        <Tooltip\n          arrow={{ pointAtCenter: true }}\n          placement=\"bottomLeft\"\n          trigger=\"hover\"\n          overlayStyle={{ maxWidth: '600px' }} // This is a large tooltip and the default is too narrow.\n          title={renderTooltip()}\n        >\n          <div className=\"help-btn-container\">\n            <IoHelp className=\"help-button\" />\n          </div>\n        </Tooltip>\n        {navigable && (\n          <>\n            <Button\n              className={cx(btnClass, 'TracePageSearchBar--locateBtn')}\n              disabled={!textFilter}\n              htmlType=\"button\"\n              onClick={focusUiFindMatches}\n            >\n              <IoLocate />\n            </Button>\n            <Button\n              className={cx(btnClass, 'TracePageSearchBar--ButtonUp')}\n              disabled={!textFilter}\n              htmlType=\"button\"\n              data-testid=\"UpOutlined\"\n              onClick={prevResult}\n            >\n              <IoChevronUp />\n            </Button>\n            <Button\n              className={cx(btnClass, 'TracePageSearchBar--ButtonDown')}\n              disabled={!textFilter}\n              htmlType=\"button\"\n              data-testid=\"DownOutlined\"\n              onClick={nextResult}\n            >\n              <IoChevronDown />\n            </Button>\n          </>\n        )}\n      </Input.Group>\n    </div>\n  );\n}\n\nexport default React.forwardRef((props: TracePageSearchBarProps, ref: React.Ref<InputRef>) => (\n  <TracePageSearchBarFn {...props} forwardedRef={ref} />\n));\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TracePageHeader/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceSpanView/index.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceSpanView/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceSpanView/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceStatistics/PopupSql.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceStatistics/PopupSql.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceStatistics/TraceStatisticsHeader.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":161,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":161,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4626,4629],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4626,4629],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2020 The Jaeger Authors.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Checkbox, Select } from 'antd';\nimport React, { Component } from 'react';\nimport { IOtelTrace } from '../../../types/otel';\nimport { ITableSpan } from './types';\nimport { generateDropdownValue, generateSecondDropdownValue } from './generateDropdownValue';\nimport { getColumnValues, getColumnValuesSecondDropdown, getServiceName } from './tableValues';\nimport SearchableSelect from '../../common/SearchableSelect';\nimport generateColor from './generateColor';\nimport './TraceStatisticsHeader.css';\n\ntype Props = {\n  trace: IOtelTrace;\n  tableValue: ITableSpan[];\n  wholeTable: ITableSpan[];\n  handler: (\n    tableValue: ITableSpan[],\n    wholeTable: ITableSpan[],\n    valueNameSelector1: string,\n    valueNameSelector2: string | null\n  ) => void;\n  useOtelTerms: boolean;\n};\n\ntype State = {\n  valueNameSelector1: string;\n  valueNameSelector2: string | null;\n  valueNameSelector3: string;\n\n  checkboxStatus: boolean;\n};\n\nconst optionsNameSelector3 = new Map([\n  ['Count', 'count'],\n  ['Total', 'total'],\n  ['Avg', 'avg'],\n  ['Min', 'min'],\n  ['Max', 'max'],\n  ['ST Total', 'selfTotal'],\n  ['ST Avg', 'selfAvg'],\n  ['ST Min', 'selfMin'],\n  ['ST Max', 'selfMax'],\n  ['ST in Duration', 'percent'],\n]);\n\nexport default class TraceStatisticsHeader extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    const serviceName = getServiceName();\n    this.props.handler(\n      getColumnValues(serviceName, this.props.trace, this.props.useOtelTerms),\n      getColumnValues(serviceName, this.props.trace, this.props.useOtelTerms),\n      serviceName,\n      null\n    );\n\n    this.state = {\n      valueNameSelector1: serviceName,\n      valueNameSelector2: null,\n      valueNameSelector3: 'Count',\n      checkboxStatus: false,\n    };\n    this.setValueNameSelector1 = this.setValueNameSelector1.bind(this);\n    this.setValueNameSelector2 = this.setValueNameSelector2.bind(this);\n    this.setValueNameSelector3 = this.setValueNameSelector3.bind(this);\n    this.checkboxButton = this.checkboxButton.bind(this);\n    this.clearValue = this.clearValue.bind(this);\n  }\n\n  /**\n   * Returns the value of optionsNameSelector3.\n   */\n  getValue() {\n    let toColor = optionsNameSelector3.get(this.state.valueNameSelector3);\n    if (toColor === undefined) {\n      toColor = '';\n    }\n    return toColor;\n  }\n\n  /**\n   * Is called after a value from the first dropdown is selected.\n   */\n  setValueNameSelector1(value: string) {\n    this.setState({\n      valueNameSelector1: value,\n      valueNameSelector2: null,\n    });\n    const newTableValue = generateColor(\n      getColumnValues(value, this.props.trace, this.props.useOtelTerms),\n      this.getValue(),\n      this.state.checkboxStatus\n    );\n    const newWohleTable = generateColor(\n      getColumnValues(value, this.props.trace, this.props.useOtelTerms),\n      this.getValue(),\n      this.state.checkboxStatus\n    );\n    this.props.handler(newTableValue, newWohleTable, value, null);\n  }\n\n  /**\n   * Is called after a value from the second dropdown is selected.\n   */\n  setValueNameSelector2(value: string) {\n    this.setState({\n      valueNameSelector2: value,\n    });\n    const newTableValue = generateColor(\n      getColumnValuesSecondDropdown(\n        this.props.tableValue,\n        this.state.valueNameSelector1,\n        value,\n        this.props.trace,\n        this.props.useOtelTerms\n      ),\n      this.getValue(),\n      this.state.checkboxStatus\n    );\n    const newWohleTable = generateColor(\n      getColumnValuesSecondDropdown(\n        this.props.wholeTable,\n        this.state.valueNameSelector1,\n        value,\n        this.props.trace,\n        this.props.useOtelTerms\n      ),\n      this.getValue(),\n      this.state.checkboxStatus\n    );\n    this.props.handler(newTableValue, newWohleTable, this.state.valueNameSelector1, value);\n  }\n\n  /**\n   * Is called after a value from the third dropdown is selected.\n   */\n  setValueNameSelector3(value: string) {\n    this.setState({\n      valueNameSelector3: value,\n    });\n\n    let toColor = optionsNameSelector3.get(value);\n    if (toColor === undefined) {\n      toColor = '';\n    }\n    const newTableValue = generateColor(this.props.tableValue, toColor, this.state.checkboxStatus);\n    const newWohleTable = generateColor(this.props.wholeTable, toColor, this.state.checkboxStatus);\n    this.props.handler(\n      newTableValue,\n      newWohleTable,\n      this.state.valueNameSelector1,\n      this.state.valueNameSelector2\n    );\n  }\n\n  /**\n   * Is called after the checkbox changes its status.\n   */\n  checkboxButton(e: any) {\n    this.setState({\n      checkboxStatus: e.target.checked,\n    });\n\n    const newTableValue = generateColor(this.props.tableValue, this.getValue(), e.target.checked);\n    const newWholeTable = generateColor(this.props.wholeTable, this.getValue(), e.target.checked);\n    this.props.handler(\n      newTableValue,\n      newWholeTable,\n      this.state.valueNameSelector1,\n      this.state.valueNameSelector2\n    );\n  }\n\n  /**\n   * Sets the second dropdown to \"No Item selected\" and sets the table to the values after the first dropdown.\n   */\n  clearValue() {\n    this.setState({\n      valueNameSelector2: null,\n    });\n\n    const newTableValue = generateColor(\n      getColumnValues(this.state.valueNameSelector1, this.props.trace, this.props.useOtelTerms),\n      this.getValue(),\n      this.state.checkboxStatus\n    );\n    const newWholeTable = generateColor(\n      getColumnValues(this.state.valueNameSelector1, this.props.trace, this.props.useOtelTerms),\n      this.getValue(),\n      this.state.checkboxStatus\n    );\n    this.props.handler(newTableValue, newWholeTable, this.state.valueNameSelector1, null);\n  }\n\n  render() {\n    const optionsNameSelector1 = generateDropdownValue(this.props.trace, this.props.useOtelTerms);\n    const optionsNameSelector2 = generateSecondDropdownValue(\n      this.props.trace,\n      this.state.valueNameSelector1,\n      this.props.useOtelTerms\n    );\n\n    return (\n      <div className=\"TraceStatisticsHeader\">\n        <label className=\"TraceStatisticsHeader--label\">\n          <span className=\"TraceStatisticsHeader--labelText\">Group By:</span>\n          <SearchableSelect\n            className=\"TraceStatisticsHeader--select\"\n            value={this.state.valueNameSelector1}\n            onChange={this.setValueNameSelector1}\n            popupMatchSelectWidth={false}\n            fuzzy\n          >\n            {optionsNameSelector1.map(opt => (\n              <Select.Option key={opt} value={opt}>\n                {opt}\n              </Select.Option>\n            ))}\n          </SearchableSelect>\n        </label>\n        <label className=\"TraceStatisticsHeader--label\">\n          <span className=\"TraceStatisticsHeader--labelText\">Sub-Group:</span>\n          <SearchableSelect\n            className=\"TraceStatisticsHeader--select\"\n            value={this.state.valueNameSelector2}\n            onChange={this.setValueNameSelector2}\n            allowClear\n            onClear={this.clearValue}\n            placeholder=\"No item selected\"\n            popupMatchSelectWidth={false}\n            fuzzy\n          >\n            {optionsNameSelector2.map(opt => (\n              <Select.Option key={opt} value={opt}>\n                {opt}\n              </Select.Option>\n            ))}\n          </SearchableSelect>\n        </label>\n        <div className=\"TraceStatisticsHeader--colorByWrapper\">\n          <Checkbox className=\"TraceStatisticsHeader--checkbox\" onChange={this.checkboxButton} />\n          <label className=\"TraceStatisticsHeader--label\">\n            <span className=\"TraceStatisticsHeader--labelText\">Color by:</span>\n            <SearchableSelect\n              className=\"TraceStatisticsHeader--select\"\n              value={this.state.valueNameSelector3}\n              onChange={this.setValueNameSelector3}\n              popupMatchSelectWidth={false}\n              fuzzy\n            >\n              {Array.from(optionsNameSelector3.keys()).map(opt => (\n                <Select.Option key={opt} value={opt}>\n                  {opt}\n                </Select.Option>\n              ))}\n            </SearchableSelect>\n          </label>\n        </div>\n      </div>\n    );\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceStatistics/generateColor.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceStatistics/generateColor.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":22,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[735,738],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[735,738],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":23,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[791,794],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[791,794],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":27,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[922,925],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[922,925],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2020 The Jaeger Authors.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { ITableSpan } from './types';\n\nexport default function generateColor(tableValue: ITableSpan[], attribute: string, colorToPercent: boolean) {\n  let color;\n  let colorString;\n  const tableValue2 = tableValue;\n\n  for (let i = 0; i < tableValue2.length; i++) {\n    if (colorToPercent) {\n      if (attribute === 'percent') {\n        color = 236 - 166 * (tableValue2[i].percent / 100);\n        colorString = `rgb(248,${color},${color})`;\n\n        tableValue2[i].colorToPercent = colorString;\n      } else {\n        let max = 0;\n        // find hights value\n        for (let j = 0; j < tableValue2.length; j++) {\n          if (max < (tableValue2[j] as any)[attribute]) {\n            max = (tableValue2[j] as any)[attribute];\n          }\n        }\n        const onePercent = 100 / max / 100;\n        color = 236 - 166 * ((tableValue2[i] as any)[attribute] * onePercent);\n        colorString = `rgb(248,${color},${color})`;\n\n        tableValue2[i].colorToPercent = colorString;\n      }\n    } else if (tableValue2[i].isDetail) {\n      tableValue2[i].colorToPercent = `rgb(248,248,248)`;\n    } else {\n      tableValue2[i].colorToPercent = 'transparent';\n    }\n  }\n  return tableValue2;\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceStatistics/generateDropdownValue.test.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":10,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[431,434],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[431,434],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceStatistics/generateDropdownValue.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ITableSpan' is defined but never used.","line":7,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":20}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2020 The Jaeger Authors.\n// SPDX-License-Identifier: Apache-2.0\n\nimport _flatten from 'lodash/flatten';\nimport _uniq from 'lodash/uniq';\nimport { IOtelTrace } from '../../../types/otel';\nimport { ITableSpan } from './types';\n\nimport { getServiceName, getOperationName } from './tableValues';\n\n/**\n * Used to get the values if attribute is picked from the first dropdown.\n */\nfunction getValueAttributeIsPicked(\n  trace: IOtelTrace,\n  attributeKeyFromFirstDropdown: string,\n  useOtelTerms: boolean\n) {\n  const allSpans = trace.spans;\n  const attributeKeys = new Set<string>();\n\n  for (let j = 0; j < allSpans.length; j++) {\n    let spanContainsAttributeFromFirstDropdown = false;\n    for (let l = 0; l < allSpans[j].attributes.length; l++) {\n      if (attributeKeyFromFirstDropdown === allSpans[j].attributes[l].key) {\n        spanContainsAttributeFromFirstDropdown = true;\n        break;\n      }\n    }\n\n    if (spanContainsAttributeFromFirstDropdown) {\n      allSpans[j].attributes.forEach(x => attributeKeys.add(x.key));\n    }\n  }\n\n  attributeKeys.delete(attributeKeyFromFirstDropdown);\n\n  return [getServiceName(), getOperationName(useOtelTerms), ...attributeKeys];\n}\n\n/**\n * Used to get the values if no attribute is picked from the first dropdown.\n */\nfunction getValueNoAttributeIsPicked(trace: IOtelTrace, nameSelectorTitle: string, useOtelTerms: boolean) {\n  const availableAttributes = [];\n  const allSpans = trace.spans;\n  const serviceName = getServiceName();\n  const operationName = getOperationName(useOtelTerms);\n\n  if (nameSelectorTitle === serviceName) {\n    availableAttributes.push(operationName);\n  } else {\n    availableAttributes.push(serviceName);\n  }\n  for (let i = 0; i < allSpans.length; i++) {\n    for (let j = 0; j < allSpans[i].attributes.length; j++) {\n      availableAttributes.push(allSpans[i].attributes[j].key);\n    }\n  }\n  return _uniq(availableAttributes);\n}\n\nexport function generateDropdownValue(trace: IOtelTrace, useOtelTerms: boolean) {\n  const allSpans = trace.spans;\n  const attributes = _flatten(allSpans.map(o => o.attributes));\n  const attributeKeys = _uniq(attributes.map(o => o.key));\n  const values = [getServiceName(), getOperationName(useOtelTerms), ...attributeKeys];\n  return values;\n}\n\nexport function generateSecondDropdownValue(\n  trace: IOtelTrace,\n  dropdownTitle1: string,\n  useOtelTerms: boolean\n) {\n  let values;\n  const serviceName = getServiceName();\n  const operationName = getOperationName(useOtelTerms);\n\n  if (dropdownTitle1 !== serviceName && dropdownTitle1 !== operationName) {\n    values = getValueAttributeIsPicked(trace, dropdownTitle1, useOtelTerms);\n  } else {\n    values = getValueNoAttributeIsPicked(trace, dropdownTitle1, useOtelTerms);\n  }\n  return values;\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceStatistics/index.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceStatistics/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceStatistics/tableValues.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceStatistics/tableValues.ts","messages":[{"ruleId":"@typescript-eslint/no-shadow","severity":1,"message":"'parentChildOfMap' is already declared in the upper scope on line 13 column 10.","line":14,"column":9,"nodeType":"Identifier","messageId":"noShadow","endLine":14,"endColumn":54}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2020 The Jaeger Authors.\n// SPDX-License-Identifier: Apache-2.0\n\nimport memoizeOne from 'memoize-one';\nimport { IOtelTrace, IOtelSpan } from '../../../types/otel';\nimport { ITableSpan } from './types';\nimport colorGenerator from '../../../utils/color-generator';\n\nexport const getServiceName = () => 'Service Name';\nexport const getOperationName = (useOtelTerms: boolean) => (useOtelTerms ? 'Span Name' : 'Operation Name');\nexport const getAttributeName = (useOtelTerms: boolean) => (useOtelTerms ? 'Attribute' : 'Tag');\n\nfunction parentChildOfMap(allSpans: ReadonlyArray<IOtelSpan>): Record<string, IOtelSpan[]> {\n  const parentChildOfMap: Record<string, IOtelSpan[]> = {};\n  allSpans.forEach(s => {\n    if (s.parentSpanID) {\n      parentChildOfMap[s.parentSpanID] = parentChildOfMap[s.parentSpanID] || [];\n      parentChildOfMap[s.parentSpanID].push(s);\n    }\n  });\n  return parentChildOfMap;\n}\n\nconst memoizedParentChildOfMap = memoizeOne(parentChildOfMap);\n\nfunction getChildOfSpans(parentID: string, allSpans: ReadonlyArray<IOtelSpan>): IOtelSpan[] {\n  return memoizedParentChildOfMap(allSpans)[parentID] || [];\n}\n\nfunction computeSelfTime(parentSpan: IOtelSpan, allSpans: ReadonlyArray<IOtelSpan>): IOtelSpan['duration'] {\n  if (!parentSpan.hasChildren) return parentSpan.duration;\n\n  let parentSpanSelfTime = parentSpan.duration;\n  let previousChildEndTime = parentSpan.startTime;\n\n  const children = getChildOfSpans(parentSpan.spanID, allSpans).sort((a, b) => a.startTime - b.startTime);\n\n  const parentSpanEndTime = parentSpan.endTime;\n\n  for (let index = 0; index < children.length; index++) {\n    const child = children[index];\n\n    const childEndTime = child.endTime;\n    const childStartsAfterParentEnded = child.startTime > parentSpanEndTime;\n    const childEndsBeforePreviousChild = childEndTime < previousChildEndTime;\n\n    // parent |..................|\n    // child    |.......|                     - previousChild\n    // child     |.....|                      - childEndsBeforePreviousChild is true, skipped\n    // child                         |......| - childStartsAfterParentEnded is true, skipped\n    if (childStartsAfterParentEnded || childEndsBeforePreviousChild) {\n      continue;\n    }\n\n    // parent |.....................|\n    // child    |.......|                    - previousChild\n    // child        |.....|                  - nonOverlappingStartTime is previousChildEndTime\n    // child                |.....|          - nonOverlappingStartTime is child.startTime\n    const nonOverlappingStartTime = Math.max(previousChildEndTime, child.startTime);\n    const childEndTimeOrParentEndTime = Math.min(parentSpanEndTime, childEndTime);\n\n    const nonOverlappingDuration = childEndTimeOrParentEndTime - nonOverlappingStartTime;\n    parentSpanSelfTime = (parentSpanSelfTime - nonOverlappingDuration) as IOtelSpan['duration'];\n\n    // last span which can be included in self time calculation, because it ends after parent span ends\n    // parent |.......................|\n    // child                      |.....|        - last span included in self time calculation\n    // child                       |.........|   - skipped\n    if (childEndTimeOrParentEndTime === parentSpanEndTime) {\n      break;\n    }\n\n    previousChildEndTime = childEndTime as IOtelSpan['duration'];\n  }\n\n  return parentSpanSelfTime;\n}\n\nfunction computeColumnValues(\n  trace: IOtelTrace,\n  span: IOtelSpan,\n  allSpans: ReadonlyArray<IOtelSpan>,\n  resultValue: StatsPerTag\n) {\n  const resultValueChange = resultValue;\n  resultValueChange.count += 1;\n  resultValueChange.total = (resultValueChange.total + span.duration) as IOtelSpan['duration'];\n  if (resultValueChange.min > span.duration) {\n    resultValueChange.min = span.duration;\n  }\n  if (resultValueChange.max < span.duration) {\n    resultValueChange.max = span.duration;\n  }\n\n  const tempSelf = computeSelfTime(span, allSpans);\n  if (resultValueChange.selfMin > tempSelf) {\n    resultValueChange.selfMin = tempSelf;\n  }\n  if (resultValueChange.selfMax < tempSelf) {\n    resultValueChange.selfMax = tempSelf;\n  }\n  resultValueChange.selfTotal = (resultValueChange.selfTotal + tempSelf) as IOtelSpan['duration'];\n\n  const onePercent = 100 / trace.duration;\n  resultValueChange.percent = resultValueChange.selfTotal * onePercent;\n\n  return resultValueChange;\n}\n\n/**\n * Builds an object which represents a column.\n */\nfunction buildOneColumn(oneColumn: ITableSpan) {\n  const oneColumnChange = oneColumn;\n  oneColumnChange.total = (Math.round((oneColumnChange.total / 1000) * 100) / 100) as IOtelSpan['duration'];\n  oneColumnChange.avg = (Math.round((oneColumnChange.avg / 1000) * 100) / 100) as IOtelSpan['duration'];\n  oneColumnChange.min = (Math.round((oneColumnChange.min / 1000) * 100) / 100) as IOtelSpan['duration'];\n  oneColumnChange.max = (Math.round((oneColumnChange.max / 1000) * 100) / 100) as IOtelSpan['duration'];\n  oneColumnChange.selfTotal = (Math.round((oneColumnChange.selfTotal / 1000) * 100) /\n    100) as IOtelSpan['duration'];\n  oneColumnChange.selfAvg = (Math.round((oneColumnChange.selfAvg / 1000) * 100) /\n    100) as IOtelSpan['duration'];\n  oneColumnChange.selfMin = (Math.round((oneColumnChange.selfMin / 1000) * 100) /\n    100) as IOtelSpan['duration'];\n  oneColumnChange.selfMax = (Math.round((oneColumnChange.selfMax / 1000) * 100) /\n    100) as IOtelSpan['duration'];\n  oneColumnChange.percent = Math.round((oneColumnChange.percent / 1) * 100) / 100;\n  // oneColumnChange.colorToPercent;\n  return oneColumnChange;\n}\n\ntype StatsPerTag = {\n  selfTotal: IOtelSpan['duration'];\n  selfMin: IOtelSpan['duration'];\n  selfMax: IOtelSpan['duration'];\n  selfAvg: IOtelSpan['duration'];\n  total: IOtelSpan['duration'];\n  avg: IOtelSpan['duration'];\n  min: IOtelSpan['duration'];\n  max: IOtelSpan['duration'];\n  count: number;\n  percent: number;\n};\n\nfunction getDefaultStatsValue(trace: IOtelTrace): StatsPerTag {\n  return {\n    selfTotal: 0 as IOtelSpan['duration'],\n    selfMin: trace.duration as IOtelSpan['duration'],\n    selfMax: 0 as IOtelSpan['duration'],\n    selfAvg: 0 as IOtelSpan['duration'],\n    total: 0 as IOtelSpan['duration'],\n    avg: 0 as IOtelSpan['duration'],\n    min: trace.duration as IOtelSpan['duration'],\n    max: 0 as IOtelSpan['duration'],\n    count: 0,\n    percent: 0,\n  };\n}\n\nfunction getAttributeValueFromSpan(attributeKey: string, span: IOtelSpan, useOtelTerms: boolean) {\n  let attributeValue = null as null | string;\n  if (attributeKey === getOperationName(useOtelTerms)) {\n    attributeValue = span.name;\n  } else if (attributeKey === getServiceName()) {\n    attributeValue = span.resource.serviceName;\n  } else {\n    const attr = span.attributes.find(a => a.key === attributeKey);\n    if (attr) {\n      attributeValue = String(attr.value);\n    }\n  }\n\n  return attributeValue;\n}\n\n/**\n * Is used if only one dropdown is selected.\n */\nfunction valueFirstDropdown(selectedAttributeKey: string, trace: IOtelTrace, useOtelTerms: boolean) {\n  const allSpans = trace.spans;\n\n  // used to build the table\n  const allTableValues = [];\n  const spanWithNoSelectedAttribute = []; // is only needed when there are Others\n\n  const uniqueValuesForSelectedAttribute = new Set<string>();\n\n  const statsPerAttributeValue = {} as Record<string, StatsPerTag>;\n  const spanIdsWithSelectedAttribute = new Set<string>();\n\n  for (let i = 0; i < allSpans.length; i++) {\n    const attributeValue = getAttributeValueFromSpan(selectedAttributeKey, allSpans[i], useOtelTerms);\n\n    if (!attributeValue) {\n      continue;\n    }\n\n    statsPerAttributeValue[attributeValue] = computeColumnValues(\n      trace,\n      allSpans[i],\n      allSpans,\n      statsPerAttributeValue[attributeValue] ?? getDefaultStatsValue(trace)\n    );\n\n    spanIdsWithSelectedAttribute.add(allSpans[i].spanID);\n    uniqueValuesForSelectedAttribute.add(attributeValue);\n  }\n\n  for (const attributeValue of uniqueValuesForSelectedAttribute) {\n    const resultValue = statsPerAttributeValue[attributeValue];\n\n    let color = '';\n    if (selectedAttributeKey === getServiceName()) {\n      color = colorGenerator.getColorByKey(attributeValue);\n    }\n\n    resultValue.selfAvg = (resultValue.selfTotal / resultValue.count) as IOtelSpan['duration'];\n    resultValue.avg = (resultValue.total / resultValue.count) as IOtelSpan['duration'];\n    let tableSpan: ITableSpan = {\n      hasSubgroupValue: true,\n      name: attributeValue,\n      count: resultValue.count,\n      total: resultValue.total,\n      avg: resultValue.avg,\n      min: resultValue.min,\n      max: resultValue.max,\n      isDetail: false,\n      selfTotal: resultValue.selfTotal,\n      selfAvg: resultValue.selfAvg,\n      selfMin: resultValue.selfMin,\n      selfMax: resultValue.selfMax,\n      percent: resultValue.percent,\n      color,\n      searchColor: '',\n      parentElement: 'none',\n      colorToPercent: 'transparent',\n      traceID: '',\n    };\n    tableSpan = buildOneColumn(tableSpan);\n    allTableValues.push(tableSpan);\n  }\n  // checks if there is OTHERS\n  if (selectedAttributeKey !== getServiceName() && selectedAttributeKey !== getOperationName(useOtelTerms)) {\n    for (let i = 0; i < allSpans.length; i++) {\n      const spanHasSelectedAttribute = spanIdsWithSelectedAttribute.has(allSpans[i].spanID);\n\n      if (!spanHasSelectedAttribute) {\n        spanWithNoSelectedAttribute.push(allSpans[i]);\n      }\n    }\n\n    // Others is calculated\n    let resultValue = getDefaultStatsValue(trace);\n    for (let i = 0; i < spanWithNoSelectedAttribute.length; i++) {\n      resultValue = computeColumnValues(trace, spanWithNoSelectedAttribute[i], allSpans, resultValue);\n    }\n    if (resultValue.count !== 0) {\n      // Others is build\n      resultValue.selfAvg = (resultValue.selfTotal / resultValue.count) as IOtelSpan['duration'];\n      resultValue.avg = (resultValue.total / resultValue.count) as IOtelSpan['duration'];\n      let tableSpanOTHERS: ITableSpan = {\n        hasSubgroupValue: false,\n        name: `Without ${getAttributeName(useOtelTerms)}: ${selectedAttributeKey}`,\n        count: resultValue.count,\n        total: resultValue.total,\n        avg: resultValue.avg,\n        min: resultValue.min,\n        max: resultValue.max,\n        isDetail: false,\n        selfTotal: resultValue.selfTotal,\n        selfAvg: resultValue.selfAvg,\n        selfMin: resultValue.selfMin,\n        selfMax: resultValue.selfMax,\n        percent: resultValue.percent,\n        color: '',\n        searchColor: 'transparent',\n        parentElement: '',\n        colorToPercent: 'rgb(248,248,248)',\n        traceID: '',\n      };\n      tableSpanOTHERS = buildOneColumn(tableSpanOTHERS);\n      allTableValues.push(tableSpanOTHERS);\n    }\n  }\n  return allTableValues;\n}\n\n/**\n * Creates columns for the children.\n */\nfunction buildDetail(\n  tempArray: ReadonlyArray<IOtelSpan>,\n  allSpans: ReadonlyArray<IOtelSpan>,\n  selectedAttributeKeySecond: string,\n  parentName: string,\n  trace: IOtelTrace,\n  useOtelTerms: boolean\n) {\n  const newColumnValues = [];\n\n  const statsPerAttributeValue = {} as Record<string, StatsPerTag>;\n  const uniqueValuesForSelectedAttribute = new Set<string>();\n\n  for (let i = 0; i < tempArray.length; i++) {\n    const attributeValue = getAttributeValueFromSpan(selectedAttributeKeySecond, tempArray[i], useOtelTerms);\n\n    if (!attributeValue) {\n      continue;\n    }\n\n    statsPerAttributeValue[attributeValue] = computeColumnValues(\n      trace,\n      tempArray[i],\n      allSpans,\n      statsPerAttributeValue[attributeValue] ?? getDefaultStatsValue(trace)\n    );\n\n    uniqueValuesForSelectedAttribute.add(attributeValue);\n  }\n\n  for (const attributeValue of uniqueValuesForSelectedAttribute) {\n    const resultValue = statsPerAttributeValue[attributeValue];\n\n    let color = '';\n    if (selectedAttributeKeySecond === getServiceName()) {\n      color = colorGenerator.getColorByKey(attributeValue);\n    }\n\n    resultValue.selfAvg = (resultValue.selfTotal / resultValue.count) as IOtelSpan['duration'];\n    resultValue.avg = (resultValue.total / resultValue.count) as IOtelSpan['duration'];\n    let buildOneColumnValue: ITableSpan = {\n      hasSubgroupValue: true,\n      name: attributeValue,\n      count: resultValue.count,\n      total: resultValue.total,\n      avg: resultValue.avg,\n      min: resultValue.min,\n      max: resultValue.max,\n      isDetail: true,\n      selfTotal: resultValue.selfTotal,\n      selfAvg: resultValue.selfAvg,\n      selfMin: resultValue.selfMin,\n      selfMax: resultValue.selfMax,\n      percent: resultValue.percent,\n      color,\n      searchColor: '',\n      parentElement: parentName,\n      colorToPercent: 'rgb(248,248,248)',\n      traceID: '',\n    };\n    buildOneColumnValue = buildOneColumn(buildOneColumnValue);\n    newColumnValues.push(buildOneColumnValue);\n  }\n  return newColumnValues;\n}\n\n/**\n * Used to generate detail rest.\n */\nfunction generateDetailRest(\n  allColumnValues: ITableSpan[],\n  selectedAttributeKeySecond: string,\n  trace: IOtelTrace,\n  useOtelTerms: boolean\n) {\n  const allSpans = trace.spans;\n  const newTable = [];\n  for (let i = 0; i < allColumnValues.length; i++) {\n    newTable.push(allColumnValues[i]);\n    if (!allColumnValues[i].isDetail) {\n      let resultValue = getDefaultStatsValue(trace);\n\n      for (let j = 0; j < allSpans.length; j++) {\n        if (\n          allColumnValues[i].name === allSpans[j].resource.serviceName ||\n          allColumnValues[i].name === allSpans[j].name\n        ) {\n          let rest = true;\n          for (let l = 0; l < allSpans[j].attributes.length; l++) {\n            if (allSpans[j].attributes[l].key === selectedAttributeKeySecond) {\n              rest = false;\n              break;\n            }\n          }\n          if (rest) {\n            resultValue = computeColumnValues(trace, allSpans[j], allSpans, resultValue);\n          }\n        }\n      }\n      resultValue.avg = (resultValue.total / resultValue.count) as IOtelSpan['duration'];\n      resultValue.selfAvg = (resultValue.selfTotal / resultValue.count) as IOtelSpan['duration'];\n      if (resultValue.count !== 0) {\n        let buildOneColumnValue: ITableSpan = {\n          hasSubgroupValue: false,\n          name: `Without ${getAttributeName(useOtelTerms)}: ${selectedAttributeKeySecond}`,\n          count: resultValue.count,\n          total: resultValue.total,\n          avg: resultValue.avg,\n          min: resultValue.min,\n          max: resultValue.max,\n          isDetail: true,\n          selfTotal: resultValue.selfTotal,\n          selfAvg: resultValue.selfAvg,\n          selfMin: resultValue.selfMin,\n          selfMax: resultValue.selfMax,\n          percent: resultValue.percent,\n          color: '',\n          searchColor: '',\n          parentElement: allColumnValues[i].name,\n          colorToPercent: 'rgb(248,248,248)',\n          traceID: '',\n        };\n        buildOneColumnValue = buildOneColumn(buildOneColumnValue);\n        newTable.push(buildOneColumnValue);\n      }\n    }\n  }\n  return newTable;\n}\n\n/**\n * Used to get values if the second dropdown is selected.\n */\nfunction valueSecondDropdown(\n  actualTableValues: ITableSpan[],\n  selectedAttributeKey: string,\n  selectedAttributeKeySecond: string,\n  trace: IOtelTrace,\n  useOtelTerms: boolean\n) {\n  const allSpans = trace.spans;\n  const allTableValues = [];\n\n  const isSecondDropdownAttribute =\n    selectedAttributeKeySecond !== getServiceName() &&\n    selectedAttributeKeySecond !== getOperationName(useOtelTerms);\n\n  const spansMatchingAttributeValueFromFirstDropdown = {} as Record<string, IOtelSpan[]>;\n  for (let i = 0; i < allSpans.length; i++) {\n    const attributeValue = getAttributeValueFromSpan(selectedAttributeKey, allSpans[i], useOtelTerms);\n\n    if (!attributeValue) {\n      continue;\n    }\n\n    if (attributeValue in spansMatchingAttributeValueFromFirstDropdown) {\n      spansMatchingAttributeValueFromFirstDropdown[attributeValue].push(allSpans[i]);\n    } else {\n      spansMatchingAttributeValueFromFirstDropdown[attributeValue] = [allSpans[i]];\n    }\n  }\n\n  for (let i = 0; i < actualTableValues.length; i++) {\n    // if the table is already in the detail view, then these entries are not considered\n    if (actualTableValues[i].isDetail) {\n      continue;\n    }\n\n    const spansWithSecondAttribute = spansMatchingAttributeValueFromFirstDropdown[actualTableValues[i].name];\n\n    // true for row with name Without Attribute: ${selectedAttributeKey}\n    const isTableValueWithoutAttribute = spansWithSecondAttribute === undefined;\n    if (isTableValueWithoutAttribute) {\n      allTableValues.push(actualTableValues[i]);\n      continue;\n    }\n\n    const newColumnValues = buildDetail(\n      spansWithSecondAttribute,\n      allSpans,\n      selectedAttributeKeySecond,\n      actualTableValues[i].name,\n      trace,\n      useOtelTerms\n    );\n\n    allTableValues.push(actualTableValues[i]);\n\n    if (newColumnValues.length > 0) {\n      for (let j = 0; j < newColumnValues.length; j++) {\n        allTableValues.push(newColumnValues[j]);\n      }\n    }\n  }\n\n  // if second dropdown is an attribute a rest must be created\n  if (isSecondDropdownAttribute) {\n    return generateDetailRest(allTableValues, selectedAttributeKeySecond, trace, useOtelTerms);\n    // if no attribute is selected the values can be returned\n  }\n  return allTableValues;\n}\n\n/**\n * Returns the values of the table shown after the selection of the first dropdown.\n * @param selectedAttributeKey the key which was selected\n */\nexport function getColumnValues(selectedAttributeKey: string, trace: IOtelTrace, useOtelTerms: boolean) {\n  return valueFirstDropdown(selectedAttributeKey, trace, useOtelTerms);\n}\n\n/**\n * Returns the values of the table shown after the selection of the second dropdown.\n * @param actualTableValues actual values of the table\n * @param selectedAttributeKey first key which is selected\n * @param selectedAttributeKeySecond second key which is selected\n * @param trace whole information about the trace\n * @param useOtelTerms whether to use OpenTelemetry terms\n */\nexport function getColumnValuesSecondDropdown(\n  actualTableValues: ITableSpan[],\n  selectedAttributeKey: string,\n  selectedAttributeKeySecond: string,\n  trace: IOtelTrace,\n  useOtelTerms: boolean\n) {\n  if (selectedAttributeKeySecond !== 'Reset') {\n    return valueSecondDropdown(\n      actualTableValues,\n      selectedAttributeKey,\n      selectedAttributeKeySecond,\n      trace,\n      useOtelTerms\n    );\n  }\n  return getColumnValues(selectedAttributeKey, trace, useOtelTerms);\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceStatistics/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/ListView/Positions.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/ListView/Positions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/ListView/index.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/ListView/index.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":181,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":181,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5658,5661],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5658,5661],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":332,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":332,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10493,10496],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10493,10496],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2017 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport * as React from 'react';\n\nimport Positions from './Positions';\nimport { TNil } from '../../../../types';\n\ntype TWrapperProps = {\n  style: React.CSSProperties;\n  ref: (elm: HTMLDivElement) => void;\n  onScroll?: () => void;\n};\n\n/**\n * @typedef\n */\ntype TListViewProps = {\n  /**\n   * Number of elements in the list.\n   */\n  dataLength: number;\n  /**\n   * Convert item index (number) to the key (string). ListView uses both indexes\n   * and keys to handle the addtion of new rows.\n   */\n  getIndexFromKey: (key: string) => number;\n  /**\n   * Convert item key (string) to the index (number). ListView uses both indexes\n   * and keys to handle the addtion of new rows.\n   */\n  getKeyFromIndex: (index: number) => string;\n  /**\n   * Number of items to draw and add to the DOM, initially.\n   */\n  initialDraw?: number;\n  /**\n   * The parent provides fallback height measurements when there is not a\n   * rendered element to measure.\n   */\n  itemHeightGetter: (index: number, key: string) => number;\n  /**\n   * Function that renders an item; rendered items are added directly to the\n   * DOM, they are not wrapped in list item wrapper HTMLElement.\n   */\n  // itemRenderer(itemKey, style, i, attrs)\n  itemRenderer: (\n    itemKey: string,\n    style: Record<string, string | number>,\n    index: number,\n    attributes: Record<string, string>\n  ) => React.ReactNode;\n  /**\n   * `className` for the HTMLElement that holds the items.\n   */\n  itemsWrapperClassName?: string;\n  /**\n   * When adding new items to the DOM, this is the number of items to add above\n   * and below the current view. E.g. if list is 100 items and is srcolled\n   * halfway down (so items [46, 55] are in view), then when a new range of\n   * items is rendered, it will render items `46 - viewBuffer` to\n   * `55 + viewBuffer`.\n   */\n  viewBuffer: number;\n  /**\n   * The minimum number of items offscreen in either direction; e.g. at least\n   * `viewBuffer` number of items must be off screen above and below the\n   * current view, or more items will be rendered.\n   */\n  viewBufferMin: number;\n  /**\n   * When `true`, expect `_wrapperElm` to have `overflow: visible` and to,\n   * essentially, be tall to the point the entire page will will end up\n   * scrolling as a result of the ListView. Similar to react-virtualized\n   * window scroller.\n   *\n   * - Ref: https://bvaughn.github.io/react-virtualized/#/components/WindowScroller\n   * - Ref:https://github.com/bvaughn/react-virtualized/blob/497e2a1942529560681d65a9ef9f5e9c9c9a49ba/docs/WindowScroller.md\n   */\n  windowScroller?: boolean;\n};\n\nconst DEFAULT_INITIAL_DRAW = 300;\n\n/**\n * Virtualized list view component, for the most part, only renders the window\n * of items that are in-view with some buffer before and after. Listens for\n * scroll events and updates which items are rendered. See react-virtualized\n * for a suite of components with similar, but generalized, functinality.\n * https://github.com/bvaughn/react-virtualized\n *\n * Note: Presently, ListView cannot be a PureComponent. This is because ListView\n * is sensitive to the underlying state that drives the list items, but it\n * doesn't actually receive that state. So, a render may still be required even\n * if ListView's props are unchanged.\n *\n * @export\n * @class ListView\n */\nexport default class ListView extends React.Component<TListViewProps> {\n  /**\n   * Keeps track of the height and y-value of items, by item index, in the\n   * ListView.\n   */\n  _yPositions: Positions;\n  /**\n   * Keep track of the known / measured heights of the rendered items; populated\n   * with values through observation and keyed on the item key, not the item\n   * index.\n   */\n  _knownHeights: Map<string, number>;\n  /**\n   * The start index of the items currently drawn.\n   */\n  _startIndexDrawn: number;\n  /**\n   * The end index of the items currently drawn.\n   */\n  _endIndexDrawn: number;\n  /**\n   * The start index of the items currently in view.\n   */\n  _startIndex: number;\n  /**\n   * The end index of the items currently in view.\n   */\n  _endIndex: number;\n  /**\n   * Height of the visual window, e.g. height of the scroller element.\n   */\n  _viewHeight: number;\n  /**\n   * `scrollTop` of the current scroll position.\n   */\n  _scrollTop: number;\n  /**\n   * Used to keep track of whether or not a re-calculation of what should be\n   * drawn / viewable has been scheduled.\n   */\n  _isScrolledOrResized: boolean;\n  /**\n   * If `windowScroller` is true, this notes how far down the page the scroller\n   * is located. (Note: repositioning and below-the-fold views are untested)\n   */\n  _htmlTopOffset: number;\n  _windowScrollListenerAdded: boolean;\n  _htmlElm: HTMLElement;\n  /**\n   * HTMLElement holding the scroller.\n   */\n  _wrapperElm: HTMLElement | TNil;\n  /**\n   * HTMLElement holding the rendered items.\n   */\n  _itemHolderElm: HTMLElement | TNil;\n\n  static defaultProps = {\n    initialDraw: DEFAULT_INITIAL_DRAW,\n    itemsWrapperClassName: '',\n    windowScroller: false,\n  };\n\n  constructor(props: TListViewProps) {\n    super(props);\n\n    this._yPositions = new Positions(200);\n    // _knownHeights is (item-key -> observed height) of list items\n    this._knownHeights = new Map();\n\n    this._startIndexDrawn = 2 ** 20;\n    this._endIndexDrawn = -(2 ** 20);\n    this._startIndex = 0;\n    this._endIndex = 0;\n    this._viewHeight = -1;\n    this._scrollTop = -1;\n    this._isScrolledOrResized = false;\n\n    this._htmlTopOffset = -1;\n    this._windowScrollListenerAdded = false;\n    // _htmlElm is only relevant if props.windowScroller is true\n    this._htmlElm = document.documentElement as any;\n    this._wrapperElm = undefined;\n    this._itemHolderElm = undefined;\n  }\n\n  componentDidMount() {\n    if (this.props.windowScroller) {\n      if (this._wrapperElm) {\n        const { top } = this._wrapperElm.getBoundingClientRect();\n        this._htmlTopOffset = top + this._htmlElm.scrollTop;\n      }\n      window.addEventListener('scroll', this._onScroll);\n      this._windowScrollListenerAdded = true;\n    }\n  }\n\n  componentDidUpdate() {\n    if (this._itemHolderElm) {\n      this._scanItemHeights();\n    }\n  }\n\n  componentWillUnmount() {\n    if (this._windowScrollListenerAdded) {\n      window.removeEventListener('scroll', this._onScroll);\n    }\n  }\n\n  getViewHeight = () => this._viewHeight;\n\n  /**\n   * Get the index of the item at the bottom of the current view.\n   */\n  getBottomVisibleIndex = (): number => {\n    const bottomY = this._scrollTop + this._viewHeight;\n    return this._yPositions.findFloorIndex(bottomY, this._getHeight);\n  };\n\n  /**\n   * Get the index of the item at the top of the current view.\n   */\n  getTopVisibleIndex = (): number => this._yPositions.findFloorIndex(this._scrollTop, this._getHeight);\n\n  getRowPosition = (index: number): { height: number; y: number } =>\n    this._yPositions.getRowPosition(index, this._getHeight);\n\n  /**\n   * Scroll event listener that schedules a remeasuring of which items should be\n   * rendered.\n   */\n  _onScroll = () => {\n    if (!this._isScrolledOrResized) {\n      this._isScrolledOrResized = true;\n      window.requestAnimationFrame(this._positionList);\n    }\n  };\n\n  /**\n   * Returns true is the view height (scroll window) or scroll position have\n   * changed.\n   */\n  _isViewChanged() {\n    if (!this._wrapperElm) {\n      return false;\n    }\n    const useRoot = this.props.windowScroller;\n    const clientHeight = useRoot ? this._htmlElm.clientHeight : this._wrapperElm.clientHeight;\n    const scrollTop = useRoot ? this._htmlElm.scrollTop : this._wrapperElm.scrollTop;\n    return clientHeight !== this._viewHeight || scrollTop !== this._scrollTop;\n  }\n\n  /**\n   * Recalculate _startIndex and _endIndex, e.g. which items are in view.\n   */\n  _calcViewIndexes() {\n    const useRoot = this.props.windowScroller;\n    // funky if statement is to satisfy flow\n    if (!useRoot) {\n      /* istanbul ignore next */\n      if (!this._wrapperElm) {\n        this._viewHeight = -1;\n        this._startIndex = 0;\n        this._endIndex = 0;\n        return;\n      }\n      this._viewHeight = this._wrapperElm.clientHeight;\n      this._scrollTop = this._wrapperElm.scrollTop;\n    } else {\n      this._viewHeight = window.innerHeight - this._htmlTopOffset;\n      this._scrollTop = window.scrollY;\n    }\n    const yStart = this._scrollTop;\n    const yEnd = this._scrollTop + this._viewHeight;\n    this._startIndex = this._yPositions.findFloorIndex(yStart, this._getHeight);\n    this._endIndex = this._yPositions.findFloorIndex(yEnd, this._getHeight);\n  }\n\n  /**\n   * Checked to see if the currently rendered items are sufficient, if not,\n   * force an update to trigger more items to be rendered.\n   */\n  _positionList = () => {\n    this._isScrolledOrResized = false;\n    if (!this._wrapperElm) {\n      return;\n    }\n    this._calcViewIndexes();\n    // indexes drawn should be padded by at least props.viewBufferMin\n    const maxStart =\n      this.props.viewBufferMin > this._startIndex ? 0 : this._startIndex - this.props.viewBufferMin;\n    const minEnd =\n      this.props.viewBufferMin < this.props.dataLength - this._endIndex\n        ? this._endIndex + this.props.viewBufferMin\n        : this.props.dataLength - 1;\n    if (maxStart < this._startIndexDrawn || minEnd > this._endIndexDrawn) {\n      this.forceUpdate();\n    }\n  };\n\n  _initWrapper = (elm: HTMLElement | TNil) => {\n    this._wrapperElm = elm;\n    if (!this.props.windowScroller && elm) {\n      this._viewHeight = elm.clientHeight;\n    }\n  };\n\n  _initItemHolder = (elm: HTMLElement | TNil) => {\n    this._itemHolderElm = elm;\n    this._scanItemHeights();\n  };\n\n  /**\n   * Go through all items that are rendered and save their height based on their\n   * item-key (which is on a data-* attribute). If any new or adjusted heights\n   * are found, re-measure the current known y-positions (via .yPositions).\n   */\n  _scanItemHeights = () => {\n    const getIndexFromKey = this.props.getIndexFromKey;\n    if (!this._itemHolderElm) {\n      return;\n    }\n    // note the keys for the first and last altered heights, the `yPositions`\n    // needs to be updated\n    let lowDirtyKey = null;\n    let highDirtyKey = null;\n    let isDirty = false;\n    // iterating childNodes is faster than children\n    // https://jsperf.com/large-htmlcollection-vs-large-nodelist\n    const nodes = this._itemHolderElm.childNodes;\n    const max = nodes.length;\n    for (let i = 0; i < max; i++) {\n      const node: HTMLElement = nodes[i] as any;\n      // use `.getAttribute(...)` instead of `.dataset` for jest / JSDOM\n      const itemKey = node.getAttribute('data-item-key');\n      if (!itemKey) {\n        console.warn('itemKey not found');\n        continue;\n      }\n      // measure the first child, if it's available, otherwise the node itself\n      // (likely not transferable to other contexts, and instead is specific to\n      // how we have the items rendered)\n      const measureSrc: Element = node.firstElementChild || node;\n      const observed = measureSrc.clientHeight;\n      const known = this._knownHeights.get(itemKey);\n      if (observed !== known) {\n        this._knownHeights.set(itemKey, observed);\n        if (!isDirty) {\n          isDirty = true;\n\n          lowDirtyKey = highDirtyKey = itemKey;\n        } else {\n          highDirtyKey = itemKey;\n        }\n      }\n    }\n    if (lowDirtyKey != null && highDirtyKey != null) {\n      // update yPositions, then redraw\n      const imin = getIndexFromKey(lowDirtyKey);\n      const imax = highDirtyKey === lowDirtyKey ? imin : getIndexFromKey(highDirtyKey);\n      this._yPositions.calcHeights(imax, this._getHeight, imin);\n      this.forceUpdate();\n    }\n  };\n\n  /**\n   * Get the height of the element at index `i`; first check the known heigths,\n   * fallbck to `.props.itemHeightGetter(...)`.\n   */\n  _getHeight = (i: number) => {\n    const key = this.props.getKeyFromIndex(i);\n    const known = this._knownHeights.get(key);\n    // known !== known iff known is NaN\n\n    if (known != null && known === known) {\n      return known;\n    }\n    return this.props.itemHeightGetter(i, key);\n  };\n\n  render() {\n    const {\n      dataLength,\n      getKeyFromIndex,\n      initialDraw = DEFAULT_INITIAL_DRAW,\n      itemRenderer,\n      viewBuffer,\n      viewBufferMin,\n    } = this.props;\n    const heightGetter = this._getHeight;\n    const items = [];\n    let start;\n    let end;\n\n    this._yPositions.profileData(dataLength);\n\n    if (!this._wrapperElm) {\n      start = 0;\n      end = (initialDraw < dataLength ? initialDraw : dataLength) - 1;\n    } else {\n      if (this._isViewChanged()) {\n        this._calcViewIndexes();\n      }\n      const maxStart = viewBufferMin > this._startIndex ? 0 : this._startIndex - viewBufferMin;\n      const minEnd =\n        viewBufferMin < dataLength - this._endIndex ? this._endIndex + viewBufferMin : dataLength - 1;\n      if (maxStart < this._startIndexDrawn || minEnd > this._endIndexDrawn) {\n        start = viewBuffer > this._startIndex ? 0 : this._startIndex - viewBuffer;\n        end = this._endIndex + viewBuffer;\n        if (end >= dataLength) {\n          end = dataLength - 1;\n        }\n      } else {\n        start = this._startIndexDrawn;\n        end = this._endIndexDrawn > dataLength - 1 ? dataLength - 1 : this._endIndexDrawn;\n      }\n    }\n\n    this._yPositions.calcHeights(end, heightGetter, start || -1);\n    this._startIndexDrawn = start;\n    this._endIndexDrawn = end;\n\n    items.length = end - start + 1;\n    for (let i = start; i <= end; i++) {\n      const { y: top, height } = this._yPositions.getRowPosition(i, heightGetter);\n      const style = {\n        height,\n        top,\n        position: 'absolute',\n      };\n      const itemKey = getKeyFromIndex(i);\n      const attrs = { 'data-item-key': itemKey };\n      items.push(itemRenderer(itemKey, style, i, attrs));\n    }\n    const wrapperProps: TWrapperProps = {\n      style: { position: 'relative' },\n      ref: this._initWrapper,\n    };\n    if (!this.props.windowScroller) {\n      wrapperProps.onScroll = this._onScroll;\n      wrapperProps.style.height = '100%';\n      wrapperProps.style.overflowY = 'auto';\n    }\n    const scrollerStyle = {\n      position: 'relative' as const,\n      height: this._yPositions.getEstimatedHeight(),\n    };\n    return (\n      <div {...wrapperProps}>\n        <div style={scrollerStyle}>\n          <div\n            style={{\n              position: 'absolute',\n              top: 0,\n              margin: 0,\n              padding: 0,\n            }}\n            className={this.props.itemsWrapperClassName}\n            ref={this._initItemHolder}\n          >\n            {items}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/ReferencesButton.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/ReferencesButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/SpanBar.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/SpanBar.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":21,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[658,661],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[658,661],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"jsx-a11y/no-static-element-interactions","severity":1,"message":"Avoid non-native interactive elements. If using native HTML is not possible, add an appropriate role and support for tabbing, mouse, keyboard, and touch inputs to an interactive content element.","line":53,"column":5,"nodeType":"JSXOpeningElement","endLine":62,"endColumn":7}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2017 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React, { useState } from 'react';\nimport { Popover, Tooltip } from 'antd';\nimport _groupBy from 'lodash/groupBy';\n\nimport AccordionEvents from './SpanDetail/AccordionEvents';\n\nimport { ViewedBoundsFunctionType } from './utils';\nimport { TNil } from '../../../types';\nimport { CriticalPathSection } from '../../../types/critical_path';\nimport { IEvent, IOtelSpan } from '../../../types/otel';\n\nimport './SpanBar.css';\n\ntype TSpanBarProps = {\n  color: string;\n  hintSide: string;\n  // onClick: (evt: React.MouseEvent<any>) => void;\n  onClick?: (evt: React.MouseEvent<any>) => void;\n  criticalPath: CriticalPathSection[];\n  viewEnd: number;\n  viewStart: number;\n  getViewedBounds: ViewedBoundsFunctionType;\n  rpc:\n    | {\n        viewStart: number;\n        viewEnd: number;\n        color: string;\n      }\n    | TNil;\n  traceStartTime: number;\n  span: IOtelSpan;\n  longLabel: string;\n  shortLabel: string;\n  traceDuration: number;\n  useOtelTerms: boolean;\n};\n\nfunction toPercent(value: number) {\n  return `${(value * 100).toFixed(1)}%`;\n}\n\nfunction toPercentInDecimal(value: number) {\n  return `${value * 100}%`;\n}\n\nfunction SpanBarCriticalPath(props: { criticalPathViewStart: number; criticalPathViewEnd: number }) {\n  const [shouldLoadTooltip, setShouldLoadTooltip] = useState(false);\n\n  const criticalPath = (\n    <div\n      data-testid=\"SpanBar--criticalPath\"\n      className=\"SpanBar--criticalPath\"\n      onMouseEnter={() => setShouldLoadTooltip(true)}\n      style={{\n        background: 'var(--critical-path-color)',\n        left: toPercentInDecimal(props.criticalPathViewStart),\n        width: toPercentInDecimal(props.criticalPathViewEnd - props.criticalPathViewStart),\n      }}\n    />\n  );\n\n  // Load tooltip only when hovering over critical path segment\n  // to reduce initial load time of trace page by ~300ms for 500 spans\n  if (shouldLoadTooltip) {\n    return (\n      <Tooltip\n        placement=\"top\"\n        // defaultOpen is needed to show the tooltip when shouldLoadTooltip changes to true\n        defaultOpen\n        title={\n          <div>\n            A segment on the <em>critical path</em> of the overall trace/request/workflow.\n          </div>\n        }\n      >\n        {criticalPath}\n      </Tooltip>\n    );\n  }\n\n  return criticalPath;\n}\n\nfunction SpanBar(props: TSpanBarProps) {\n  const {\n    criticalPath,\n    viewEnd,\n    viewStart,\n    getViewedBounds,\n    color,\n    hintSide,\n    onClick,\n    rpc,\n    traceStartTime,\n    span,\n    shortLabel,\n    longLabel,\n    traceDuration,\n    useOtelTerms,\n  } = props;\n\n  // group events based on timestamps\n  const eventGroups = _groupBy(span.events, (event: IEvent) => {\n    const posPercent = getViewedBounds(event.timestamp, event.timestamp).start;\n    // round to the nearest 0.2%\n    return toPercent(Math.round(posPercent * 500) / 500);\n  });\n\n  const [label, setLabel] = useState(shortLabel);\n\n  const setShortLabel = () => {\n    setLabel(shortLabel);\n  };\n\n  const setLongLabel = () => {\n    setLabel(longLabel);\n  };\n\n  return (\n    <div\n      className=\"SpanBar--wrapper\"\n      onClick={onClick}\n      onMouseOut={setShortLabel}\n      onMouseOver={setLongLabel}\n      aria-hidden\n    >\n      <div\n        aria-label={label}\n        className=\"SpanBar--bar\"\n        style={{\n          background: color,\n          left: toPercent(viewStart),\n          width: toPercent(viewEnd - viewStart),\n        }}\n      >\n        <div className={`SpanBar--label is-${hintSide}`}>{label}</div>\n      </div>\n      <div>\n        {Object.keys(eventGroups).map(positionKey => (\n          <Popover\n            key={positionKey}\n            arrow={{ pointAtCenter: true }}\n            classNames={{ root: 'SpanBar--logHint' }}\n            placement=\"topLeft\"\n            content={\n              <AccordionEvents\n                interactive={false}\n                isOpen\n                events={eventGroups[positionKey]}\n                timestamp={traceStartTime}\n                currentViewRangeTime={[0, 1]}\n                traceDuration={traceDuration}\n                useOtelTerms={useOtelTerms}\n              />\n            }\n          >\n            <div\n              data-testid=\"SpanBar--logMarker\"\n              className=\"SpanBar--logMarker\"\n              style={{ left: positionKey, zIndex: 3 }}\n            />\n          </Popover>\n        ))}\n      </div>\n      {rpc && (\n        <div\n          className=\"SpanBar--rpc\"\n          style={{\n            background: rpc.color,\n            left: toPercent(rpc.viewStart),\n            width: toPercent(rpc.viewEnd - rpc.viewStart),\n          }}\n        />\n      )}\n      {criticalPath &&\n        criticalPath.map((each, index) => {\n          const critcalPathViewBounds = getViewedBounds(each.sectionStart, each.sectionEnd);\n          const criticalPathViewStart = critcalPathViewBounds.start;\n          const criticalPathViewEnd = critcalPathViewBounds.end;\n          const key = `${each.spanID}-${index}`;\n\n          return (\n            <SpanBarCriticalPath\n              criticalPathViewStart={criticalPathViewStart}\n              criticalPathViewEnd={criticalPathViewEnd}\n              key={key}\n            />\n          );\n        })}\n    </div>\n  );\n}\n\nexport default SpanBar;\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/SpanBarRow.test.js","messages":[{"ruleId":"jsx-a11y/no-static-element-interactions","severity":1,"message":"Avoid non-native interactive elements. If using native HTML is not possible, add an appropriate role and support for tabbing, mouse, keyboard, and touch inputs to an interactive content element.","line":14,"column":5,"nodeType":"JSXOpeningElement","endLine":14,"endColumn":59}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2017 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react';\nimport { render, screen, fireEvent } from '@testing-library/react';\nimport '@testing-library/jest-dom';\n\nimport SpanBarRow from './SpanBarRow';\nimport SpanBar from './SpanBar';\n\njest.mock('./SpanTreeOffset', () => ({\n  __esModule: true,\n  default: jest.fn(({ span, childrenVisible, onClick }) => (\n    <div data-testid=\"span-tree-offset\" onClick={onClick}>\n      SpanTreeOffset: {span.spanID} - {childrenVisible ? 'expanded' : 'collapsed'}\n    </div>\n  )),\n}));\n\njest.mock('./ReferencesButton', () => ({\n  __esModule: true,\n  default: jest.fn(({ tooltipText, links, children }) => (\n    <button\n      type=\"button\"\n      data-testid=\"references-button\"\n      data-tooltip={tooltipText}\n      data-references={JSON.stringify(links)}\n    >\n      {children}\n    </button>\n  )),\n}));\n\njest.mock('./SpanBar', () => ({\n  __esModule: true,\n  default: jest.fn(() => <div data-testid=\"span-bar\">SpanBar</div>),\n}));\n\njest.mock('./utils', () => ({\n  formatDuration: jest.fn(d => `formatted-${d}`),\n  ViewedBoundsFunctionType: {},\n}));\n\ndescribe('<SpanBarRow>', () => {\n  const spanID = 'some-id';\n  const defaultProps = {\n    className: 'a-class-name',\n    color: 'color-a',\n    criticalPath: [],\n    columnDivision: 0.5,\n    isChildrenExpanded: true,\n    isDetailExpanded: false,\n    isMatchingFilter: false,\n    onDetailToggled: jest.fn(),\n    onChildrenToggled: jest.fn(),\n    numTicks: 5,\n    rpc: {\n      viewStart: 0.25,\n      viewEnd: 0.75,\n      color: 'color-b',\n      operationName: 'rpc-op-name',\n      serviceName: 'rpc-service-name',\n    },\n    hasOwnError: false,\n    hasChildError: false,\n    getViewedBounds: jest.fn().mockReturnValue({ start: 0.5, end: 0.6 }),\n    span: {\n      traceId: 'trace-id',\n      spanID: spanID,\n      name: 'op-name',\n      kind: 'SERVER',\n      startTime: 100,\n      endTime: 200,\n      duration: 100,\n      attributes: [],\n      events: [],\n      links: [],\n      status: { code: 'OK' },\n      resource: { attributes: [], serviceName: 'service-name' },\n      instrumentationScope: { name: 'scope' },\n      depth: 0,\n      hasChildren: true,\n      relativeStartTime: 100,\n      inboundLinks: [],\n      warnings: null,\n    },\n    traceStartTime: 0,\n    traceDuration: 1000,\n    focusSpan: jest.fn(),\n    useOtelTerms: false,\n  };\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n    defaultProps.onDetailToggled.mockReset();\n    defaultProps.onChildrenToggled.mockReset();\n  });\n\n  it('renders correctly with essential elements', () => {\n    render(<SpanBarRow {...defaultProps} />);\n    expect(screen.getByTestId('span-tree-offset')).toBeVisible();\n    expect(screen.getByRole('switch')).toBeVisible();\n  });\n\n  it('triggers onDetailToggled when view area is clicked', () => {\n    render(<SpanBarRow {...defaultProps} />);\n    const spanView = screen.getByTestId('span-bar').closest('div.span-view');\n    fireEvent.click(spanView);\n    expect(defaultProps.onDetailToggled).toHaveBeenCalledTimes(1);\n    expect(defaultProps.onDetailToggled).toHaveBeenCalledWith(spanID);\n  });\n\n  it('triggers onChildrenToggled when SpanTreeOffset is clicked', () => {\n    render(<SpanBarRow {...defaultProps} />);\n    const treeOffset = screen.getByTestId('span-tree-offset');\n    fireEvent.click(treeOffset);\n    expect(defaultProps.onChildrenToggled).toHaveBeenCalledTimes(1);\n    expect(defaultProps.onChildrenToggled).toHaveBeenCalledWith(spanID);\n  });\n\n  it('shows ReferencesButton when span has multiple references', () => {\n    const span = {\n      ...defaultProps.span,\n      links: [\n        { traceId: 't1', spanID: 's1', attributes: [] },\n        { traceId: 't2', spanID: 's2', attributes: [] },\n      ],\n    };\n    render(<SpanBarRow {...defaultProps} span={span} />);\n    const btn = screen.getByTestId('references-button');\n    expect(btn).toBeVisible();\n    expect(btn).toHaveAttribute('data-tooltip', 'Contains multiple references');\n  });\n\n  it('shows tooltip for a single downstream reference', () => {\n    const span = {\n      ...defaultProps.span,\n      inboundLinks: [{ traceId: 't1', spanID: 's1', attributes: [] }],\n    };\n    render(<SpanBarRow {...defaultProps} span={span} />);\n    const btn = screen.getByTestId('references-button');\n    expect(btn).toBeVisible();\n    expect(btn).toHaveAttribute('data-tooltip', 'This span is referenced by another span');\n  });\n\n  it('shows tooltip for multiple downstream references', () => {\n    const span = {\n      ...defaultProps.span,\n      inboundLinks: [\n        { traceId: 't1', spanID: 's1', attributes: [] },\n        { traceId: 't2', spanID: 's2', attributes: [] },\n      ],\n    };\n    render(<SpanBarRow {...defaultProps} span={span} />);\n    const btn = screen.getByTestId('references-button');\n    expect(btn).toBeVisible();\n    expect(btn).toHaveAttribute('data-tooltip', 'This span is referenced by multiple other spans');\n  });\n\n  it('renders with noInstrumentedServer', () => {\n    const props = {\n      ...defaultProps,\n      rpc: null,\n      noInstrumentedServer: {\n        color: 'color-c',\n        serviceName: 'no-instrumented-service',\n      },\n    };\n    render(<SpanBarRow {...props} />);\n    expect(screen.getByText('no-instrumented-service')).toBeVisible();\n  });\n\n  it('renders with error icon when hasOwnError is true', () => {\n    const props = {\n      ...defaultProps,\n      hasOwnError: true,\n      hasChildError: false,\n    };\n    render(<SpanBarRow {...props} />);\n    expect(document.querySelector('.SpanBarRow--errorIcon')).toBeInTheDocument();\n  });\n\n  it('applies is-detail-expanded class when isDetailExpanded is true', () => {\n    const props = {\n      ...defaultProps,\n      isDetailExpanded: true,\n    };\n    render(<SpanBarRow {...props} />);\n    const link = screen.getByRole('switch');\n    expect(link).toHaveClass('span-name', 'is-detail-expanded');\n  });\n\n  it('applies is-matching-filter classes when isMatchingFilter is true', () => {\n    const props = {\n      ...defaultProps,\n      isMatchingFilter: true,\n    };\n    render(<SpanBarRow {...props} />);\n    const row = screen.getByTestId('span-bar').closest('.span-row');\n    expect(row).toHaveClass('is-matching-filter');\n    const wrapper = screen.getByTestId('span-tree-offset').parentElement;\n    expect(wrapper).toHaveClass('span-name-wrapper', 'is-matching-filter');\n  });\n\n  it('applies is-children-collapsed class when isParent is true and isChildrenExpanded is false', () => {\n    const props = {\n      ...defaultProps,\n      isChildrenExpanded: false,\n    };\n    render(<SpanBarRow {...props} />);\n    const svcName = screen.getByText('service-name').closest('.span-svc-name');\n    expect(svcName).toHaveClass('span-svc-name', 'is-children-collapsed');\n  });\n\n  it('sets longLabel and hintSide to right when viewStart <= 1 - viewEnd', () => {\n    const getViewedBounds = jest.fn().mockReturnValue({ start: 0.2, end: 0.3 });\n    const props = {\n      ...defaultProps,\n      getViewedBounds,\n      span: {\n        ...defaultProps.span,\n        startTime: 100,\n        duration: 50,\n      },\n    };\n    render(<SpanBarRow {...props} />);\n    expect(SpanBar).toHaveBeenCalledWith(\n      expect.objectContaining({\n        longLabel: 'formatted-50 | service-name::op-name',\n        hintSide: 'right',\n      }),\n      undefined\n    );\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/SpanBarRow.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/SpanDetail/AccordionAttributes.markers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/SpanDetail/AccordionAttributes.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/SpanDetail/AccordionAttributes.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/SpanDetail/AccordionEvents.test.js","messages":[{"ruleId":"jsx-a11y/no-static-element-interactions","severity":1,"message":"Avoid non-native interactive elements. If using native HTML is not possible, add an appropriate role and support for tabbing, mouse, keyboard, and touch inputs to an interactive content element.","line":14,"column":5,"nodeType":"JSXOpeningElement","endLine":14,"endColumn":60}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2017 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react';\nimport { render, screen, fireEvent } from '@testing-library/react';\nimport '@testing-library/jest-dom';\n\nimport AccordionEvents from './AccordionEvents';\n\nconst mockAccordionAttributes = jest.fn();\njest.mock('./AccordionAttributes', () => props => {\n  mockAccordionAttributes(props);\n  return (\n    <div data-testid=\"event-item\" onClick={props.onToggle}>\n      LogItem\n    </div>\n  );\n});\n\ndescribe('<AccordionEvents>', () => {\n  const events = [\n    {\n      timestamp: 10,\n      name: 'event',\n      attributes: [\n        { key: 'message', value: 'oh the event message' },\n        { key: 'something', value: 'else' },\n      ],\n    },\n    {\n      timestamp: 20,\n      name: 'event',\n      attributes: [\n        { key: 'message', value: 'oh the next event message' },\n        { key: 'more', value: 'stuff' },\n      ],\n    },\n  ];\n\n  const defaultInRangeLogs = [events[0]];\n  const defaultInRangeLogsCount = defaultInRangeLogs.length;\n  const defaultTotalCount = events.length;\n  const defaultProps = {\n    events,\n    isOpen: false,\n    onItemToggle: jest.fn(),\n    onToggle: jest.fn(),\n    openedItems: new Set([events[1]]),\n    timestamp: 5,\n    traceDuration: 100,\n    currentViewRangeTime: [0.0, 0.12],\n    interactive: true,\n  };\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  it('renders without crashing', () => {\n    render(<AccordionEvents {...defaultProps} />);\n    const header = screen.getByRole('switch');\n    expect(header).toHaveTextContent(`Logs (${defaultInRangeLogsCount} of ${defaultTotalCount})`);\n    expect(screen.getByRole('button', { name: /show all/i })).toBeInTheDocument();\n  });\n\n  it('hides event items when not expanded', () => {\n    render(<AccordionEvents {...defaultProps} />);\n    expect(screen.queryByTestId('event-item')).not.toBeInTheDocument();\n  });\n\n  it('shows event items when expanded', () => {\n    render(<AccordionEvents {...defaultProps} isOpen />);\n    const items = screen.getAllByTestId('event-item');\n    expect(items.length).toBe(defaultInRangeLogsCount);\n  });\n\n  it('calls onItemToggle when a event item is toggled', () => {\n    render(<AccordionEvents {...defaultProps} isOpen />);\n    const items = screen.getAllByTestId('event-item');\n\n    items.forEach((item, index) => {\n      fireEvent.click(item);\n      expect(defaultProps.onItemToggle).toHaveBeenCalledWith(defaultInRangeLogs[index]);\n    });\n  });\n\n  it('propagates isOpen to event items correctly', () => {\n    render(<AccordionEvents {...defaultProps} isOpen />);\n    expect(mockAccordionAttributes).toHaveBeenCalledTimes(defaultInRangeLogsCount);\n    expect(mockAccordionAttributes.mock.calls[0][0].isOpen).toBe(\n      defaultProps.openedItems.has(defaultInRangeLogs[0])\n    );\n  });\n\n  it('calls onToggle when the header is clicked', () => {\n    render(<AccordionEvents {...defaultProps} />);\n    fireEvent.click(screen.getByRole('switch'));\n    expect(defaultProps.onToggle).toHaveBeenCalled();\n  });\n\n  it('shows all events when \"show all\" is clicked', () => {\n    render(<AccordionEvents {...defaultProps} isOpen />);\n    fireEvent.click(screen.getByRole('button', { name: /show all/i }));\n    expect(screen.getByRole('switch')).toHaveTextContent(`Logs (${defaultTotalCount})`);\n    const items = screen.getAllByTestId('event-item');\n    expect(items.length).toBe(defaultTotalCount);\n    expect(screen.getByRole('button', { name: /show in range/i })).toBeInTheDocument();\n  });\n\n  it('displays in-range events again when \"show in range\" is clicked', () => {\n    render(<AccordionEvents {...defaultProps} isOpen />);\n    fireEvent.click(screen.getByRole('button', { name: /show all/i }));\n    fireEvent.click(screen.getByRole('button', { name: /show in range/i }));\n    expect(screen.getByRole('switch')).toHaveTextContent(\n      `Logs (${defaultInRangeLogsCount} of ${defaultTotalCount})`\n    );\n    const items = screen.getAllByTestId('event-item');\n    expect(items.length).toBe(defaultInRangeLogsCount);\n    expect(screen.getByRole('button', { name: /show all/i })).toBeInTheDocument();\n  });\n\n  it('is interactive by default', () => {\n    const { interactive, ...propsWithoutInteractive } = defaultProps;\n    render(<AccordionEvents {...propsWithoutInteractive} isOpen />);\n\n    const header = screen.getByRole('switch');\n    expect(header).toBeInTheDocument();\n    fireEvent.click(header);\n    expect(propsWithoutInteractive.onToggle).toHaveBeenCalledTimes(1);\n    expect(mockAccordionAttributes).toHaveBeenCalledTimes(defaultInRangeLogsCount);\n\n    mockAccordionAttributes.mock.calls.forEach(callArgs => {\n      const childProps = callArgs[0];\n      expect(childProps.interactive).toBe(true);\n      expect(childProps.onToggle).toBeInstanceOf(Function);\n    });\n  });\n\n  it('dispatches events and handles show more/less functionality', () => {\n    jest.useFakeTimers();\n    const originalDispatchEvent = window.dispatchEvent;\n    const mockDispatchEvent = jest.fn();\n    window.dispatchEvent = mockDispatchEvent;\n\n    const manyLogs = Array.from({ length: 5 }, (_, i) => ({\n      timestamp: 10 + i,\n      name: 'event',\n      attributes: [{ key: 'message', value: `event ${i}` }],\n    }));\n\n    const propsWithManyLogs = {\n      ...defaultProps,\n      events: manyLogs,\n      currentViewRangeTime: [0.0, 1.0],\n      initialVisibleCount: 3,\n      spanID: 'test-span-123',\n    };\n\n    const { unmount } = render(<AccordionEvents {...propsWithManyLogs} isOpen />);\n    const showMoreButton = screen.getByRole('button', { name: /show more.../i });\n    fireEvent.click(showMoreButton);\n    jest.runAllTimers();\n\n    expect(mockDispatchEvent).toHaveBeenCalledWith(\n      expect.objectContaining({\n        type: 'jaeger:detail-measure',\n        detail: { spanID: 'test-span-123' },\n      })\n    );\n\n    const showLessButton = screen.getByRole('button', { name: /show less/i });\n    fireEvent.click(showLessButton);\n\n    unmount();\n\n    mockDispatchEvent.mockClear();\n    const propsWithoutSpanID = { ...propsWithManyLogs, spanID: undefined };\n    render(<AccordionEvents {...propsWithoutSpanID} isOpen />);\n    const showMoreButton2 = screen.getByRole('button', { name: /show more.../i });\n    fireEvent.click(showMoreButton2);\n\n    jest.runAllTimers();\n\n    expect(mockDispatchEvent).toHaveBeenCalledWith(expect.objectContaining({ type: 'jaeger:list-resize' }));\n\n    window.dispatchEvent = originalDispatchEvent;\n    jest.useRealTimers();\n  });\n\n  it('handles observer cleanup and errors', () => {\n    const originalResizeObserver = window.ResizeObserver;\n    const originalMutationObserver = window.MutationObserver;\n    const mockResizeObserver = {\n      observe: jest.fn(),\n      disconnect: jest.fn(() => {\n        throw new Error('disconnect error');\n      }),\n    };\n    window.ResizeObserver = jest.fn(() => mockResizeObserver);\n\n    const { unmount: unmount1 } = render(<AccordionEvents {...defaultProps} isOpen />);\n    expect(mockResizeObserver.observe).toHaveBeenCalled();\n    expect(() => unmount1()).not.toThrow();\n\n    window.ResizeObserver = undefined;\n    const mockMutationObserver = {\n      observe: jest.fn(),\n      disconnect: jest.fn(() => {\n        throw new Error('mutation disconnect error');\n      }),\n    };\n    window.MutationObserver = jest.fn(() => mockMutationObserver);\n\n    const { unmount: unmount2 } = render(<AccordionEvents {...defaultProps} isOpen />);\n    expect(() => unmount2()).not.toThrow();\n\n    window.ResizeObserver = originalResizeObserver;\n    window.MutationObserver = originalMutationObserver;\n  });\n});\n\ndescribe('<AccordionEvents> OTEL specifics', () => {\n  const events = [\n    {\n      timestamp: 10,\n      name: 'otel-event-name',\n      attributes: [],\n    },\n  ];\n\n  const defaultProps = {\n    events,\n    isOpen: true,\n    onItemToggle: jest.fn(),\n    onToggle: jest.fn(),\n    timestamp: 0,\n    traceDuration: 100,\n    currentViewRangeTime: [0.0, 1.0],\n    interactive: true,\n    useOtelTerms: true,\n  };\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  it('includes event name in label when useOtelTerms is true', () => {\n    render(<AccordionEvents {...defaultProps} />);\n    expect(mockAccordionAttributes).toHaveBeenCalledWith(\n      expect.objectContaining({\n        label: expect.stringContaining('otel-event-name'),\n      })\n    );\n  });\n\n  it('passes correct props for events with no attributes', () => {\n    render(<AccordionEvents {...defaultProps} />);\n    expect(mockAccordionAttributes).toHaveBeenCalledWith(\n      expect.objectContaining({\n        data: [],\n        interactive: true,\n      })\n    );\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/SpanDetail/AccordionEvents.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/SpanDetail/AccordionLinks.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/SpanDetail/AccordionLinks.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/SpanDetail/AccordionText.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/SpanDetail/AccordionText.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/SpanDetail/AttributesTable.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/SpanDetail/AttributesTable.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_' is defined but never used.","line":24,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":24,"endColumn":13},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":33,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1114,1117],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1114,1117],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":66,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":66,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1841,1844],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1841,1844],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2017 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport * as React from 'react';\nimport { Dropdown, Tooltip } from 'antd';\nimport { IoOpenOutline, IoList, IoCopyOutline, IoInformationCircleOutline } from 'react-icons/io5';\nimport { JsonView, allExpanded, collapseAllNested, defaultStyles } from 'react-json-view-lite';\n\nimport CopyIcon from '../../../common/CopyIcon';\n\nimport { TNil } from '../../../../types';\nimport { Hyperlink } from '../../../../types/hyperlink';\nimport { IAttribute } from '../../../../types/otel';\n\nimport './AttributesTable.css';\n\nconst jsonObjectOrArrayStartRegex = /^(\\[|\\{)/;\n\nfunction tryParseJson(value: string) {\n  // if the value is a string representing actual json object or array, then use json-markup\n  // otherwise just return as is\n  try {\n    return jsonObjectOrArrayStartRegex.test(value) ? JSON.parse(value) : value;\n  } catch (_) {\n    return value;\n  }\n}\n\nfunction shouldDisplayAsStringList(key: string) {\n  return key.startsWith('http.request.header.') || key.startsWith('http.response.header.');\n}\n\nconst stringListMarkup = (value: any[]) => (\n  <div className=\"json-markup\">\n    {value.map((item, i) => (\n      <React.Fragment key={i}>\n        {i > 0 && ', '}\n        <span className=\"json-markup-string\">{item}</span>\n      </React.Fragment>\n    ))}\n  </div>\n);\n\nconst scalarMarkup = (value: string | number | boolean) => {\n  let className;\n  switch (typeof value) {\n    case 'boolean': {\n      className = 'json-markup-bool';\n      break;\n    }\n    case 'number': {\n      className = 'json-markup-number';\n      break;\n    }\n    default: {\n      className = 'json-markup-string';\n    }\n  }\n  return (\n    <div className=\"json-markup\">\n      <span className={className}>{value.toString()}</span>\n    </div>\n  );\n};\n\nfunction formatValue(key: string, value: any) {\n  let content;\n  let parsed = value;\n\n  if (typeof value === 'string') {\n    parsed = tryParseJson(value);\n  }\n\n  if (Array.isArray(parsed) && shouldDisplayAsStringList(key)) {\n    content = stringListMarkup(parsed);\n  } else if (typeof parsed === 'object') {\n    const shouldJsonTreeExpand = Object.keys(parsed).length <= 10;\n    content = (\n      <JsonView\n        data={parsed}\n        shouldExpandNode={shouldJsonTreeExpand ? allExpanded : collapseAllNested}\n        style={{\n          ...defaultStyles,\n          container: 'json-markup',\n          label: 'json-markup-key',\n          stringValue: 'json-markup-string',\n          collapseIcon: 'json-markup-icon-collapse',\n          collapsedContent: 'json-markup-collapse-content',\n          expandIcon: 'json-markup-icon-expand',\n          numberValue: 'json-markup-number',\n          booleanValue: 'json-markup-bool',\n          nullValue: 'json-markup-null',\n          undefinedValue: 'json-markup-undefined',\n          basicChildStyle: 'json-markup-child',\n          punctuation: 'json-markup-puncuation',\n          otherValue: 'json-markup-other',\n        }}\n      />\n    );\n  } else {\n    content = scalarMarkup(parsed);\n  }\n\n  return <div className=\"ub-inline-block\">{content}</div>;\n}\n\nexport const LinkValue = (props: { href: string; title?: string; children: React.ReactNode }) => (\n  <a href={props.href} title={props.title || ''} target=\"_blank\" rel=\"noopener noreferrer\">\n    {props.children} <IoOpenOutline className=\"KeyValueTable--linkIcon\" />\n  </a>\n);\n\nconst linkValueList = (links: Hyperlink[]) => {\n  return links.map(({ text, url }, index) => ({\n    label: <LinkValue href={url}>{text}</LinkValue>,\n    key: `${url}-${index}`,\n  }));\n};\n\ntype AttributesTableProps = {\n  data: ReadonlyArray<IAttribute>;\n  linksGetter: ((pairs: ReadonlyArray<IAttribute>, index: number) => Hyperlink[]) | TNil;\n};\n\n// AttributesTable is displayed as a menu at span level.\n// Example: https://github.com/jaegertracing/jaeger-ui/assets/94157520/b518cad9-cb37-4775-a3d6-b667a1235f89\nexport default function AttributesTable(props: AttributesTableProps) {\n  const { data, linksGetter } = props;\n\n  return (\n    <div className=\"KeyValueTable u-simple-scrollbars\">\n      <table className=\"u-width-100\">\n        <tbody className=\"KeyValueTable--body\">\n          {data.map((row, i) => {\n            const jsonTable = formatValue(row.key, row.value);\n            const links = linksGetter ? linksGetter(data, i) : null;\n            let valueMarkup;\n            if (links?.length === 1) {\n              valueMarkup = (\n                <div>\n                  <LinkValue href={links[0].url} title={links[0].text}>\n                    {jsonTable}\n                  </LinkValue>\n                </div>\n              );\n            } else if (links && links.length > 1) {\n              valueMarkup = (\n                <div>\n                  <Dropdown\n                    menu={{ items: linkValueList(links) }}\n                    placement=\"bottomRight\"\n                    trigger={['click']}\n                  >\n                    <a>\n                      {jsonTable} <IoList className=\"KeyValueTable--linkIcon\" />\n                    </a>\n                  </Dropdown>\n                </div>\n              );\n            } else {\n              valueMarkup = jsonTable;\n            }\n            const isOtel = row.key.startsWith('otel.');\n            const keyMarkup = isOtel ? (\n              <span style={{ color: '#666', fontStyle: 'italic' }} className=\"is-otel-key\">\n                {row.key}\n                <Tooltip title=\"Synthetic Attribute: This tag was generated to map OpenTelemetry semantics to the Jaeger data model. It may not be searchable in the storage directly.\">\n                  <IoInformationCircleOutline\n                    style={{ marginLeft: '5px', verticalAlign: 'text-bottom', cursor: 'help' }}\n                  />\n                </Tooltip>\n              </span>\n            ) : (\n              row.key\n            );\n\n            return (\n              // `i` is necessary in the key because row.key can repeat\n              <tr className=\"KeyValueTable--row\" key={`${row.key}-${i}`}>\n                <td className=\"KeyValueTable--keyColumn\">{keyMarkup}</td>\n                <td className=\"KeyValueTable--valueColumn\">\n                  <div className=\"KeyValueTable--copyContainer\">\n                    <CopyIcon\n                      className=\"KeyValueTable--copyIcon\"\n                      copyText={String(row.value)}\n                      tooltipTitle=\"Copy value\"\n                      buttonText=\"Copy\"\n                    />\n                    <CopyIcon\n                      className=\"KeyValueTable--copyIcon\"\n                      icon={<IoCopyOutline />}\n                      copyText={JSON.stringify(row, null, 2)}\n                      tooltipTitle=\"Copy JSON\"\n                      buttonText=\"JSON\"\n                    />\n                  </div>\n                  {valueMarkup}\n                </td>\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/SpanDetail/DetailState.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/SpanDetail/TextList.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/SpanDetail/TextList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/SpanDetail/index.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/SpanDetail/index.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'eventsLabel' is assigned a value but never used.","line":67,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":67,"endColumn":20}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2017 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react';\nimport { Divider } from 'antd';\n\nimport { IoLinkOutline } from 'react-icons/io5';\nimport AccordionAttributes from './AccordionAttributes';\nimport AccordionEvents from './AccordionEvents';\nimport AccordionLinks from './AccordionLinks';\nimport AccordionText from './AccordionText';\nimport DetailState from './DetailState';\nimport { formatDuration } from '../utils';\nimport CopyIcon from '../../../common/CopyIcon';\nimport LabeledList from '../../../common/LabeledList';\n\nimport { TNil } from '../../../../types';\nimport { Hyperlink } from '../../../../types/hyperlink';\nimport { IOtelSpan, IAttribute, IEvent } from '../../../../types/otel';\n\nimport './index.css';\n\ntype SpanDetailProps = {\n  detailState: DetailState;\n  linksGetter: ((links: ReadonlyArray<IAttribute>, index: number) => Hyperlink[]) | TNil;\n  eventItemToggle: (spanID: string, event: IEvent) => void;\n  eventsToggle: (spanID: string) => void;\n  resourceToggle: (spanID: string) => void;\n  span: IOtelSpan;\n  attributesToggle: (spanID: string) => void;\n  traceStartTime: number;\n  warningsToggle: (spanID: string) => void;\n  linksToggle: (spanID: string) => void;\n  focusSpan: (uiFind: string) => void;\n  currentViewRangeTime: [number, number];\n  traceDuration: number;\n  useOtelTerms: boolean;\n};\n\nexport default function SpanDetail(props: SpanDetailProps) {\n  const {\n    detailState,\n    linksGetter,\n    eventItemToggle,\n    eventsToggle,\n    resourceToggle,\n    span,\n    attributesToggle,\n    traceStartTime,\n    warningsToggle,\n    linksToggle,\n    focusSpan,\n    currentViewRangeTime,\n    traceDuration,\n    useOtelTerms,\n  } = props;\n\n  const { isAttributesOpen, isResourceOpen, events: eventsState, isWarningsOpen, isLinksOpen } = detailState;\n  const warnings = span.warnings;\n\n  // Get links for display in AccordionLinks\n  const links = span.links || [];\n\n  // Display labels based on terminology flag\n  const attributesLabel = useOtelTerms ? 'Attributes' : 'Tags';\n  const resourceLabel = useOtelTerms ? 'Resource' : 'Process';\n  const eventsLabel = useOtelTerms ? 'Events' : 'Logs';\n\n  const overviewItems = [\n    {\n      key: 'svc',\n      label: 'Service:',\n      value: span.resource.serviceName,\n    },\n    {\n      key: 'duration',\n      label: 'Duration:',\n      value: formatDuration(span.duration),\n    },\n    {\n      key: 'start',\n      label: 'Start Time:',\n      value: formatDuration(span.relativeStartTime),\n    },\n  ];\n  const deepLinkCopyText = `${window.location.origin}${window.location.pathname}?uiFind=${span.spanID}`;\n\n  return (\n    <div>\n      <div className=\"ub-flex ub-items-center\">\n        <h2 className=\"ub-flex-auto ub-m0\">{span.name}</h2>\n        <LabeledList\n          className=\"ub-tx-right-align\"\n          dividerClassName=\"SpanDetail--divider\"\n          items={overviewItems}\n        />\n      </div>\n      <Divider className=\"SpanDetail--divider ub-my1\" />\n      <div>\n        <div>\n          <AccordionAttributes\n            data={span.attributes}\n            label={attributesLabel}\n            linksGetter={linksGetter}\n            isOpen={isAttributesOpen}\n            onToggle={() => attributesToggle(span.spanID)}\n          />\n          {span.resource.attributes && span.resource.attributes.length > 0 && (\n            <AccordionAttributes\n              className=\"ub-mb1\"\n              data={span.resource.attributes}\n              label={resourceLabel}\n              linksGetter={linksGetter}\n              isOpen={isResourceOpen}\n              onToggle={() => resourceToggle(span.spanID)}\n            />\n          )}\n        </div>\n        {span.events && span.events.length > 0 && (\n          <AccordionEvents\n            linksGetter={linksGetter}\n            events={span.events}\n            isOpen={eventsState.isOpen}\n            openedItems={eventsState.openedItems}\n            onToggle={() => eventsToggle(span.spanID)}\n            onItemToggle={eventItem => eventItemToggle(span.spanID, eventItem)}\n            timestamp={traceStartTime}\n            currentViewRangeTime={currentViewRangeTime}\n            traceDuration={traceDuration}\n            spanID={span.spanID}\n            useOtelTerms={useOtelTerms}\n          />\n        )}\n        {warnings && warnings.length > 0 && (\n          <AccordionText\n            className=\"AccordianWarnings\"\n            headerClassName=\"AccordianWarnings--header\"\n            label={<span className=\"AccordianWarnings--label\">Warnings</span>}\n            data={warnings}\n            isOpen={isWarningsOpen}\n            onToggle={() => warningsToggle(span.spanID)}\n          />\n        )}\n        {links && links.length > 0 && (\n          <AccordionLinks\n            data={links}\n            isOpen={isLinksOpen}\n            onToggle={() => linksToggle(span.spanID)}\n            focusSpan={focusSpan}\n            useOtelTerms={useOtelTerms}\n          />\n        )}\n        <small className=\"SpanDetail--debugInfo\">\n          <span className=\"SpanDetail--debugLabel\" data-label=\"SpanID:\" /> {span.spanID}\n          <CopyIcon\n            copyText={deepLinkCopyText}\n            icon={<IoLinkOutline />}\n            placement=\"topRight\"\n            tooltipTitle=\"Copy deep link to this span\"\n            buttonText=\"Copy\"\n          />\n        </small>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/SpanDetailRow.integration.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/SpanDetailRow.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/SpanDetailRow.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/SpanTreeOffset.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/SpanTreeOffset.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'IoChevronDown' is defined but never used.","line":7,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'IoChevronForward' is defined but never used.","line":7,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":41},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'spanAncestorIds' is defined but never used.","line":14,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'hoverIndentGuideIds' is defined but never used.","line":40,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":40,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isRootSpan' is assigned a value but never used.","line":98,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":98,"endColumn":19},{"ruleId":"jsx-a11y/no-static-element-interactions","severity":1,"message":"Avoid non-native interactive elements. If using native HTML is not possible, add an appropriate role and support for tabbing, mouse, keyboard, and touch inputs to an interactive content element.","line":131,"column":11,"nodeType":"JSXOpeningElement","endLine":144,"endColumn":12},{"ruleId":"jsx-a11y/no-static-element-interactions","severity":1,"message":"Avoid non-native interactive elements. If using native HTML is not possible, add an appropriate role and support for tabbing, mouse, keyboard, and touch inputs to an interactive content element.","line":152,"column":9,"nodeType":"JSXOpeningElement","endLine":159,"endColumn":10}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2017 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React, { useMemo } from 'react';\nimport cx from 'classnames';\nimport _get from 'lodash/get';\nimport { IoChevronDown, IoChevronForward } from 'react-icons/io5';\nimport { connect } from 'react-redux';\nimport { bindActionCreators, Dispatch } from 'redux';\n\nimport { actions } from './duck';\nimport { ReduxState } from '../../../types';\nimport { IOtelSpan } from '../../../types/otel';\nimport spanAncestorIds from '../../../utils/span-ancestor-ids';\nimport colorGenerator from '../../../utils/color-generator';\n\nimport './SpanTreeOffset.css';\n\ntype TDispatchProps = {\n  addHoverIndentGuideId: (spanID: string) => void;\n  removeHoverIndentGuideId: (spanID: string) => void;\n};\n\ntype TProps = {\n  addHoverIndentGuideId: (spanID: string) => void;\n  hoverIndentGuideIds: Set<string>;\n  removeHoverIndentGuideId: (spanID: string) => void;\n  childrenVisible?: boolean;\n  onClick?: () => void;\n  showChildrenIcon?: boolean;\n  span: IOtelSpan;\n  color: string;\n};\n\nexport const UnconnectedSpanTreeOffset: React.FC<TProps> = ({\n  childrenVisible = false,\n  onClick = undefined,\n  showChildrenIcon = true,\n  span,\n  hoverIndentGuideIds,\n  addHoverIndentGuideId,\n  removeHoverIndentGuideId,\n  color,\n}) => {\n  // Build ancestor chain directly from span.parentSpan\n  const ancestors = useMemo(() => {\n    const chain: IOtelSpan[] = [];\n    let current = span.parentSpan;\n    while (current) {\n      chain.unshift(current);\n      current = current.parentSpan;\n    }\n    return chain;\n  }, [span]);\n\n  /**\n   * If the mouse leaves to anywhere except another span with the same ancestor id, this span's ancestor id is\n   * removed from the set of hoverIndentGuideIds.\n   *\n   * @param {Object} event - React Synthetic event tied to mouseleave. Includes the related target which is\n   *     the element the user is now hovering.\n   * @param {string} ancestorId - The span id that the user was hovering over.\n   */\n  const handleMouseLeave = (event: React.MouseEvent<HTMLSpanElement>, ancestorId: string) => {\n    if (\n      !(event.relatedTarget instanceof HTMLSpanElement) ||\n      _get(event, 'relatedTarget.dataset.ancestorId') !== ancestorId\n    ) {\n      removeHoverIndentGuideId(ancestorId);\n    }\n  };\n\n  /**\n   * If the mouse entered this span from anywhere except another span with the same ancestor id, this span's\n   * ancestorId is added to the set of hoverIndentGuideIds.\n   *\n   * @param {Object} event - React Synthetic event tied to mouseenter. Includes the related target which is\n   *     the last element the user was hovering.\n   * @param {string} ancestorId - The span id that the user is now hovering over.\n   */\n  const handleMouseEnter = (event: React.MouseEvent<HTMLSpanElement>, ancestorId: string) => {\n    if (\n      !(event.relatedTarget instanceof HTMLSpanElement) ||\n      _get(event, 'relatedTarget.dataset.ancestorId') !== ancestorId\n    ) {\n      addHoverIndentGuideId(ancestorId);\n    }\n  };\n\n  const { hasChildren, spanID, childSpans } = span;\n  const wrapperProps = hasChildren ? { onClick, role: 'switch', 'aria-checked': childrenVisible } : null;\n\n  // Get parent color for horizontal line\n  const parentSpan = span.parentSpan;\n  const parentColor = parentSpan ? colorGenerator.getColorByKey(parentSpan.resource.serviceName) : color;\n\n  // Check if this is a root span (no parent)\n  const isRootSpan = !parentSpan;\n\n  // Check if this span is the last child of its parent\n  const isLastChild = parentSpan\n    ? parentSpan.childSpans[parentSpan.childSpans.length - 1]?.spanID === spanID\n    : false;\n\n  return (\n    <span className={`SpanTreeOffset ${hasChildren ? 'is-parent' : ''}`} {...wrapperProps}>\n      {ancestors.map((ancestor, index) => {\n        // Determine the color for this indent guide based on the ancestor\n        const guideColor = colorGenerator.getColorByKey(ancestor.resource.serviceName);\n        const isLastAncestor = index === ancestors.length - 1;\n\n        // For the immediate parent: check if current span is last child\n        // For non-immediate ancestors: check if the ancestor's branch has terminated\n        // (i.e., the descendant of this ancestor in the chain is the last child of its parent)\n        let shouldTerminate = false;\n\n        if (isLastAncestor) {\n          // For immediate parent, check if current span is last child\n          shouldTerminate = isLastChild;\n        } else {\n          // For non-immediate ancestors, check if their descendant in the chain is the last child\n          // The descendant of this ancestor in the chain is at index + 1\n          const descendantInChain = ancestors[index + 1];\n          if (descendantInChain && descendantInChain.parentSpan) {\n            const parentChildren = descendantInChain.parentSpan.childSpans;\n            shouldTerminate = parentChildren[parentChildren.length - 1]?.spanID === descendantInChain.spanID;\n          }\n        }\n\n        return (\n          <span\n            key={ancestor.spanID}\n            className={cx('SpanTreeOffset--indentGuide', {\n              'is-last': isLastAncestor && isLastChild,\n              'is-terminated': !isLastAncestor && shouldTerminate,\n            })}\n            style={{\n              color: guideColor,\n            }}\n            data-ancestor-id={ancestor.spanID}\n            data-testid={`indent-guide-${ancestor.spanID}`}\n            onMouseEnter={event => handleMouseEnter(event, ancestor.spanID)}\n            onMouseLeave={event => handleMouseLeave(event, ancestor.spanID)}\n          >\n            {isLastAncestor && (\n              <span className=\"SpanTreeOffset--horizontalLine\" style={{ backgroundColor: parentColor }} />\n            )}\n          </span>\n        );\n      })}\n      {showChildrenIcon && (\n        <span\n          className={cx('SpanTreeOffset--iconWrapper', {\n            'is-collapsed': !childrenVisible,\n          })}\n          data-testid=\"icon-wrapper\"\n          onMouseEnter={event => handleMouseEnter(event, spanID)}\n          onMouseLeave={event => handleMouseLeave(event, spanID)}\n        >\n          {hasChildren ? (\n            <span\n              className={cx('SpanTreeOffset--box', {\n                'is-collapsed': !childrenVisible,\n              })}\n              style={{\n                borderColor: color,\n                backgroundColor: !childrenVisible ? color : undefined,\n              }}\n            >\n              {childSpans.length}\n            </span>\n          ) : (\n            <span className=\"SpanTreeOffset--dot\" style={{ backgroundColor: color }} />\n          )}\n        </span>\n      )}\n    </span>\n  );\n};\n\nexport function mapStateToProps(state: ReduxState): { hoverIndentGuideIds: Set<string> } {\n  const { hoverIndentGuideIds } = state.traceTimeline;\n  return { hoverIndentGuideIds };\n}\n\nexport function mapDispatchToProps(dispatch: Dispatch<ReduxState>): TDispatchProps {\n  const { addHoverIndentGuideId, removeHoverIndentGuideId } = bindActionCreators(actions, dispatch);\n  return { addHoverIndentGuideId, removeHoverIndentGuideId };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UnconnectedSpanTreeOffset);\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/Ticks.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/Ticks.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/TimelineHeaderRow/TimelineCollapser.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/TimelineHeaderRow/TimelineCollapser.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/TimelineHeaderRow/TimelineHeaderRow.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/TimelineHeaderRow/TimelineHeaderRow.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/TimelineHeaderRow/TimelineViewingLayer.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/TimelineHeaderRow/TimelineViewingLayer.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":19,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[689,692],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[689,692],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2017 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport * as React from 'react';\nimport cx from 'classnames';\n\nimport { TUpdateViewRangeTimeFunction, IViewRangeTime, ViewRangeTimeUpdate } from '../../types';\nimport { TNil } from '../../../../types';\nimport DraggableManager, { DraggableBounds, DraggingUpdate } from '../../../../utils/DraggableManager';\n\nimport './TimelineViewingLayer.css';\n\ntype TimelineViewingLayerProps = {\n  /**\n   * `boundsInvalidator` is an arbitrary prop that lets the component know the\n   * bounds for dragging need to be recalculated. In practice, the name column\n   * width serves fine for this.\n   */\n  boundsInvalidator: any | null | undefined;\n  updateNextViewRangeTime: (update: ViewRangeTimeUpdate) => void;\n  updateViewRangeTime: TUpdateViewRangeTimeFunction;\n  viewRangeTime: IViewRangeTime;\n};\n\ntype TDraggingLeftLayout = {\n  isDraggingLeft: boolean;\n  left: string;\n  width: string;\n};\n\ntype TOutOfViewLayout = {\n  isOutOfView: true;\n};\n\nfunction isOutOfView(layout: TDraggingLeftLayout | TOutOfViewLayout): layout is TOutOfViewLayout {\n  return Reflect.has(layout, 'isOutOfView');\n}\n\n/**\n * Map from a sub range to the greater view range, e.g, when the view range is\n * the middle half ([0.25, 0.75]), a value of 0.25 befomes 3/8.\n * @returns {number}\n */\nfunction mapFromViewSubRange(viewStart: number, viewEnd: number, value: number) {\n  return viewStart + value * (viewEnd - viewStart);\n}\n\n/**\n * Map a value from the view ([0, 1]) to a sub-range, e.g, when the view range is\n * the middle half ([0.25, 0.75]), a value of 3/8 becomes 1/4.\n * @returns {number}\n */\nfunction mapToViewSubRange(viewStart: number, viewEnd: number, value: number) {\n  return (value - viewStart) / (viewEnd - viewStart);\n}\n\n/**\n * Get the layout for the \"next\" view range time, e.g. the difference from the\n * drag start and the drag end. This is driven by `shiftStart`, `shiftEnd` or\n * `reframe` on `props.viewRangeTime`, not by the current state of the\n * component. So, it reflects in-progress dragging from the span minimap.\n */\nfunction getNextViewLayout(start: number, position: number): TDraggingLeftLayout | TOutOfViewLayout {\n  let [left, right] = start < position ? [start, position] : [position, start];\n  if (left >= 1 || right <= 0) {\n    return { isOutOfView: true };\n  }\n  if (left < 0) {\n    left = 0;\n  }\n  if (right > 1) {\n    right = 1;\n  }\n  return {\n    isDraggingLeft: start > position,\n    left: `${left * 100}%`,\n    width: `${(right - left) * 100}%`,\n  };\n}\n\n/**\n * Render the visual indication of the \"next\" view range.\n */\nfunction getMarkers(\n  viewStart: number,\n  viewEnd: number,\n  from: number,\n  to: number,\n  isShift: boolean\n): React.ReactNode {\n  const mappedFrom = mapToViewSubRange(viewStart, viewEnd, from);\n  const mappedTo = mapToViewSubRange(viewStart, viewEnd, to);\n  const layout = getNextViewLayout(mappedFrom, mappedTo);\n  if (isOutOfView(layout)) {\n    return null;\n  }\n  const { isDraggingLeft, left, width } = layout;\n  const cls = cx({\n    isDraggingLeft,\n    isDraggingRight: !isDraggingLeft,\n    isReframeDrag: !isShift,\n    isShiftDrag: isShift,\n  });\n  return <div className={`TimelineViewingLayer--dragged ${cls}`} style={{ left, width }} />;\n}\n\n/**\n * `TimelineViewingLayer` is rendered on top of the TimelineHeaderRow time\n * labels; it handles showing the current view range and handles mouse UX for\n * modifying it.\n */\nexport default class TimelineViewingLayer extends React.PureComponent<TimelineViewingLayerProps> {\n  _draggerReframe: DraggableManager;\n  _root = React.createRef<HTMLDivElement>();\n\n  constructor(props: TimelineViewingLayerProps) {\n    super(props);\n    this._draggerReframe = new DraggableManager({\n      getBounds: this._getDraggingBounds,\n      onDragEnd: this._handleReframeDragEnd,\n      onDragMove: this._handleReframeDragUpdate,\n      onDragStart: this._handleReframeDragUpdate,\n      onMouseLeave: this._handleReframeMouseLeave,\n      onMouseMove: this._handleReframeMouseMove,\n    });\n  }\n\n  componentDidUpdate(prevProps: Readonly<TimelineViewingLayerProps>) {\n    const { boundsInvalidator } = this.props;\n    if (prevProps.boundsInvalidator !== boundsInvalidator) {\n      this._draggerReframe.resetBounds();\n    }\n  }\n\n  componentWillUnmount() {\n    this._draggerReframe.dispose();\n  }\n\n  _getDraggingBounds = (): DraggableBounds => {\n    const current = this._root.current;\n    if (!current) {\n      throw new Error('Component must be mounted in order to determine DraggableBounds');\n    }\n    const { left: clientXLeft, width } = current.getBoundingClientRect();\n    return { clientXLeft, width };\n  };\n\n  _handleReframeMouseMove = ({ value }: DraggingUpdate) => {\n    const [viewStart, viewEnd] = this.props.viewRangeTime.current;\n    const cursor = mapFromViewSubRange(viewStart, viewEnd, value);\n    this.props.updateNextViewRangeTime({ cursor });\n  };\n\n  _handleReframeMouseLeave = () => {\n    this.props.updateNextViewRangeTime({ cursor: undefined });\n  };\n\n  _getAnchorAndShift = (value: number) => {\n    const { current, reframe } = this.props.viewRangeTime;\n    const [viewStart, viewEnd] = current;\n    const shift = mapFromViewSubRange(viewStart, viewEnd, value);\n    const anchor = reframe ? reframe.anchor : shift;\n    return { anchor, shift };\n  };\n\n  _handleReframeDragUpdate = ({ value }: DraggingUpdate) => {\n    const { anchor, shift } = this._getAnchorAndShift(value);\n    const update = { reframe: { anchor, shift } };\n    this.props.updateNextViewRangeTime(update);\n  };\n\n  _handleReframeDragEnd = ({ manager, value }: DraggingUpdate) => {\n    const { anchor, shift } = this._getAnchorAndShift(value);\n    const [start, end] = shift < anchor ? [shift, anchor] : [anchor, shift];\n    manager.resetBounds();\n    this.props.updateViewRangeTime(start, end, 'timeline-header');\n  };\n\n  render() {\n    const { viewRangeTime } = this.props;\n    const { current, cursor, reframe, shiftEnd, shiftStart } = viewRangeTime;\n    const [viewStart, viewEnd] = current;\n    const haveNextTimeRange = reframe != null || shiftEnd != null || shiftStart != null;\n    let cusrorPosition: string | TNil;\n    if (!haveNextTimeRange && cursor != null && cursor >= viewStart && cursor <= viewEnd) {\n      cusrorPosition = `${mapToViewSubRange(viewStart, viewEnd, cursor) * 100}%`;\n    }\n    return (\n      <div\n        aria-hidden\n        className=\"TimelineViewingLayer\"\n        ref={this._root}\n        onMouseDown={this._draggerReframe.handleMouseDown}\n        onMouseLeave={this._draggerReframe.handleMouseLeave}\n        onMouseMove={this._draggerReframe.handleMouseMove}\n      >\n        {cusrorPosition != null && (\n          <div className=\"TimelineViewingLayer--cursorGuide\" style={{ left: cusrorPosition }} />\n        )}\n        {reframe != null && getMarkers(viewStart, viewEnd, reframe.anchor, reframe.shift, false)}\n        {shiftEnd != null && getMarkers(viewStart, viewEnd, viewEnd, shiftEnd, true)}\n        {shiftStart != null && getMarkers(viewStart, viewEnd, viewStart, shiftStart, true)}\n      </div>\n    );\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/TimelineHeaderRow/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/TimelineRow.tsx","messages":[{"ruleId":"jsx-a11y/no-static-element-interactions","severity":1,"message":"Avoid non-native interactive elements. If using native HTML is not possible, add an appropriate role and support for tabbing, mouse, keyboard, and touch inputs to an interactive content element.","line":34,"column":5,"nodeType":"JSXOpeningElement","endLine":34,"endColumn":93}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2017 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport * as React from 'react';\n\nimport './TimelineRow.css';\n\nexport default function TimelineRow({\n  children,\n  className,\n}: {\n  children: React.ReactNode;\n  className?: string;\n}) {\n  return <div className={`flex-row ${className || ''}`}>{children}</div>;\n}\n\nfunction TimelineRowCell({\n  children,\n  className,\n  width,\n  style = {},\n  onClick = () => {},\n}: {\n  children: React.ReactNode;\n  className?: string;\n  width: number;\n  style?: object;\n  onClick?: (event: React.MouseEvent<HTMLDivElement>) => void;\n}) {\n  const widthPercent = `${width * 100}%`;\n  const mergedStyle = { ...style, flexBasis: widthPercent, maxWidth: widthPercent };\n  return (\n    <div className={`ub-relative ${className || ''}`} style={mergedStyle} onClick={onClick}>\n      {children}\n    </div>\n  );\n}\n\nTimelineRow.Cell = TimelineRowCell;\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/VirtualizedTraceView.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/VirtualizedTraceView.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":219,"column":83,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":219,"endColumn":86,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6576,6579],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6576,6579],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":266,"column":86,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":266,"endColumn":89,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8139,8142],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8139,8142],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":602,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":602,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18927,18930],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18927,18930],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2017 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport * as React from 'react';\nimport cx from 'classnames';\nimport { connect } from 'react-redux';\nimport { bindActionCreators, Dispatch } from 'redux';\nimport _isEqual from 'lodash/isEqual';\nimport _groupBy from 'lodash/groupBy';\n\n// import { History as RouterHistory, Location } from 'history';\n\nimport memoizeOne from 'memoize-one';\nimport { Location, History } from 'history';\nimport { actions } from './duck';\nimport ListView from './ListView';\nimport SpanBarRow from './SpanBarRow';\nimport DetailState from './SpanDetail/DetailState';\nimport SpanDetailRow from './SpanDetailRow';\nimport {\n  createViewedBoundsFunc,\n  ViewedBoundsFunctionType,\n  findServerChildSpan,\n  isErrorSpan,\n  isKindClient,\n  isKindProducer,\n  spanContainsErredSpan,\n} from './utils';\nimport { Accessors } from '../ScrollManager';\nimport { extractUiFindFromState, TExtractUiFindFromStateReturn } from '../../common/UiFindInput';\nimport getLinks from '../../../model/link-patterns';\nimport colorGenerator from '../../../utils/color-generator';\nimport { TNil, ReduxState } from '../../../types';\nimport { CriticalPathSection } from '../../../types/critical_path';\nimport { IOtelSpan, IOtelTrace, IAttribute, IEvent } from '../../../types/otel';\nimport TTraceTimeline from '../../../types/TTraceTimeline';\n\nimport './VirtualizedTraceView.css';\nimport updateUiFind from '../../../utils/update-ui-find';\nimport { PEER_SERVICE } from '../../../constants/tag-keys';\nimport withRouteProps from '../../../utils/withRouteProps';\n\ntype RowState = {\n  isDetail: boolean;\n  span: IOtelSpan;\n  spanIndex: number;\n};\n\ntype TVirtualizedTraceViewOwnProps = {\n  currentViewRangeTime: [number, number];\n  findMatchesIDs: Set<string> | TNil;\n  scrollToFirstVisibleSpan: () => void;\n  registerAccessors: (accesors: Accessors) => void;\n  trace: IOtelTrace;\n  criticalPath: CriticalPathSection[];\n  useOtelTerms: boolean;\n};\n\ntype TDispatchProps = {\n  childrenToggle: (spanID: string) => void;\n  clearShouldScrollToFirstUiFindMatch: () => void;\n  detailLogItemToggle: (spanID: string, log: IEvent) => void;\n  detailLogsToggle: (spanID: string) => void;\n  detailWarningsToggle: (spanID: string) => void;\n  detailReferencesToggle: (spanID: string) => void;\n  detailProcessToggle: (spanID: string) => void;\n  detailTagsToggle: (spanID: string) => void;\n  detailToggle: (spanID: string) => void;\n  setSpanNameColumnWidth: (width: number) => void;\n  setTrace: (trace: IOtelTrace | TNil, uiFind: string | TNil) => void;\n  focusUiFindMatches: (trace: IOtelTrace, uiFind: string | TNil, allowHide?: boolean) => void;\n};\n\ntype RouteProps = {\n  location: Location;\n  history: History;\n};\n\ntype VirtualizedTraceViewProps = TVirtualizedTraceViewOwnProps &\n  TDispatchProps &\n  TExtractUiFindFromStateReturn &\n  TTraceTimeline &\n  RouteProps;\n\n// export for tests\nexport const DEFAULT_HEIGHTS = {\n  bar: 28,\n  detail: 161,\n  detailWithLogs: 197,\n};\n\nconst NUM_TICKS = 5;\n\nfunction generateRowStates(\n  spans: ReadonlyArray<IOtelSpan> | TNil,\n  childrenHiddenIDs: Set<string>,\n  detailStates: Map<string, DetailState | TNil>\n): RowState[] {\n  if (!spans) {\n    return [];\n  }\n  let collapseDepth = null;\n  const rowStates = [];\n  for (let i = 0; i < spans.length; i++) {\n    const span = spans[i];\n    const { spanID, depth } = span;\n    let hidden = false;\n    if (collapseDepth != null) {\n      if (depth >= collapseDepth) {\n        hidden = true;\n      } else {\n        collapseDepth = null;\n      }\n    }\n    if (hidden) {\n      continue;\n    }\n    if (childrenHiddenIDs.has(spanID)) {\n      collapseDepth = depth + 1;\n    }\n    rowStates.push({\n      span,\n      isDetail: false,\n      spanIndex: i,\n    });\n    if (detailStates.has(spanID)) {\n      rowStates.push({\n        span,\n        isDetail: true,\n        spanIndex: i,\n      });\n    }\n  }\n  return rowStates;\n}\n\nfunction generateRowStatesFromTrace(\n  trace: IOtelTrace | TNil,\n  childrenHiddenIDs: Set<string>,\n  detailStates: Map<string, DetailState | TNil>\n): RowState[] {\n  if (!trace) {\n    return [];\n  }\n  return generateRowStates(trace.spans, childrenHiddenIDs, detailStates);\n}\n\nfunction getCssClasses(currentViewRange: [number, number]) {\n  const [zoomStart, zoomEnd] = currentViewRange;\n  return cx({\n    'clipping-left': zoomStart > 0,\n    'clipping-right': zoomEnd < 1,\n  });\n}\n\nfunction mergeChildrenCriticalPath(\n  trace: IOtelTrace,\n  spanID: string,\n  criticalPath: CriticalPathSection[]\n): CriticalPathSection[] {\n  if (!criticalPath) {\n    return [];\n  }\n  // Define an array to store the IDs of the span and its descendants (if the span is collapsed)\n  const allRequiredSpanIds = new Set<string>([spanID]);\n\n  // Use pre-built spanMap\n  const spanMap = trace.spanMap;\n\n  // If the span is collapsed, recursively find all of its descendants.\n  const findAllDescendants = (span: IOtelSpan) => {\n    if (span.hasChildren && span.childSpans.length > 0) {\n      span.childSpans.forEach(child => {\n        allRequiredSpanIds.add(child.spanID);\n        findAllDescendants(child);\n      });\n    }\n  };\n\n  // Start from the initially selected span\n  const startingSpan = spanMap.get(spanID);\n  if (startingSpan) {\n    findAllDescendants(startingSpan);\n  }\n\n  const criticalPathSections: CriticalPathSection[] = [];\n  criticalPath.forEach(each => {\n    if (allRequiredSpanIds.has(each.spanID)) {\n      if (criticalPathSections.length !== 0 && each.sectionEnd === criticalPathSections[0].sectionStart) {\n        // Merge Critical Paths if they are consecutive\n        criticalPathSections[0].sectionStart = each.sectionStart;\n      } else {\n        criticalPathSections.unshift({ ...each });\n      }\n    }\n  });\n\n  return criticalPathSections;\n}\n\nconst memoizedGenerateRowStates = memoizeOne(generateRowStatesFromTrace);\nconst memoizedViewBoundsFunc = memoizeOne(createViewedBoundsFunc, _isEqual);\nconst memoizedGetCssClasses = memoizeOne(getCssClasses, _isEqual);\nconst memoizedCriticalPathsBySpanID = memoizeOne((criticalPath: CriticalPathSection[]) =>\n  _groupBy(criticalPath, x => x.spanID)\n);\n\n// export from tests\nexport class VirtualizedTraceViewImpl extends React.Component<VirtualizedTraceViewProps> {\n  listView: ListView | TNil;\n  constructor(props: VirtualizedTraceViewProps) {\n    super(props);\n    const { setTrace, trace, uiFind } = props;\n    setTrace(trace, uiFind);\n  }\n\n  componentDidMount(): void {\n    window.addEventListener('jaeger:list-resize', this._handleListResize);\n    window.addEventListener('jaeger:detail-measure', this._handleDetailMeasure as any);\n  }\n\n  shouldComponentUpdate(nextProps: VirtualizedTraceViewProps) {\n    // If any prop updates, VirtualizedTraceViewImpl should update.\n    const nextPropKeys = Object.keys(nextProps) as (keyof VirtualizedTraceViewProps)[];\n    for (let i = 0; i < nextPropKeys.length; i += 1) {\n      if (nextProps[nextPropKeys[i]] !== this.props[nextPropKeys[i]]) {\n        // Unless the only change was props.shouldScrollToFirstUiFindMatch changing to false.\n        if (nextPropKeys[i] === 'shouldScrollToFirstUiFindMatch') {\n          if (nextProps[nextPropKeys[i]]) return true;\n        } else {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  componentDidUpdate(prevProps: Readonly<VirtualizedTraceViewProps>) {\n    const { registerAccessors, trace } = prevProps;\n    const {\n      shouldScrollToFirstUiFindMatch,\n      clearShouldScrollToFirstUiFindMatch,\n      scrollToFirstVisibleSpan,\n      registerAccessors: nextRegisterAccessors,\n      setTrace,\n      trace: nextTrace,\n      uiFind,\n    } = this.props;\n\n    if (trace !== nextTrace) {\n      setTrace(nextTrace, uiFind);\n    }\n\n    if (this.listView && registerAccessors !== nextRegisterAccessors) {\n      nextRegisterAccessors(this.getAccessors());\n    }\n\n    if (shouldScrollToFirstUiFindMatch) {\n      scrollToFirstVisibleSpan();\n      clearShouldScrollToFirstUiFindMatch();\n    }\n  }\n\n  componentWillUnmount(): void {\n    window.removeEventListener('jaeger:list-resize', this._handleListResize);\n    window.removeEventListener('jaeger:detail-measure', this._handleDetailMeasure as any);\n  }\n\n  _handleListResize = () => {\n    if (this.listView) {\n      // Force ListView to update and re-scan item heights\n      this.listView.forceUpdate();\n    }\n  };\n\n  _handleDetailMeasure = (evt: { detail?: { spanID?: string } }) => {\n    const spanID = evt && evt.detail && evt.detail.spanID;\n    if (!this.listView || !spanID) {\n      this._handleListResize();\n      return;\n    }\n    // Force the list to re-scan heights\n    this.listView.forceUpdate();\n  };\n\n  getRowStates(): RowState[] {\n    const { childrenHiddenIDs, detailStates, trace } = this.props;\n    return memoizedGenerateRowStates(trace, childrenHiddenIDs, detailStates);\n  }\n\n  getClippingCssClasses(): string {\n    const { currentViewRangeTime } = this.props;\n    return memoizedGetCssClasses(currentViewRangeTime);\n  }\n\n  getViewedBounds(): ViewedBoundsFunctionType {\n    const { currentViewRangeTime, trace } = this.props;\n    const [zoomStart, zoomEnd] = currentViewRangeTime;\n\n    return memoizedViewBoundsFunc({\n      min: trace.startTime,\n      max: trace.endTime,\n      viewStart: zoomStart,\n      viewEnd: zoomEnd,\n    });\n  }\n\n  focusSpan = (uiFind: string) => {\n    const { trace, focusUiFindMatches, location, history } = this.props;\n    if (trace) {\n      updateUiFind({\n        location,\n        history,\n        uiFind,\n      });\n      focusUiFindMatches(trace, uiFind, false);\n    }\n  };\n\n  getAccessors() {\n    const lv = this.listView;\n    if (!lv) {\n      throw new Error('ListView unavailable');\n    }\n    return {\n      getViewRange: this.getViewRange,\n      getSearchedSpanIDs: this.getSearchedSpanIDs,\n      getCollapsedChildren: this.getCollapsedChildren,\n      getViewHeight: lv.getViewHeight,\n      getBottomRowIndexVisible: lv.getBottomVisibleIndex,\n      getTopRowIndexVisible: lv.getTopVisibleIndex,\n      getRowPosition: lv.getRowPosition,\n      mapRowIndexToSpanIndex: this.mapRowIndexToSpanIndex,\n      mapSpanIndexToRowIndex: this.mapSpanIndexToRowIndex,\n    };\n  }\n\n  getViewRange = () => this.props.currentViewRangeTime;\n\n  getSearchedSpanIDs = () => this.props.findMatchesIDs;\n\n  getCollapsedChildren = () => this.props.childrenHiddenIDs;\n\n  mapRowIndexToSpanIndex = (index: number) => this.getRowStates()[index].spanIndex;\n\n  mapSpanIndexToRowIndex = (index: number) => {\n    const max = this.getRowStates().length;\n    for (let i = 0; i < max; i++) {\n      const { spanIndex } = this.getRowStates()[i];\n      if (spanIndex === index) {\n        return i;\n      }\n    }\n    throw new Error(`unable to find row for span index: ${index}`);\n  };\n\n  setListView = (listView: ListView | TNil) => {\n    const isChanged = this.listView !== listView;\n    this.listView = listView;\n    if (listView && isChanged) {\n      this.props.registerAccessors(this.getAccessors());\n    }\n  };\n\n  // use long form syntax to avert flow error\n  // https://github.com/facebook/flow/issues/3076#issuecomment-290944051\n  getKeyFromIndex = (index: number) => {\n    const { isDetail, span } = this.getRowStates()[index];\n    return `${span.spanID}--${isDetail ? 'detail' : 'bar'}`;\n  };\n\n  getIndexFromKey = (key: string) => {\n    const parts = key.split('--');\n    const _spanID = parts[0];\n    const _isDetail = parts[1] === 'detail';\n    const max = this.getRowStates().length;\n    for (let i = 0; i < max; i++) {\n      const { span, isDetail } = this.getRowStates()[i];\n      if (span.spanID === _spanID && isDetail === _isDetail) {\n        return i;\n      }\n    }\n    return -1;\n  };\n\n  getRowHeight = (index: number) => {\n    const { span, isDetail } = this.getRowStates()[index];\n    if (!isDetail) {\n      return DEFAULT_HEIGHTS.bar;\n    }\n    if (Array.isArray(span.events) && span.events.length) {\n      return DEFAULT_HEIGHTS.detailWithLogs;\n    }\n    return DEFAULT_HEIGHTS.detail;\n  };\n\n  linksGetter = (span: IOtelSpan, items: ReadonlyArray<IAttribute>, itemIndex: number) => {\n    const { trace } = this.props;\n    if (!trace) return [];\n    return getLinks(span, items, itemIndex, trace);\n  };\n\n  // Adapter for OTEL components that need links from attributes\n  linksGetterFromAttributes = (span: IOtelSpan) => (attributes: ReadonlyArray<IAttribute>, index: number) => {\n    return this.linksGetter(span, attributes, index);\n  };\n\n  // Adapter for OTEL event toggle to legacy log toggle\n  eventItemToggleAdapter =\n    (detailLogItemToggle: (spanID: string, log: IEvent) => void) => (spanID: string, event: IEvent) => {\n      // Pass the IEvent directly.\n      detailLogItemToggle(spanID, event);\n    };\n\n  renderRow = (key: string, style: React.CSSProperties, index: number, attrs: object) => {\n    const { isDetail, span, spanIndex } = this.getRowStates()[index];\n    return isDetail\n      ? this.renderSpanDetailRow(span, key, style, attrs)\n      : this.renderSpanBarRow(span, spanIndex, key, style, attrs);\n  };\n\n  getCriticalPathSections(\n    isCollapsed: boolean,\n    trace: IOtelTrace,\n    spanID: string,\n    criticalPath: CriticalPathSection[]\n  ) {\n    if (isCollapsed) {\n      return mergeChildrenCriticalPath(trace, spanID, criticalPath);\n    }\n\n    const pathBySpanID = memoizedCriticalPathsBySpanID(criticalPath);\n    return spanID in pathBySpanID ? pathBySpanID[spanID] : [];\n  }\n\n  renderSpanBarRow(\n    span: IOtelSpan,\n    spanIndex: number,\n    key: string,\n    style: React.CSSProperties,\n    attrs: object\n  ) {\n    const { spanID } = span;\n    const { serviceName } = span.resource;\n    const {\n      childrenHiddenIDs,\n      childrenToggle,\n      detailStates,\n      detailToggle,\n      findMatchesIDs,\n      spanNameColumnWidth,\n      trace,\n      criticalPath,\n      useOtelTerms,\n    } = this.props;\n    // to avert flow error\n    if (!trace) {\n      return null;\n    }\n\n    const { spans } = trace;\n\n    const color = colorGenerator.getColorByKey(serviceName);\n    const isCollapsed = childrenHiddenIDs.has(spanID);\n    const isDetailExpanded = detailStates.has(spanID);\n    const isMatchingFilter = findMatchesIDs ? findMatchesIDs.has(spanID) : false;\n    const hasOwnError = isErrorSpan(span);\n    const hasChildError = isCollapsed && spanContainsErredSpan(spans, spanIndex);\n    const criticalPathSections = this.getCriticalPathSections(isCollapsed, trace, spanID, criticalPath);\n    // Check for direct child \"server\" span if the span is a \"client\" span.\n    let rpc = null;\n    if (isCollapsed) {\n      const rpcSpan = findServerChildSpan(spans.slice(spanIndex));\n      if (rpcSpan) {\n        const rpcViewBounds = this.getViewedBounds()(rpcSpan.startTime, rpcSpan.endTime);\n        rpc = {\n          color: colorGenerator.getColorByKey(rpcSpan.resource.serviceName),\n          operationName: rpcSpan.name,\n          serviceName: rpcSpan.resource.serviceName,\n          viewEnd: rpcViewBounds.end,\n          viewStart: rpcViewBounds.start,\n        };\n      }\n    }\n    const peerServiceAttr = span.attributes.find(attr => attr.key === PEER_SERVICE);\n    // Leaf, kind == client and has peer.service tag, is likely a client span that does a request\n    // to an uninstrumented/external service\n    let noInstrumentedServer = null;\n    if (!span.hasChildren && peerServiceAttr && (isKindClient(span) || isKindProducer(span))) {\n      noInstrumentedServer = {\n        serviceName: String(peerServiceAttr.value),\n        color: colorGenerator.getColorByKey(String(peerServiceAttr.value)),\n      };\n    }\n\n    return (\n      <div className=\"VirtualizedTraceView--row\" key={key} style={style} {...attrs}>\n        <SpanBarRow\n          className={this.getClippingCssClasses()}\n          color={color}\n          criticalPath={criticalPathSections}\n          columnDivision={spanNameColumnWidth}\n          isChildrenExpanded={!isCollapsed}\n          isDetailExpanded={isDetailExpanded}\n          isMatchingFilter={isMatchingFilter}\n          numTicks={NUM_TICKS}\n          onDetailToggled={detailToggle}\n          onChildrenToggled={childrenToggle}\n          rpc={rpc}\n          noInstrumentedServer={noInstrumentedServer}\n          hasOwnError={hasOwnError}\n          hasChildError={hasChildError}\n          getViewedBounds={this.getViewedBounds()}\n          traceStartTime={trace.startTime}\n          span={span}\n          focusSpan={this.focusSpan}\n          traceDuration={trace.duration}\n          useOtelTerms={useOtelTerms}\n        />\n      </div>\n    );\n  }\n\n  renderSpanDetailRow(span: IOtelSpan, key: string, style: React.CSSProperties, attrs: object) {\n    const { spanID } = span;\n    const { serviceName } = span.resource;\n    const {\n      detailLogItemToggle,\n      detailLogsToggle,\n      detailProcessToggle,\n      detailReferencesToggle,\n      detailWarningsToggle,\n      detailStates,\n      detailTagsToggle,\n      detailToggle,\n      spanNameColumnWidth,\n      trace,\n      currentViewRangeTime,\n      useOtelTerms,\n    } = this.props;\n    const detailState = detailStates.get(spanID);\n    if (!trace || !detailState) {\n      return null;\n    }\n\n    const color = colorGenerator.getColorByKey(serviceName);\n    return (\n      <div className=\"VirtualizedTraceView--row\" key={key} style={{ ...style, zIndex: 1 }} {...attrs}>\n        <SpanDetailRow\n          color={color}\n          columnDivision={spanNameColumnWidth}\n          onDetailToggled={detailToggle}\n          detailState={detailState}\n          linksGetter={this.linksGetterFromAttributes(span)}\n          eventItemToggle={this.eventItemToggleAdapter(detailLogItemToggle)}\n          eventsToggle={detailLogsToggle}\n          resourceToggle={detailProcessToggle}\n          linksToggle={detailReferencesToggle}\n          warningsToggle={detailWarningsToggle}\n          span={span}\n          attributesToggle={detailTagsToggle}\n          traceStartTime={trace.startTime}\n          focusSpan={this.focusSpan}\n          currentViewRangeTime={currentViewRangeTime}\n          traceDuration={trace.duration}\n          useOtelTerms={useOtelTerms}\n        />\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <div className=\"VirtualizedTraceView--spans\">\n        <ListView\n          ref={this.setListView}\n          dataLength={this.getRowStates().length}\n          itemHeightGetter={this.getRowHeight}\n          itemRenderer={this.renderRow}\n          viewBuffer={300}\n          viewBufferMin={100}\n          itemsWrapperClassName=\"VirtualizedTraceView--rowsWrapper\"\n          getKeyFromIndex={this.getKeyFromIndex}\n          getIndexFromKey={this.getIndexFromKey}\n          windowScroller\n        />\n      </div>\n    );\n  }\n}\n\n/* istanbul ignore next */\nfunction mapStateToProps(state: ReduxState): TTraceTimeline & TExtractUiFindFromStateReturn {\n  return {\n    ...extractUiFindFromState(state),\n    ...state.traceTimeline,\n  };\n}\n\n/* istanbul ignore next */\nfunction mapDispatchToProps(dispatch: Dispatch<ReduxState>): TDispatchProps {\n  return bindActionCreators(actions, dispatch) as any as TDispatchProps;\n}\n\nexport default connect<\n  TTraceTimeline & TExtractUiFindFromStateReturn,\n  TDispatchProps,\n  TVirtualizedTraceViewOwnProps,\n  ReduxState\n>(\n  mapStateToProps,\n  mapDispatchToProps\n)(withRouteProps(VirtualizedTraceViewImpl));\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/duck.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/duck.track.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/duck.track.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/duck.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":95,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":95,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3738,3741],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3738,3741],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2017 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Action, ActionFunctionAny, createActions, handleActions } from 'redux-actions';\n\nimport DetailState from './SpanDetail/DetailState';\nimport { TNil } from '../../../types';\nimport { IOtelSpan, IOtelTrace, IEvent } from '../../../types/otel';\nimport TTraceTimeline from '../../../types/TTraceTimeline';\nimport filterSpans from '../../../utils/filter-spans';\nimport generateActionTypes from '../../../utils/generate-action-types';\nimport guardReducer from '../../../utils/guardReducer';\nimport spanAncestorIds from '../../../utils/span-ancestor-ids';\n\n// payloads\nexport type TSpanIdLogValue = { logItem: IEvent; spanID: string };\nexport type TSpanIdValue = { spanID: string };\ntype TSpansValue = { spans: IOtelSpan[] };\ntype TTraceUiFindValue = { trace: IOtelTrace; uiFind: string | TNil; allowHide?: boolean };\nexport type TWidthValue = { width: number };\nexport type TActionTypes =\n  | TSpanIdLogValue\n  | TSpanIdValue\n  | TSpansValue\n  | TTraceUiFindValue\n  | TWidthValue\n  | object;\n\ntype TTimelineViewerActions = {\n  [actionName: string]: ActionFunctionAny<Action<TActionTypes>>;\n};\n\nfunction shouldDisableCollapse(allSpans: IOtelSpan[], hiddenSpansIds: Set<string>) {\n  const allParentSpans = allSpans.filter(s => s.hasChildren);\n  return allParentSpans.length === hiddenSpansIds.size;\n}\n\nexport function newInitialState(): TTraceTimeline {\n  return {\n    childrenHiddenIDs: new Set(),\n    detailStates: new Map(),\n    hoverIndentGuideIds: new Set(),\n    shouldScrollToFirstUiFindMatch: false,\n    spanNameColumnWidth: parseFloat(localStorage.getItem('spanNameColumnWidth') || '0.25'),\n    traceID: null,\n  };\n}\n\nexport const actionTypes = generateActionTypes('@jaeger-ui/trace-timeline-viewer', [\n  'ADD_HOVER_INDENT_GUIDE_ID',\n  'CHILDREN_TOGGLE',\n  'CLEAR_SHOULD_SCROLL_TO_FIRST_UI_FIND_MATCH',\n  'COLLAPSE_ALL',\n  'COLLAPSE_ONE',\n  'DETAIL_TOGGLE',\n  'DETAIL_TAGS_TOGGLE',\n  'DETAIL_PROCESS_TOGGLE',\n  'DETAIL_LOGS_TOGGLE',\n  'DETAIL_LOG_ITEM_TOGGLE',\n  'DETAIL_WARNINGS_TOGGLE',\n  'DETAIL_REFERENCES_TOGGLE',\n  'EXPAND_ALL',\n  'EXPAND_ONE',\n  'FOCUS_UI_FIND_MATCHES',\n  'REMOVE_HOVER_INDENT_GUIDE_ID',\n  'SET_SPAN_NAME_COLUMN_WIDTH',\n  'SET_TRACE',\n]);\n\nconst fullActions = createActions<TActionTypes>({\n  [actionTypes.ADD_HOVER_INDENT_GUIDE_ID]: (spanID: string) => ({ spanID }),\n  [actionTypes.CHILDREN_TOGGLE]: (spanID: string) => ({ spanID }),\n  [actionTypes.CLEAR_SHOULD_SCROLL_TO_FIRST_UI_FIND_MATCH]: () => ({}),\n  [actionTypes.COLLAPSE_ALL]: (spans: IOtelSpan[]) => ({ spans }),\n  [actionTypes.COLLAPSE_ONE]: (spans: IOtelSpan[]) => ({ spans }),\n  [actionTypes.DETAIL_LOG_ITEM_TOGGLE]: (spanID: string, logItem: IEvent) => ({ logItem, spanID }),\n  [actionTypes.DETAIL_LOGS_TOGGLE]: (spanID: string) => ({ spanID }),\n  [actionTypes.EXPAND_ALL]: () => ({}),\n  [actionTypes.EXPAND_ONE]: (spans: IOtelSpan[]) => ({ spans }),\n  [actionTypes.DETAIL_PROCESS_TOGGLE]: (spanID: string) => ({ spanID }),\n  [actionTypes.DETAIL_WARNINGS_TOGGLE]: (spanID: string) => ({ spanID }),\n  [actionTypes.DETAIL_REFERENCES_TOGGLE]: (spanID: string) => ({ spanID }),\n  [actionTypes.DETAIL_TAGS_TOGGLE]: (spanID: string) => ({ spanID }),\n  [actionTypes.DETAIL_TOGGLE]: (spanID: string) => ({ spanID }),\n  [actionTypes.FOCUS_UI_FIND_MATCHES]: (trace: IOtelTrace, uiFind: string | TNil, allowHide?: boolean) => ({\n    trace,\n    uiFind,\n    allowHide,\n  }),\n  [actionTypes.REMOVE_HOVER_INDENT_GUIDE_ID]: (spanID: string) => ({ spanID }),\n  [actionTypes.SET_SPAN_NAME_COLUMN_WIDTH]: (width: number) => ({ width }),\n  [actionTypes.SET_TRACE]: (trace: IOtelTrace, uiFind: string | TNil) => ({ trace, uiFind }),\n});\n\nexport const actions = (fullActions as any).jaegerUi.traceTimelineViewer as TTimelineViewerActions;\n\nfunction calculateFocusedFindRowStates(uiFind: string, spans: ReadonlyArray<IOtelSpan>, allowHide = true) {\n  const spansMap = new Map();\n  const childrenHiddenIDs: Set<string> = new Set();\n  const detailStates: Map<string, DetailState> = new Map();\n  let shouldScrollToFirstUiFindMatch = false;\n\n  spans.forEach(span => {\n    spansMap.set(span.spanID, span);\n    if (allowHide) {\n      childrenHiddenIDs.add(span.spanID);\n    }\n  });\n  const matchedSpanIds = filterSpans(uiFind, spans);\n  if (matchedSpanIds && matchedSpanIds.size) {\n    matchedSpanIds.forEach(spanID => {\n      const span = spansMap.get(spanID);\n      detailStates.set(spanID, new DetailState());\n      spanAncestorIds(span).forEach(ancestorID => childrenHiddenIDs.delete(ancestorID));\n    });\n    shouldScrollToFirstUiFindMatch = true;\n  }\n  return {\n    childrenHiddenIDs,\n    detailStates,\n    shouldScrollToFirstUiFindMatch,\n  };\n}\n\nfunction focusUiFindMatches(state: TTraceTimeline, { uiFind, trace, allowHide }: TTraceUiFindValue) {\n  if (!uiFind) return state;\n  return {\n    ...state,\n    ...calculateFocusedFindRowStates(uiFind, trace.spans, allowHide),\n  };\n}\n\nfunction clearShouldScrollToFirstUiFindMatch(state: TTraceTimeline) {\n  if (state.shouldScrollToFirstUiFindMatch) {\n    return { ...state, shouldScrollToFirstUiFindMatch: false };\n  }\n  return state;\n}\n\nfunction setTrace(state: TTraceTimeline, { uiFind, trace }: TTraceUiFindValue) {\n  const { traceID, spans } = trace;\n  if (traceID === state.traceID) {\n    return state;\n  }\n  const { spanNameColumnWidth } = state;\n\n  return Object.assign(\n    { ...newInitialState(), spanNameColumnWidth, traceID },\n    uiFind ? calculateFocusedFindRowStates(uiFind, spans) : null\n  );\n}\n\nfunction setColumnWidth(state: TTraceTimeline, { width }: TWidthValue): TTraceTimeline {\n  localStorage.setItem('spanNameColumnWidth', width.toString());\n  return { ...state, spanNameColumnWidth: width };\n}\n\nfunction childrenToggle(state: TTraceTimeline, { spanID }: TSpanIdValue): TTraceTimeline {\n  const childrenHiddenIDs = new Set(state.childrenHiddenIDs);\n  if (childrenHiddenIDs.has(spanID)) {\n    childrenHiddenIDs.delete(spanID);\n  } else {\n    childrenHiddenIDs.add(spanID);\n  }\n  return { ...state, childrenHiddenIDs };\n}\n\nexport function expandAll(state: TTraceTimeline): TTraceTimeline {\n  const childrenHiddenIDs = new Set<string>();\n  return { ...state, childrenHiddenIDs };\n}\n\nexport function collapseAll(state: TTraceTimeline, { spans }: TSpansValue) {\n  if (shouldDisableCollapse(spans, state.childrenHiddenIDs)) {\n    return state;\n  }\n  const childrenHiddenIDs = spans.reduce((res, s) => {\n    if (s.hasChildren) {\n      res.add(s.spanID);\n    }\n    return res;\n  }, new Set<string>());\n  return { ...state, childrenHiddenIDs };\n}\n\nexport function collapseOne(state: TTraceTimeline, { spans }: TSpansValue) {\n  if (shouldDisableCollapse(spans, state.childrenHiddenIDs)) {\n    return state;\n  }\n  let nearestCollapsedAncestor: IOtelSpan | undefined;\n  const childrenHiddenIDs = spans.reduce((res, curSpan) => {\n    if (nearestCollapsedAncestor && curSpan.depth <= nearestCollapsedAncestor.depth) {\n      res.add(nearestCollapsedAncestor.spanID);\n      if (curSpan.hasChildren) {\n        nearestCollapsedAncestor = curSpan;\n      }\n    } else if (curSpan.hasChildren && !res.has(curSpan.spanID)) {\n      nearestCollapsedAncestor = curSpan;\n    }\n    return res;\n  }, new Set(state.childrenHiddenIDs));\n  // The last one\n  if (nearestCollapsedAncestor) {\n    childrenHiddenIDs.add(nearestCollapsedAncestor.spanID);\n  }\n  return { ...state, childrenHiddenIDs };\n}\n\nexport function expandOne(state: TTraceTimeline, { spans }: TSpansValue) {\n  if (state.childrenHiddenIDs.size === 0) {\n    return state;\n  }\n  let prevExpandedDepth = -1;\n  let expandNextHiddenSpan = true;\n  const childrenHiddenIDs = spans.reduce((res, s) => {\n    if (s.depth <= prevExpandedDepth) {\n      expandNextHiddenSpan = true;\n    }\n    if (expandNextHiddenSpan && res.has(s.spanID)) {\n      res.delete(s.spanID);\n      expandNextHiddenSpan = false;\n      prevExpandedDepth = s.depth;\n    }\n    return res;\n  }, new Set(state.childrenHiddenIDs));\n  return { ...state, childrenHiddenIDs };\n}\n\nfunction detailToggle(state: TTraceTimeline, { spanID }: TSpanIdValue) {\n  const detailStates = new Map(state.detailStates);\n  if (detailStates.has(spanID)) {\n    detailStates.delete(spanID);\n  } else {\n    detailStates.set(spanID, new DetailState());\n  }\n  return { ...state, detailStates };\n}\n\nfunction detailSubsectionToggle(\n  subSection: 'tags' | 'process' | 'logs' | 'warnings' | 'references',\n  state: TTraceTimeline,\n  { spanID }: TSpanIdValue\n) {\n  const old = state.detailStates.get(spanID);\n  if (!old) {\n    return state;\n  }\n  let detailState;\n  if (subSection === 'tags') {\n    detailState = old.toggleTags();\n  } else if (subSection === 'process') {\n    detailState = old.toggleProcess();\n  } else if (subSection === 'warnings') {\n    detailState = old.toggleWarnings();\n  } else if (subSection === 'references') {\n    detailState = old.toggleReferences();\n  } else {\n    detailState = old.toggleLogs();\n  }\n  const detailStates = new Map(state.detailStates);\n  detailStates.set(spanID, detailState);\n  return { ...state, detailStates };\n}\n\nconst detailTagsToggle = detailSubsectionToggle.bind(null, 'tags');\nconst detailProcessToggle = detailSubsectionToggle.bind(null, 'process');\nconst detailLogsToggle = detailSubsectionToggle.bind(null, 'logs');\nconst detailWarningsToggle = detailSubsectionToggle.bind(null, 'warnings');\nconst detailReferencesToggle = detailSubsectionToggle.bind(null, 'references');\n\nfunction detailLogItemToggle(state: TTraceTimeline, { spanID, logItem }: TSpanIdLogValue) {\n  const old = state.detailStates.get(spanID);\n  if (!old) {\n    return state;\n  }\n  const detailState = old.toggleLogItem(logItem);\n  const detailStates = new Map(state.detailStates);\n  detailStates.set(spanID, detailState);\n  return { ...state, detailStates };\n}\n\nfunction addHoverIndentGuideId(state: TTraceTimeline, { spanID }: TSpanIdValue) {\n  const newHoverIndentGuideIds = new Set(state.hoverIndentGuideIds);\n  newHoverIndentGuideIds.add(spanID);\n\n  return { ...state, hoverIndentGuideIds: newHoverIndentGuideIds };\n}\n\nfunction removeHoverIndentGuideId(state: TTraceTimeline, { spanID }: TSpanIdValue) {\n  const newHoverIndentGuideIds = new Set(state.hoverIndentGuideIds);\n  newHoverIndentGuideIds.delete(spanID);\n\n  return { ...state, hoverIndentGuideIds: newHoverIndentGuideIds };\n}\n\nexport default handleActions(\n  {\n    [actionTypes.ADD_HOVER_INDENT_GUIDE_ID]: guardReducer(addHoverIndentGuideId),\n    [actionTypes.CHILDREN_TOGGLE]: guardReducer(childrenToggle),\n    [actionTypes.CLEAR_SHOULD_SCROLL_TO_FIRST_UI_FIND_MATCH]: guardReducer(\n      clearShouldScrollToFirstUiFindMatch\n    ),\n    [actionTypes.COLLAPSE_ALL]: guardReducer(collapseAll),\n    [actionTypes.COLLAPSE_ONE]: guardReducer(collapseOne),\n    [actionTypes.DETAIL_LOGS_TOGGLE]: guardReducer(detailLogsToggle),\n    [actionTypes.DETAIL_LOG_ITEM_TOGGLE]: guardReducer(detailLogItemToggle),\n    [actionTypes.DETAIL_PROCESS_TOGGLE]: guardReducer(detailProcessToggle),\n    [actionTypes.DETAIL_WARNINGS_TOGGLE]: guardReducer(detailWarningsToggle),\n    [actionTypes.DETAIL_REFERENCES_TOGGLE]: guardReducer(detailReferencesToggle),\n    [actionTypes.DETAIL_TAGS_TOGGLE]: guardReducer(detailTagsToggle),\n    [actionTypes.DETAIL_TOGGLE]: guardReducer(detailToggle),\n    [actionTypes.EXPAND_ALL]: guardReducer(expandAll),\n    [actionTypes.EXPAND_ONE]: guardReducer(expandOne),\n    [actionTypes.FOCUS_UI_FIND_MATCHES]: guardReducer(focusUiFindMatches),\n    [actionTypes.REMOVE_HOVER_INDENT_GUIDE_ID]: guardReducer(removeHoverIndentGuideId),\n    [actionTypes.SET_SPAN_NAME_COLUMN_WIDTH]: guardReducer(setColumnWidth),\n    [actionTypes.SET_TRACE]: guardReducer(setTrace),\n  },\n  newInitialState()\n);\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/index.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/utils.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/TraceTimelineViewer/utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/Tween.test.js","messages":[],"suppressedMessages":[{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":113,"column":19,"nodeType":"BlockStatement","messageId":"unexpected","endLine":113,"endColumn":21,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[3702,3702],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/Tween.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/index.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/index.track.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/index.track.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/keyboard-mappings.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/keyboard-shortcuts.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":11,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[288,291],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[288,291],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":12,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[336,339],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[336,339],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2017 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport * as React from 'react';\nimport Combokeys from 'combokeys';\n\nimport keyboardMappings from './keyboard-mappings';\n\nexport type CombokeysHandler =\n  | (() => void)\n  | ((event: React.KeyboardEvent<any>) => void)\n  | ((event: React.KeyboardEvent<any>, s: string) => void);\n\nexport type ShortcutCallbacks = {\n  [name: string]: CombokeysHandler;\n};\n\nlet instance: Combokeys | undefined;\n\nfunction getInstance(): Combokeys {\n  if (instance) {\n    return instance;\n  }\n  const local = new Combokeys(document.body);\n  instance = local;\n  return local;\n}\n\nexport function merge(callbacks: ShortcutCallbacks) {\n  const inst = getInstance();\n  Object.keys(callbacks).forEach(name => {\n    const keysHandler = callbacks[name];\n    if (keysHandler) {\n      inst.bind(keyboardMappings[name].binding, keysHandler);\n    }\n  });\n}\n\nexport function reset() {\n  const combokeys = getInstance();\n  combokeys.reset();\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/scroll-page.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/scroll-page.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/url/ReferenceLink.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/url/ReferenceLink.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/url/index.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/TracePage/url/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/ActionMenu/ActionMenu.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/ActionMenu/ActionsMenu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/BreakableText.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/BreakableText.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/CircularProgressbar.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/CircularProgressbar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/ClickToCopy.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/ClickToCopy.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/CopyIcon.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/CopyIcon.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/DetailsCard/DetailList.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/DetailsCard/DetailList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/DetailsCard/DetailTable.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/DetailsCard/DetailTable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/DetailsCard/DetailTableDropdown.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/DetailsCard/DetailTableDropdown.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/DetailsCard/index.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/DetailsCard/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/DetailsCard/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/EmphasizedNode.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/EmphasizedNode.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/ErrorMessage.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/ErrorMessage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/ExamplesLink.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/ExamplesLink.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/ExternalLinks.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/ExternalLinks.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/FilteredList/ListItem.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/FilteredList/ListItem.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_' is assigned a value but never used.","line":53,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":53,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2019 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React, { useCallback, useMemo } from 'react';\nimport { Checkbox } from 'antd';\nimport cx from 'classnames';\n\nimport highlightMatches from './highlightMatches';\n\nimport './ListItem.css';\n\ninterface IListItemProps {\n  index: number;\n  style?: React.CSSProperties;\n  data: {\n    addValues?: (values: string[]) => void;\n    focusedIndex: number | null;\n    highlightQuery: string;\n    multi?: boolean;\n    options: string[];\n    removeValues?: (values: string[]) => void;\n    selectedValue: Set<string> | string | null;\n    setValue: (value: string) => void;\n  };\n}\n\nconst ListItem: React.FC<IListItemProps> = React.memo(props => {\n  const { data, index, style: styleOrig } = props;\n  const { addValues, focusedIndex, highlightQuery, multi, options, removeValues, selectedValue, setValue } =\n    data;\n\n  const value = options[index];\n\n  const isSelected = useMemo(() => {\n    if (typeof selectedValue === 'string' || !selectedValue) {\n      return value === selectedValue;\n    }\n    return selectedValue.has(value);\n  }, [value, selectedValue]);\n\n  const onClicked = useCallback(() => {\n    if (multi && addValues && removeValues) {\n      if (isSelected) {\n        removeValues([value]);\n      } else {\n        addValues([value]);\n      }\n    } else {\n      setValue(value);\n    }\n  }, [multi, addValues, removeValues, isSelected, value, setValue]);\n\n  const { width: _, ...style } = styleOrig || {};\n\n  const cls = cx('FilteredList--ListItem', {\n    'is-focused': index === focusedIndex,\n    'is-selected': isSelected,\n    'is-striped': index % 2,\n  });\n\n  return (\n    <div\n      className={cls}\n      style={style}\n      onClick={onClicked}\n      role=\"switch\"\n      aria-checked={index === focusedIndex ? 'true' : 'false'}\n    >\n      {multi && <Checkbox className=\"FilteredList--ListItem--Checkbox\" checked={isSelected} />}\n      {highlightMatches(highlightQuery, value)}\n    </div>\n  );\n});\n\nexport default ListItem;\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/FilteredList/highlightMatches.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/FilteredList/highlightMatches.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/FilteredList/index.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/FilteredList/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/LabeledList.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/LabeledList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/LoadingIndicator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/NewWindowIcon.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/NewWindowIcon.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/RelativeDate.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/SearchableSelect.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/SearchableSelect.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/TraceId.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/TraceId.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/TraceName.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/TraceName.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/UiFindInput.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/UiFindInput.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":18,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[668,671],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[668,671],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":118,"column":75,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":118,"endColumn":78,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3256,3259],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3256,3259],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2019 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React, { useState, useMemo, useCallback, useEffect } from 'react';\nimport { Input, InputRef } from 'antd';\nimport { IoClose } from 'react-icons/io5';\nimport { useNavigate, useLocation } from 'react-router-dom-v5-compat';\nimport _debounce from 'lodash/debounce';\nimport _isString from 'lodash/isString';\nimport { connect } from 'react-redux';\n\nimport updateUiFind from '../../utils/update-ui-find';\nimport { TNil, ReduxState } from '../../types/index';\nimport parseQuery from '../../utils/parseQuery';\n\ntype TOwnProps = {\n  allowClear?: boolean;\n  inputProps?: Record<string, any>;\n  trackFindFunction?: (str: string | TNil) => void;\n};\n\nexport type TExtractUiFindFromStateReturn = {\n  uiFind: string | undefined;\n};\n\ntype TProps = TOwnProps & TExtractUiFindFromStateReturn;\n\nconst defaultProps: Partial<TProps> = {\n  inputProps: {},\n};\n\nexport const UnconnectedUiFindInput = React.forwardRef<InputRef, TProps>((props, ref) => {\n  const {\n    allowClear,\n    inputProps,\n    uiFind: prevUiFind,\n    trackFindFunction,\n  } = {\n    ...defaultProps,\n    ...props,\n  };\n\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [ownInputValue, setOwnInputValue] = useState<string | undefined>(undefined);\n\n  const updateUiFindQueryParam = useMemo(\n    () =>\n      _debounce((uiFind?: string) => {\n        if (uiFind === prevUiFind || (!prevUiFind && !uiFind)) return;\n        updateUiFind({\n          location,\n          navigate,\n          trackFindFunction,\n          uiFind,\n        });\n      }, 250),\n    [navigate, location, prevUiFind, trackFindFunction]\n  );\n\n  useEffect(() => {\n    return () => {\n      updateUiFindQueryParam.cancel();\n    };\n  }, [updateUiFindQueryParam]);\n\n  const clearUiFind = useCallback(() => {\n    updateUiFindQueryParam();\n    updateUiFindQueryParam.flush();\n  }, [updateUiFindQueryParam]);\n\n  const handleInputBlur = useCallback(() => {\n    updateUiFindQueryParam.flush();\n    setOwnInputValue(undefined);\n  }, [updateUiFindQueryParam]);\n\n  const handleInputChange = useCallback(\n    (evt: React.ChangeEvent<HTMLInputElement>) => {\n      const { value } = evt.target;\n      updateUiFindQueryParam(value);\n      setOwnInputValue(value);\n    },\n    [updateUiFindQueryParam]\n  );\n\n  const inputValue = _isString(ownInputValue) ? ownInputValue : prevUiFind;\n  const suffix = (\n    <>\n      {allowClear && inputValue && inputValue.length > 0 && (\n        <IoClose data-testid=\"clear-icon\" onClick={clearUiFind} />\n      )}\n      {inputProps?.suffix}\n    </>\n  );\n\n  return (\n    <Input\n      placeholder=\"Find...\"\n      {...inputProps}\n      onBlur={handleInputBlur}\n      onChange={handleInputChange}\n      ref={ref}\n      suffix={suffix}\n      value={inputValue}\n      allowClear\n    />\n  );\n});\n\nUnconnectedUiFindInput.displayName = 'UnconnectedUiFindInput';\n\nexport function extractUiFindFromState(state: ReduxState): TExtractUiFindFromStateReturn {\n  const { uiFind: uiFindFromUrl } = parseQuery(state.router.location.search);\n  const uiFind = Array.isArray(uiFindFromUrl) ? uiFindFromUrl.join(' ') : uiFindFromUrl;\n  return { uiFind };\n}\n\nexport default connect(extractUiFindFromState)(UnconnectedUiFindInput) as any;\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/VerticalResizer.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/components/common/VerticalResizer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/constants/default-config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/constants/default-version.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/constants/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/constants/keyboard-keys.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/constants/search-form.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/constants/tag-keys.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/hooks/useConfig.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'rerender' is assigned a value but never used.","line":108,"column":21,"nodeType":null,"messageId":"unusedVar","endLine":108,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2026 The Jaeger Authors.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { renderHook } from '@testing-library/react';\nimport { Provider } from 'react-redux';\nimport { createStore } from 'redux';\nimport React from 'react';\nimport { useConfig } from './useConfig';\nimport { Config } from '../types/config';\nimport { ReduxState } from '../types';\n\ndescribe('useConfig', () => {\n  const createMockStore = (config: Partial<Config>) => {\n    const fullConfig: Config = {\n      criticalPathEnabled: false,\n      disableFileUploadControl: false,\n      disableJsonView: false,\n      forbidNewPage: false,\n      themes: { enabled: true },\n      useOpenTelemetryTerms: false,\n      menu: [],\n      ...config,\n    };\n\n    const mockState: Partial<ReduxState> = {\n      config: fullConfig,\n    };\n\n    return createStore(() => mockState as ReduxState);\n  };\n\n  const createWrapper = (store: ReturnType<typeof createStore>) => {\n    const Wrapper: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n      return React.createElement(Provider, { store, children });\n    };\n    return Wrapper;\n  };\n\n  it('returns config from Redux state', () => {\n    const mockConfig: Partial<Config> = {\n      menu: [\n        {\n          label: 'About Jaeger',\n          items: [\n            {\n              label: 'Documentation',\n              url: 'https://www.jaegertracing.io/docs/latest',\n            },\n          ],\n        },\n      ],\n      search: {\n        maxLookback: {\n          label: '2 Days',\n          value: '2d',\n        },\n        maxLimit: 1500,\n      },\n      linkPatterns: [],\n      dependencies: {\n        dagMaxNumServices: 100,\n        menuEnabled: true,\n      },\n    };\n\n    const store = createMockStore(mockConfig);\n    const { result } = renderHook(() => useConfig(), {\n      wrapper: createWrapper(store),\n    });\n\n    expect(result.current.menu).toEqual(mockConfig.menu);\n    expect(result.current.search).toEqual(mockConfig.search);\n    expect(result.current.dependencies).toEqual(mockConfig.dependencies);\n  });\n\n  it('returns updated config when state changes', () => {\n    const initialConfig: Partial<Config> = {\n      menu: [],\n      search: {\n        maxLookback: {\n          label: '1 Day',\n          value: '1d',\n        },\n        maxLimit: 1000,\n      },\n      linkPatterns: [],\n      dependencies: {\n        dagMaxNumServices: 50,\n        menuEnabled: false,\n      },\n    };\n\n    let currentConfig = initialConfig;\n    const dynamicStore = createStore(() => {\n      const fullConfig: Config = {\n        criticalPathEnabled: false,\n        disableFileUploadControl: false,\n        disableJsonView: false,\n        forbidNewPage: false,\n        themes: { enabled: true },\n        useOpenTelemetryTerms: false,\n        menu: [],\n        ...currentConfig,\n      };\n      return { config: fullConfig } as ReduxState;\n    });\n\n    const { result, rerender } = renderHook(() => useConfig(), {\n      wrapper: createWrapper(dynamicStore),\n    });\n\n    expect(result.current.search).toEqual(initialConfig.search);\n\n    // Simulate config change\n    const updatedConfig: Partial<Config> = {\n      ...initialConfig,\n      search: {\n        maxLookback: {\n          label: '7 Days',\n          value: '7d',\n        },\n        maxLimit: 2000,\n      },\n    };\n\n    currentConfig = updatedConfig;\n    const newStore = createStore(() => {\n      const fullConfig: Config = {\n        criticalPathEnabled: false,\n        disableFileUploadControl: false,\n        disableJsonView: false,\n        forbidNewPage: false,\n        themes: { enabled: true },\n        useOpenTelemetryTerms: false,\n        menu: [],\n        ...currentConfig,\n      };\n      return { config: fullConfig } as ReduxState;\n    });\n\n    const { result: newResult } = renderHook(() => useConfig(), {\n      wrapper: createWrapper(newStore),\n    });\n\n    expect(newResult.current.search).toEqual(updatedConfig.search);\n  });\n\n  it('works correctly with minimal config', () => {\n    const minimalConfig: Partial<Config> = {\n      menu: [],\n      linkPatterns: [],\n      dependencies: {\n        dagMaxNumServices: 100,\n        menuEnabled: true,\n      },\n    };\n\n    const store = createMockStore(minimalConfig);\n    const { result } = renderHook(() => useConfig(), {\n      wrapper: createWrapper(store),\n    });\n\n    expect(result.current.menu).toEqual([]);\n    expect(result.current.linkPatterns).toEqual([]);\n  });\n\n  it('returns config with link patterns', () => {\n    const configWithLinkPatterns: Partial<Config> = {\n      menu: [],\n      linkPatterns: [\n        {\n          type: 'process',\n          key: 'hostname',\n          url: 'http://example.com/host/#{hostname}',\n          text: 'View host: #{hostname}',\n        },\n        {\n          type: 'logs',\n          key: 'traceID',\n          url: 'http://logs.example.com/trace/#{traceID}',\n          text: 'View logs',\n        },\n      ],\n      dependencies: {\n        dagMaxNumServices: 100,\n        menuEnabled: true,\n      },\n    };\n\n    const store = createMockStore(configWithLinkPatterns);\n    const { result } = renderHook(() => useConfig(), {\n      wrapper: createWrapper(store),\n    });\n\n    expect(result.current.linkPatterns).toHaveLength(2);\n  });\n\n  it('returns config with archiveEnabled', () => {\n    const configWithArchive: Partial<Config> = {\n      menu: [],\n      linkPatterns: [],\n      dependencies: {\n        dagMaxNumServices: 100,\n        menuEnabled: true,\n      },\n      archiveEnabled: true,\n    };\n\n    const store = createMockStore(configWithArchive);\n    const { result } = renderHook(() => useConfig(), {\n      wrapper: createWrapper(store),\n    });\n\n    expect(result.current.archiveEnabled).toBe(true);\n  });\n\n  it('returns config with tracking settings', () => {\n    const configWithTracking: Partial<Config> = {\n      menu: [],\n      linkPatterns: [],\n      dependencies: {\n        dagMaxNumServices: 100,\n        menuEnabled: true,\n      },\n      tracking: {\n        gaID: 'UA-000000-2',\n        trackErrors: true,\n        customWebAnalytics: null,\n      },\n    };\n\n    const store = createMockStore(configWithTracking);\n    const { result } = renderHook(() => useConfig(), {\n      wrapper: createWrapper(store),\n    });\n\n    expect(result.current.tracking).toEqual({\n      gaID: 'UA-000000-2',\n      trackErrors: true,\n      customWebAnalytics: null,\n    });\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/hooks/useConfig.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/hooks/useOtelSpan.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/hooks/useOtelTrace.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/hooks/useTraceDiscovery.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/hooks/useTraceDiscovery.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/index.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":36,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1143,1146],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1143,1146],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2017 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\n// site-prefix.js must be the first import of the main webpack entrypoint\n// because it configures the webpack publicPath.\n\nimport './site-prefix';\n\nimport React from 'react';\nimport { Router } from 'react-router-dom';\nimport { CompatRouter } from 'react-router-dom-v5-compat';\nimport { createRoot } from 'react-dom/client';\n\nimport JaegerUIApp from './components/App';\nimport { context as trackingContext } from './utils/tracking';\nimport { history } from './utils/configure-store';\n\n// these need to go after the App import\n\nimport 'u-basscss/css/flexbox.css';\nimport 'u-basscss/css/layout.css';\nimport 'u-basscss/css/margin.css';\nimport 'u-basscss/css/padding.css';\nimport 'u-basscss/css/position.css';\nimport 'u-basscss/css/typography.css';\n\nconst UI_ROOT_ID = 'jaeger-ui-root';\nconst rootElement = document.getElementById(UI_ROOT_ID);\nif (!rootElement) {\n  throw new Error(`Element with id ${UI_ROOT_ID} not found`);\n}\n\nconst root = createRoot(rootElement);\n\nif (typeof trackingContext === 'object' && trackingContext !== null) {\n  (trackingContext as any).context(() => {\n    root.render(\n      <Router history={history}>\n        <CompatRouter>\n          <JaegerUIApp />\n        </CompatRouter>\n      </Router>\n    );\n  });\n} else {\n  root.render(\n    <Router history={history}>\n      <CompatRouter>\n        <JaegerUIApp />\n      </CompatRouter>\n    </Router>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/middlewares/index.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/middlewares/index.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":14,"column":94,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":97,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[546,549],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[546,549],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2017 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport promiseMiddleware from 'redux-promise-middleware';\nimport { replace } from 'redux-first-history';\nimport { Middleware } from 'redux';\n\nimport { searchTraces } from '../actions/jaeger-api';\nimport { getUrl as getSearchUrl } from '../components/SearchTracePage/url';\nimport { ReduxState } from '../types';\n\nexport { default as trackMiddleware } from './track';\n\nexport const historyUpdateMiddleware: Middleware<{}, ReduxState> = store => next => (action: any) => {\n  if (action.type === String(searchTraces)) {\n    const url = getSearchUrl(action.meta.query);\n    store.dispatch(replace(url));\n  }\n  return next(action);\n};\n\nexport const promise = promiseMiddleware;\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/middlewares/track.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":11,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[427,430],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[427,430],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":17,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[674,677],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[674,677],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2017 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Action } from 'redux-actions';\nimport { Dispatch, Store } from 'redux';\n\nimport { middlewareHooks as timelineHooks } from '../components/TracePage/TraceTimelineViewer/duck.track';\nimport { isWaEnabled } from '../utils/tracking';\nimport { ReduxState } from '../types';\n\ntype TMiddlewareFn = (store: Store<ReduxState>, action: Action<any>) => void;\n\nconst middlewareHooks: { [actionType: string]: TMiddlewareFn } = { ...timelineHooks };\n\nfunction trackingMiddleware(store: Store<ReduxState>) {\n  return function inner(next: Dispatch<ReduxState>) {\n    return function core(action: any) {\n      const { type } = action;\n      if (typeof middlewareHooks[type] === 'function') {\n        middlewareHooks[type](store, action);\n      }\n      return next(action);\n    };\n  };\n}\n\nexport default isWaEnabled ? trackingMiddleware : undefined;\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/OtelFacade.bench.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_k' is assigned a value but never used.","line":60,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":60,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_p' is assigned a value but never used.","line":61,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":61,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_a' is assigned a value but never used.","line":62,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":62,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2025 The Jaeger Authors.\n// SPDX-License-Identifier: Apache-2.0\n\nimport OtelTraceFacade from './OtelTraceFacade';\nimport { Trace } from '../types/trace';\nimport { IOtelTrace } from '../types/otel';\n\ndescribe('OtelFacade Benchmarks', () => {\n  const numSpans = 10000;\n  const mockTrace: Trace = {\n    traceID: 'test-trace',\n    traceName: 'test-trace',\n    tracePageTitle: 'test-trace',\n    traceEmoji: '',\n    duration: 1000 as IOtelTrace['duration'],\n    startTime: 0 as IOtelTrace['startTime'],\n    endTime: 1000 as IOtelTrace['endTime'],\n    services: [{ name: 'test-service', numberOfSpans: numSpans }],\n    processes: {\n      p1: { serviceName: 'test-service', tags: [] },\n    },\n    spans: Array.from({ length: numSpans }, (_, i) => ({\n      spanID: `span-${i}`,\n      traceID: 'test-trace',\n      processID: 'p1',\n      operationName: `op-${i}`,\n      startTime: i,\n      duration: 10,\n      logs: [],\n      tags: [{ key: 'span.kind', value: 'server' }],\n      references:\n        i > 0 ? [{ refType: 'CHILD_OF', spanID: `span-${i - 1}`, traceID: 'test-trace', span: null }] : [],\n      depth: i,\n      hasChildren: true,\n      process: { serviceName: 'test-service', tags: [] },\n      relativeStartTime: i,\n      childSpans: [],\n      warnings: [],\n      subsidiarilyReferencedBy: [],\n    })),\n    spanMap: new Map(),\n    rootSpans: [],\n    asOtelTrace() {\n      throw new Error('Not implemented');\n    },\n  };\n\n  it('benchmark: facade creation and access', () => {\n    const start = performance.now();\n    const facade = new OtelTraceFacade(mockTrace);\n    const end = performance.now();\n    const creationTime = end - start;\n\n    console.log(`Facade creation for ${numSpans} spans: ${creationTime.toFixed(4)}ms`);\n\n    const startAccess = performance.now();\n    const spans = facade.spans;\n    spans.forEach(span => {\n      // Access pre-computed fields\n      const _k = span.kind;\n      const _p = span.parentSpanID;\n      const _a = span.attributes;\n    });\n    const endAccess = performance.now();\n    const accessTime = endAccess - startAccess;\n\n    console.log(\n      `Accessing kind, parentSpanId, and attributes for ${numSpans} spans: ${accessTime.toFixed(4)}ms`\n    );\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/OtelSpanFacade.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/OtelSpanFacade.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":87,"column":77,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":87,"endColumn":80,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2933,2936],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2933,2936],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2025 The Jaeger Authors.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Span } from '../types/trace';\nimport {\n  IOtelSpan,\n  IAttribute,\n  AttributeValue,\n  IEvent,\n  ILink,\n  IStatus,\n  StatusCode,\n  SpanKind,\n  IResource,\n  IScope,\n} from '../types/otel';\n\nexport default class OtelSpanFacade implements IOtelSpan {\n  private legacySpan: Span;\n  private _kind: SpanKind;\n  private _parentSpanID: string | undefined;\n  private _attributes: IAttribute[];\n  private _events: IEvent[];\n  private _links: ILink[];\n  private _status: IStatus;\n  private _resource: IResource;\n  private _inboundLinks: ILink[];\n  private _childSpans: ReadonlyArray<IOtelSpan> = [];\n  private _parentSpan?: IOtelSpan;\n\n  constructor(legacySpan: Span) {\n    this.legacySpan = legacySpan;\n\n    // Pre-compute expensive fields\n    const kindTag = this.legacySpan.tags.find(t => t.key === 'span.kind');\n    this._kind = SpanKind.INTERNAL;\n    if (kindTag) {\n      const val = String(kindTag.value).toUpperCase();\n      if (val in SpanKind) {\n        this._kind = SpanKind[val as keyof typeof SpanKind];\n      }\n    }\n\n    // Find parent span ID according to the following priority:\n    // 1. Earliest CHILD_OF reference with the same traceID\n    // 2. Otherwise, earliest FOLLOWS_FROM reference with the same traceID\n    // 3. If no reference with same traceID exists, parent is undefined\n    const { references, traceID } = this.legacySpan;\n    const parentSpanRef =\n      references.find(r => r.traceID === traceID && r.refType === 'CHILD_OF') ??\n      references.find(r => r.traceID === traceID && r.refType === 'FOLLOWS_FROM');\n    this._parentSpanID = parentSpanRef?.spanID;\n\n    this._attributes = OtelSpanFacade.toOtelAttributes(this.legacySpan.tags);\n\n    this._events = this.legacySpan.logs.map(log => ({\n      timestamp: log.timestamp as IEvent['timestamp'],\n      name: (log.fields.find(f => f.key === 'event')?.value as string) || 'log',\n      attributes: OtelSpanFacade.toOtelAttributes(log.fields),\n    }));\n\n    this._links = this.legacySpan.references\n      .filter(ref => ref !== parentSpanRef)\n      .map(ref => ({\n        traceID: ref.traceID,\n        spanID: ref.spanID,\n        attributes: [], // Legacy references don't have attributes\n      }));\n\n    const errorTag = this.legacySpan.tags.find(t => t.key === 'error');\n    this._status =\n      errorTag && errorTag.value ? { code: StatusCode.ERROR, message: 'error' } : { code: StatusCode.OK };\n\n    const process = this.legacySpan.process;\n    this._resource = {\n      attributes: process ? OtelSpanFacade.toOtelAttributes(process.tags) : [],\n      serviceName: process ? process.serviceName : 'unknown-service',\n    };\n\n    this._inboundLinks = this.legacySpan.subsidiarilyReferencedBy.map(ref => ({\n      traceID: ref.traceID,\n      spanID: ref.spanID,\n      attributes: [],\n    }));\n  }\n\n  private static toOtelAttributes(tags: ReadonlyArray<{ key: string; value: any }>): IAttribute[] {\n    return tags\n      .filter(kv => kv.value !== null && kv.value !== undefined)\n      .map(kv => ({\n        key: kv.key,\n        value: kv.value as AttributeValue,\n      }));\n  }\n\n  get traceID(): string {\n    return this.legacySpan.traceID;\n  }\n\n  get spanID(): string {\n    return this.legacySpan.spanID;\n  }\n\n  get parentSpanID(): string | undefined {\n    return this._parentSpanID;\n  }\n\n  get name(): string {\n    return this.legacySpan.operationName;\n  }\n\n  get kind(): SpanKind {\n    return this._kind;\n  }\n\n  get startTime(): IOtelSpan['startTime'] {\n    return this.legacySpan.startTime as IOtelSpan['startTime'];\n  }\n\n  get endTime(): IOtelSpan['endTime'] {\n    return (this.legacySpan.startTime + this.legacySpan.duration) as IOtelSpan['endTime'];\n  }\n\n  get duration(): IOtelSpan['duration'] {\n    return this.legacySpan.duration as IOtelSpan['duration'];\n  }\n\n  get attributes(): IAttribute[] {\n    return this._attributes;\n  }\n\n  get events(): IEvent[] {\n    return this._events;\n  }\n\n  get links(): ILink[] {\n    return this._links;\n  }\n\n  get status(): IStatus {\n    return this._status;\n  }\n\n  get resource(): IResource {\n    return this._resource;\n  }\n\n  get parentSpan(): IOtelSpan | undefined {\n    return this._parentSpan;\n  }\n\n  set parentSpan(value: IOtelSpan | undefined) {\n    this._parentSpan = value;\n  }\n\n  get instrumentationScope(): IScope {\n    // Legacy Jaeger doesn't have explicit instrumentation scope,\n    // but we can look for it in tags if it was mapped there by exporters.\n    const name =\n      (this.legacySpan.tags.find(t => t.key === 'otel.library.name')?.value as string) || 'unknown';\n    const version = this.legacySpan.tags.find(t => t.key === 'otel.library.version')?.value as string;\n    return { name, version };\n  }\n\n  get depth(): number {\n    return this.legacySpan.depth;\n  }\n\n  get hasChildren(): boolean {\n    return this._childSpans.length > 0;\n  }\n\n  get childSpans(): ReadonlyArray<IOtelSpan> {\n    return this._childSpans;\n  }\n\n  set childSpans(value: ReadonlyArray<IOtelSpan>) {\n    this._childSpans = value;\n  }\n\n  get relativeStartTime(): IOtelSpan['relativeStartTime'] {\n    return this.legacySpan.relativeStartTime as IOtelSpan['relativeStartTime'];\n  }\n\n  get inboundLinks(): ILink[] {\n    return this._inboundLinks;\n  }\n\n  // Legacy Jaeger-specific properties for UI compatibility\n  get warnings(): ReadonlyArray<string> | null {\n    return this.legacySpan.warnings;\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/OtelTraceFacade.test.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":85,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":85,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2545,2548],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2545,2548],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":87,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":87,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2632,2635],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2632,2635],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2025 The Jaeger Authors.\n// SPDX-License-Identifier: Apache-2.0\n\nimport OtelTraceFacade from './OtelTraceFacade';\nimport { Trace, Span, Process } from '../types/trace';\nimport { IOtelTrace } from '../types/otel';\n\ndescribe('OtelTraceFacade', () => {\n  const mockProcess: Process = {\n    serviceName: 'test-service',\n    tags: [],\n  };\n\n  const mockSpan: Span = {\n    traceID: 'trace-1',\n    spanID: 'span-1',\n    operationName: 'test-op',\n    startTime: 1000 as IOtelTrace['startTime'],\n    duration: 500 as IOtelTrace['duration'],\n    processID: 'p1',\n    process: mockProcess,\n    tags: [],\n    logs: [],\n    references: [],\n    depth: 0,\n    hasChildren: false,\n    relativeStartTime: 0,\n    childSpans: [],\n    warnings: [],\n    subsidiarilyReferencedBy: [],\n  };\n\n  const mockLegacyTrace: Trace = {\n    traceID: 'trace-1',\n    spans: [mockSpan],\n    processes: { p1: mockProcess },\n    duration: 500 as IOtelTrace['duration'],\n    startTime: 1000 as IOtelTrace['startTime'],\n    endTime: 1500 as IOtelTrace['endTime'],\n    traceName: 'test-trace',\n    tracePageTitle: 'test-trace-title',\n    traceEmoji: '',\n    services: [{ name: 'test-service', numberOfSpans: 1 }],\n    spanMap: new Map([[mockSpan.spanID, mockSpan]]),\n    rootSpans: [mockSpan],\n    asOtelTrace() {\n      throw new Error('Not implemented');\n    },\n  };\n\n  let facade: OtelTraceFacade;\n\n  beforeEach(() => {\n    facade = new OtelTraceFacade(mockLegacyTrace);\n  });\n\n  it('maps basic trace fields', () => {\n    expect(facade.traceID).toBe('trace-1');\n    expect(facade.traceName).toBe('test-trace');\n    expect(facade.duration).toBe(500 as IOtelTrace['duration']);\n    expect(facade.startTime).toBe(1000 as IOtelTrace['startTime']);\n    expect(facade.endTime).toBe(1500 as IOtelTrace['endTime']);\n  });\n\n  it('maps spans to OtelSpanFacade instances', () => {\n    expect(facade.spans).toHaveLength(1);\n    expect(facade.spans[0].spanID).toBe('span-1');\n    expect(facade.spans[0].name).toBe('test-op');\n  });\n\n  it('maps services summary', () => {\n    expect(facade.services).toEqual([{ name: 'test-service', numberOfSpans: 1 }]);\n  });\n\n  describe('span wiring', () => {\n    const parentSpan: Span = { ...mockSpan, spanID: 'parent', hasChildren: true };\n    const childSpan: Span = {\n      ...mockSpan,\n      spanID: 'child',\n      references: [{ refType: 'CHILD_OF', traceID: 'trace-1', spanID: 'parent', span: parentSpan }],\n    };\n    const linkSpan: Span = { ...mockSpan, spanID: 'link' };\n\n    // Set up child reference on parent\n    (parentSpan as any).childSpans = [childSpan];\n    // Set up link reference on child\n    (childSpan as any).subsidiarilyReferencedBy = [\n      { refType: 'FOLLOWS_FROM', traceID: 'trace-1', spanID: 'link', span: linkSpan },\n    ];\n\n    const complexTrace: Trace = {\n      ...mockLegacyTrace,\n      spans: [parentSpan, childSpan, linkSpan],\n      spanMap: new Map([\n        ['parent', parentSpan],\n        ['child', childSpan],\n        ['link', linkSpan],\n      ]),\n      rootSpans: [parentSpan],\n    };\n\n    it('wires up parentSpan and childSpans correctly', () => {\n      const complexFacade = new OtelTraceFacade(complexTrace);\n      const parentFacade = complexFacade.spanMap.get('parent')!;\n      const childFacade = complexFacade.spanMap.get('child')!;\n\n      expect(childFacade.parentSpanID).toBe('parent');\n      expect(childFacade.parentSpan).toBe(parentFacade);\n      expect(parentFacade.childSpans).toContain(childFacade);\n      expect(parentFacade.hasChildren).toBe(true);\n    });\n\n    it('wires up link span references correctly', () => {\n      const complexFacade = new OtelTraceFacade(complexTrace);\n      const childFacade = complexFacade.spanMap.get('child')!;\n      const linkFacade = complexFacade.spanMap.get('link')!;\n\n      // Check links (not explicitly set in this mock, but let's test the mechanism)\n      // Actually, my populator uses inboundLinks which I set\n      expect(childFacade.inboundLinks).toHaveLength(1);\n      expect(childFacade.inboundLinks[0].spanID).toBe('link');\n      expect(childFacade.inboundLinks[0].span).toBe(linkFacade);\n    });\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/OtelTraceFacade.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":48,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":48,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1648,1651],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1648,1651],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":51,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1783,1786],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1783,1786],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2025 The Jaeger Authors.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Trace } from '../types/trace';\nimport { IOtelTrace, IOtelSpan } from '../types/otel';\nimport OtelSpanFacade from './OtelSpanFacade';\n\nexport default class OtelTraceFacade implements IOtelTrace {\n  private legacyTrace: Trace;\n  private _spans: IOtelSpan[];\n  private _spanMap: Map<string, IOtelSpan>;\n  private _rootSpans: IOtelSpan[];\n  private _orphanSpanCount: number;\n\n  constructor(legacyTrace: Trace) {\n    this.legacyTrace = legacyTrace;\n\n    // Pre-compute spans\n    this._spans = this.legacyTrace.spans.map(s => new OtelSpanFacade(s));\n\n    // Build spanMap\n    this._spanMap = new Map();\n    this._spans.forEach(span => {\n      this._spanMap.set(span.spanID, span);\n    });\n\n    // Build rootSpans from legacy trace rootSpans\n    this._rootSpans = this.legacyTrace.rootSpans.map(s => {\n      const otelSpan = this._spanMap.get(s.spanID);\n      if (!otelSpan) throw new Error(`Root span ${s.spanID} not found in spanMap`);\n      return otelSpan;\n    });\n\n    // Calculate orphan span count\n    // A span is orphaned if it has a parentSpanID but the parent is not in the trace\n    this._orphanSpanCount = this._spans.filter(\n      s => s.parentSpanID && !this._spanMap.has(s.parentSpanID)\n    ).length;\n\n    // Wire up parentSpan, childSpans, and link span references\n    this._spans.forEach(span => {\n      const facade = span as OtelSpanFacade;\n      if (facade.parentSpanID) {\n        facade.parentSpan = this._spanMap.get(facade.parentSpanID);\n      }\n\n      // Populate childSpans using legacySpan.childSpans\n      const legacySpan = (facade as any).legacySpan;\n      if (legacySpan && legacySpan.childSpans) {\n        facade.childSpans = legacySpan.childSpans\n          .map((s: any) => this._spanMap.get(s.spanID))\n          .filter(Boolean);\n      }\n\n      // Wire up links\n      facade.links.forEach(link => {\n        link.span = this._spanMap.get(link.spanID);\n      });\n\n      // Wire up inboundLinks\n      facade.inboundLinks.forEach(link => {\n        link.span = this._spanMap.get(link.spanID);\n      });\n    });\n  }\n\n  get traceID(): string {\n    return this.legacyTrace.traceID;\n  }\n\n  get spans(): IOtelSpan[] {\n    return this._spans;\n  }\n\n  get spanMap(): Map<string, IOtelSpan> {\n    return this._spanMap;\n  }\n\n  get rootSpans(): IOtelSpan[] {\n    return this._rootSpans;\n  }\n\n  get duration(): IOtelTrace['duration'] {\n    return this.legacyTrace.duration as IOtelTrace['duration'];\n  }\n\n  get startTime(): IOtelTrace['startTime'] {\n    return this.legacyTrace.startTime as IOtelTrace['startTime'];\n  }\n\n  get endTime(): IOtelTrace['endTime'] {\n    return this.legacyTrace.endTime as IOtelTrace['endTime'];\n  }\n\n  get traceName(): string {\n    return this.legacyTrace.traceName;\n  }\n\n  get tracePageTitle(): string {\n    return this.legacyTrace.tracePageTitle;\n  }\n\n  get traceEmoji(): string {\n    return this.legacyTrace.traceEmoji;\n  }\n\n  get services(): ReadonlyArray<{ name: string; numberOfSpans: number }> {\n    return this.legacyTrace.services;\n  }\n\n  get orphanSpanCount(): number {\n    return this._orphanSpanCount;\n  }\n\n  hasErrors(): boolean {\n    return this._spans.some(sp => sp.status.code === 'ERROR');\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/ddg/GraphModel/getDerivedViewModifiers.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/ddg/GraphModel/getDerivedViewModifiers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/ddg/GraphModel/getEdgeId.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/ddg/GraphModel/getPathElemHasher.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/ddg/GraphModel/getPathElemHasher.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/ddg/GraphModel/index.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/ddg/GraphModel/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/ddg/PathElem.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/ddg/PathElem.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/ddg/getStateEntryKey.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/ddg/sample-paths.test.resources.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/ddg/transformDdgData.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/ddg/transformDdgData.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":20,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[499,502],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[499,502],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":20,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[524,527],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[524,527],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":21,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[564,567],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[564,567],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2019 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport memoizeOne from 'memoize-one';\nimport objectHash from 'object-hash';\n\nimport {\n  PathElem,\n  TDdgModel,\n  TDdgPayload,\n  TDdgPayloadEntry,\n  TDdgPath,\n  TDdgDistanceToPathElems,\n  TDdgServiceMap,\n} from './types';\n\nconst stringifyEntry = ({ service, operation }: TDdgPayloadEntry) => `${service}\\v${operation}`;\n\n// TODO: Everett Tech Debt: Fix KeyValuePair types\nfunction group(arg: { key: string; value: any }[]): Record<string, any[]> {\n  const result: Record<string, any[]> = {};\n  arg.forEach(({ key, value }) => {\n    if (!result[key]) result[key] = [];\n    result[key].push(value);\n  });\n  return result;\n}\n\nfunction transformDdgData(\n  { dependencies }: TDdgPayload,\n  { service: focalService, operation: focalOperation }: { service: string; operation?: string }\n): TDdgModel {\n  const serviceMap: TDdgServiceMap = new Map();\n  const distanceToPathElems: TDdgDistanceToPathElems = new Map();\n  const pathCompareValues: Map<TDdgPayloadEntry[], string> = new Map();\n  const hashArg: string[] = [];\n\n  const paths = dependencies\n    .sort(({ path: a }, { path: b }) => {\n      let aCompareValue = pathCompareValues.get(a);\n      if (!aCompareValue) {\n        aCompareValue = a.map(stringifyEntry).join();\n        pathCompareValues.set(a, aCompareValue);\n      }\n      let bCompareValue = pathCompareValues.get(b);\n      if (!bCompareValue) {\n        bCompareValue = b.map(stringifyEntry).join();\n        pathCompareValues.set(b, bCompareValue);\n      }\n      if (aCompareValue > bCompareValue) return 1;\n      if (aCompareValue < bCompareValue) return -1;\n      return 0;\n    })\n    .map(({ path: payloadPath, attributes }) => {\n      // Default value necessary as sort is not called if there is only one path\n      hashArg.push(pathCompareValues.get(payloadPath) || payloadPath.map(stringifyEntry).join());\n\n      const { exemplar_trace_id: traceIDs } = group(attributes);\n\n      // Path with stand-in values is necessary for assigning PathElem.memberOf\n      const path: TDdgPath = { focalIdx: -1, members: [], traceIDs };\n\n      path.members = payloadPath.map(({ operation: operationName, service: serviceName }, i) => {\n        // Ensure pathElem.service exists, else create it\n        let service = serviceMap.get(serviceName);\n        if (!service) {\n          service = {\n            name: serviceName,\n            operations: new Map(),\n          };\n          serviceMap.set(serviceName, service);\n        }\n\n        // Ensure service has operation, else add it\n        let operation = service.operations.get(operationName);\n        if (!operation) {\n          operation = {\n            name: operationName,\n            service,\n            pathElems: [],\n          };\n          service.operations.set(operationName, operation);\n        }\n\n        // Set focalIdx to first occurrence of focalNode\n        if (\n          path.focalIdx === -1 &&\n          serviceName === focalService &&\n          (focalOperation == null || operationName === focalOperation)\n        ) {\n          path.focalIdx = i;\n        }\n\n        const pathElem = new PathElem({ path, operation, memberIdx: i });\n        operation.pathElems.push(pathElem);\n        return pathElem;\n      });\n\n      if (path.focalIdx === -1) {\n        throw new Error('A payload path lacked the focalNode');\n      }\n\n      // Track all pathElems by their distance for visibilityIdx assignment and hop management\n      // This needs to be a separate loop as path.focalIdx must be set before distance can be calculated\n      path.members.forEach(member => {\n        const elems = distanceToPathElems.get(member.distance);\n        if (elems) {\n          elems.push(member);\n        } else {\n          distanceToPathElems.set(member.distance, [member]);\n        }\n      });\n\n      return path;\n    });\n\n  // Assign visibility indices such there is a positive, dependent correlation between visibilityIdx and distance\n  let downstream = 0;\n  let downstreamElems: PathElem[] | void;\n  let upstream = 1;\n  let upstreamElems: PathElem[] | void;\n  const visIdxToPathElem: PathElem[] = [];\n  function setIdx(pathElem: PathElem) {\n    pathElem.visibilityIdx = visIdxToPathElem.length;\n    visIdxToPathElem.push(pathElem);\n  }\n  do {\n    downstreamElems = distanceToPathElems.get(downstream--);\n    upstreamElems = distanceToPathElems.get(upstream++);\n    if (downstreamElems) downstreamElems.forEach(setIdx);\n    if (upstreamElems) upstreamElems.forEach(setIdx);\n  } while (downstreamElems || upstreamElems);\n\n  const hash = objectHash(hashArg).slice(0, 16);\n\n  return {\n    paths,\n    hash,\n    distanceToPathElems,\n    services: serviceMap,\n    visIdxToPathElem,\n  };\n}\n\nexport default memoizeOne(transformDdgData);\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/ddg/transformTracesToPaths.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/ddg/transformTracesToPaths.ts","messages":[{"ruleId":"@typescript-eslint/no-use-before-define","severity":1,"message":"'processPath' was used before it was defined.","line":30,"column":11,"nodeType":"Identifier","messageId":"noUseBeforeDefine","endLine":30,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2019 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport memoizeOne from 'memoize-one';\n\nimport { TDdgPayloadEntry, TDdgPayloadPath, TDdgPayload } from './types';\nimport { FetchedTrace } from '../../types';\nimport { IOtelSpan, IOtelTrace, SpanKind } from '../../types/otel';\n\nconst isKindServer = (span: IOtelSpan) => span.kind === SpanKind.SERVER;\n\nfunction transformTracesToPaths(\n  traces: Record<string, FetchedTrace<IOtelTrace>>,\n  focalService: string,\n  focalOperation?: string\n): TDdgPayload {\n  const dependenciesMap = new Map<string, TDdgPayloadPath>();\n  Object.values(traces).forEach(({ data }) => {\n    if (data) {\n      // Use the pre-built spanMap and rootSpans from the trace object\n      const rootSpans = data.rootSpans;\n      const { traceID } = data;\n\n      // Helper function to walk all paths through the tree, building IOtelSpan[] paths directly\n      const walkPaths = (span: IOtelSpan, currentPath: IOtelSpan[]) => {\n        const pathWithCurrent = [...currentPath, span];\n\n        if (span.childSpans.length === 0) {\n          // Leaf node - process the complete path\n          processPath(pathWithCurrent);\n        } else {\n          // Continue walking through children\n          span.childSpans.forEach(child => {\n            walkPaths(child, pathWithCurrent);\n          });\n        }\n      };\n\n      const processPath = (pathSpans: IOtelSpan[]) => {\n        if (pathSpans.length === 0) return;\n\n        const paths = pathSpans.reduce((reducedSpans: IOtelSpan[], span: IOtelSpan): IOtelSpan[] => {\n          if (reducedSpans.length === 0) {\n            reducedSpans.push(span);\n          } else if (\n            reducedSpans[reducedSpans.length - 1].resource.serviceName !== span.resource.serviceName ||\n            isKindServer(span)\n          ) {\n            reducedSpans.push(span);\n          }\n          return reducedSpans;\n        }, []);\n        const path: TDdgPayloadEntry[] = paths.map(({ resource, name: operation }) => ({\n          service: resource.serviceName,\n          operation,\n        }));\n        if (\n          path.some(\n            ({ service, operation }) =>\n              service === focalService && (!focalOperation || operation === focalOperation)\n          )\n        ) {\n          const pathKey = path.map(value => `${value.operation}:${value.service}`).join('/');\n          const dependency = dependenciesMap.get(pathKey);\n          if (!dependency) {\n            dependenciesMap.set(pathKey, {\n              path,\n              attributes: [\n                {\n                  key: 'exemplar_trace_id',\n                  value: traceID,\n                },\n              ],\n            });\n          } else {\n            dependency.attributes.push({\n              key: 'exemplar_trace_id',\n              value: traceID,\n            });\n          }\n        }\n      };\n\n      // Start walking from all root spans\n      rootSpans.forEach(rootSpan => {\n        walkPaths(rootSpan, []);\n      });\n    }\n  });\n  const dependencies = Array.from(dependenciesMap.values());\n  return { dependencies };\n}\n\nexport default memoizeOne(transformTracesToPaths);\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/ddg/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/ddg/visibility-codec.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/ddg/visibility-codec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/find-trace-page-header-parts.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/link-patterns.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/link-patterns.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":16,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[601,604],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[601,604],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":29,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1004,1007],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1004,1007],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":32,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1128,1131],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1128,1131],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":38,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1268,1271],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1268,1271],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":38,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1295,1298],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1295,1298],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":52,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":52,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1716,1719],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1716,1719],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":52,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":52,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1728,1731],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1728,1731],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":54,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1798,1801],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1798,1801],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":57,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1872,1875],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1872,1875],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":60,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":60,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1959,1962],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1959,1962],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":71,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":71,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2167,2170],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2167,2170],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":73,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":73,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2233,2236],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2233,2236],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":103,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":103,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3217,3220],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3217,3220],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":141,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":141,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4142,4145],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4142,4145],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":143,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":143,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4218,4221],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4218,4221],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":169,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":169,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4758,4761],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4758,4761],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":179,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":179,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5082,5085],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5082,5085],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":237,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":237,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7107,7110],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7107,7110],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":18,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2017 The Jaeger Authors.\n// SPDX-License-Identifier: Apache-2.0\n\nimport _uniq from 'lodash/uniq';\nimport memoize from 'lru-memoize';\n\nimport { getConfigValue } from '../utils/config/get-config';\nimport { encodedStringSupplant, getParamNames } from '../utils/stringSupplant';\nimport { getParameterAndFormatter } from '../utils/link-formatting';\nimport { TNil } from '../types';\nimport { Hyperlink } from '../types/hyperlink';\nimport { IOtelSpan, IOtelTrace, IAttribute } from '../types/otel';\n\ntype ProcessedTemplate = {\n  parameters: string[];\n  template: (template: { [key: string]: any }) => string;\n};\n\nconst ENABLE_LEGACY_LINK_PATTERNS = true;\n\ntype LinkPatternType = 'attributes' | 'resource' | 'events' | 'traces';\ntype LegacyLinkPatternType = 'tags' | 'process' | 'logs';\n\nconst VALID_TRACE_KEYS = ['traceID', 'traceName', 'duration', 'startTime', 'endTime'];\n\nconst VALID_SPAN_KEYS = ['spanID', 'operationName', 'duration', 'startTime'];\n\ntype ProcessedLinkPattern = {\n  object: any;\n  type: (link: LinkPatternType | LegacyLinkPatternType) => boolean;\n  key: (link: string) => boolean;\n  value: (value: any) => boolean;\n  url: ProcessedTemplate;\n  text: ProcessedTemplate;\n  parameters: string[];\n};\n\nexport function processTemplate(template: any, encodeFn: (unencoded: any) => string): ProcessedTemplate {\n  if (typeof template !== 'string') {\n    if (template && Array.isArray(template.parameters) && typeof template.template === 'function') {\n      return template;\n    }\n\n    throw new Error('Invalid template');\n  }\n  return {\n    parameters: getParamNames(template),\n    template: encodedStringSupplant.bind(null, template, encodeFn),\n  };\n}\n\nexport function createTestFunction(entry: any): (arg: any) => boolean {\n  if (typeof entry === 'string') {\n    return (arg: any) => arg === entry;\n  }\n  if (Array.isArray(entry)) {\n    return (arg: any) => entry.indexOf(arg) > -1;\n  }\n  if (entry instanceof RegExp) {\n    return (arg: any) => entry.test(arg);\n  }\n  if (typeof entry === 'function') {\n    return entry;\n  }\n  if (entry == null) {\n    return () => true;\n  }\n  throw new Error(`Invalid value: ${entry}`);\n}\n\nconst identity = (a: any): typeof a => a;\n\nexport function processLinkPattern(pattern: any): ProcessedLinkPattern | TNil {\n  try {\n    const url = processTemplate(pattern.url, encodeURIComponent);\n    const text = processTemplate(pattern.text, identity);\n    return {\n      object: pattern,\n      type: createTestFunction(pattern.type),\n      key: createTestFunction(pattern.key),\n      value: createTestFunction(pattern.value),\n      url,\n      text,\n      parameters: _uniq(url.parameters.concat(text.parameters)),\n    };\n  } catch (error) {\n    console.error(`Ignoring invalid link pattern: ${error}`, pattern);\n    return null;\n  }\n}\n\nexport function getParameterInArray(name: string, array: ReadonlyArray<IAttribute>): IAttribute | undefined {\n  if (array) {\n    return array.find(entry => entry.key === name);\n  }\n  return undefined;\n}\n\nexport function getParameterInAncestor(name: string, span: IOtelSpan): IAttribute | undefined {\n  let currentSpan: IOtelSpan | undefined = span;\n  while (currentSpan) {\n    if (VALID_SPAN_KEYS.includes(name)) {\n      let value: any;\n      switch (name) {\n        case 'spanID':\n          value = currentSpan.spanID;\n          break;\n        case 'operationName':\n          value = currentSpan.name;\n          break;\n        case 'duration':\n          value = currentSpan.duration;\n          break;\n        case 'startTime':\n          value = currentSpan.startTime;\n          break;\n        default:\n          // If it's a valid span key but no value found, continue to check attributes\n          break;\n      }\n      if (value !== undefined) {\n        return { key: name, value };\n      }\n    }\n\n    const result =\n      getParameterInArray(name, currentSpan.attributes) ||\n      getParameterInArray(name, currentSpan.resource.attributes);\n    if (result) {\n      return result;\n    }\n    currentSpan = currentSpan.parentSpan;\n  }\n\n  return undefined;\n}\n\nexport function getParameterInTrace(\n  name: string,\n  trace: IOtelTrace\n): { key: string; value: any } | undefined {\n  if (VALID_TRACE_KEYS.includes(name)) {\n    let value: any;\n    switch (name) {\n      case 'traceID':\n        value = trace.traceID;\n        break;\n      case 'traceName':\n        value = trace.traceName;\n        break;\n      case 'duration':\n        value = trace.duration;\n        break;\n      case 'startTime':\n        value = trace.startTime;\n        break;\n      case 'endTime':\n        value = trace.endTime;\n        break;\n      default:\n        return undefined;\n    }\n    return { key: name, value };\n  }\n\n  return undefined;\n}\n\nfunction callTemplate(template: ProcessedTemplate, data: any): string {\n  return template.template(data);\n}\n\nexport function computeTraceLink(linkPatterns: ProcessedLinkPattern[], trace: IOtelTrace): Hyperlink[] {\n  const result: Hyperlink[] = [];\n\n  linkPatterns\n    .filter(pattern => pattern.type('traces'))\n    .forEach(pattern => {\n      const parameterValues: Record<string, any> = {};\n      const allParameters = pattern.parameters.every(parameter => {\n        const { parameterName, formatFunction } = getParameterAndFormatter(parameter);\n        const traceKV = getParameterInTrace(parameterName, trace);\n\n        if (traceKV) {\n          // At this point is safe to access to trace object using parameter variable because\n          // we validated parameter against validKeys, this implies that parameter a keyof IOtelTrace.\n          parameterValues[parameterName] = formatFunction ? formatFunction(traceKV.value) : traceKV.value;\n\n          return true;\n        }\n        return false;\n      });\n\n      if (allParameters) {\n        result.push({\n          url: callTemplate(pattern.url, parameterValues),\n          text: callTemplate(pattern.text, parameterValues),\n        });\n      }\n    });\n\n  return result;\n}\n\n// computeLinks generates {url, text} link pairs by applying link patterms\n// to the element `itemIndex` of `items` array. The values for template\n// variables used in the patterns are looked up first in `items`, then\n// in `span.attributes` and `span.resource.attributes`, and then in ancestor spans\n// recursively via `span.parentSpan`.\nexport function computeLinks(\n  linkPatterns: ProcessedLinkPattern[],\n  span: IOtelSpan,\n  items: ReadonlyArray<IAttribute>,\n  itemIndex: number,\n  trace: IOtelTrace\n): Hyperlink[] {\n  const item = items[itemIndex];\n  let type: LinkPatternType = 'events';\n  let legacyType: LegacyLinkPatternType = 'logs';\n\n  if (span.resource.attributes === items) {\n    type = 'resource';\n    legacyType = 'process';\n  } else if (span.attributes === items) {\n    type = 'attributes';\n    legacyType = 'tags';\n  }\n\n  const result: Hyperlink[] = [];\n  linkPatterns.forEach(pattern => {\n    let typeMatches = pattern.type(type);\n    if (!typeMatches && ENABLE_LEGACY_LINK_PATTERNS) {\n      typeMatches = pattern.type(legacyType);\n    }\n\n    if (typeMatches && pattern.key(item.key) && pattern.value(item.value)) {\n      const parameterValues: Record<string, any> = {};\n      const allParameters = pattern.parameters.every(parameter => {\n        let entry;\n\n        if (parameter.startsWith('trace.')) {\n          entry = getParameterInTrace(parameter.split('trace.')[1], trace);\n        } else {\n          entry = getParameterInArray(parameter, items);\n\n          if (!entry && type !== 'resource') {\n            // do not look in ancestors for resource attributes because the same object may appear in different places in the hierarchy\n            // and the cache in getLinks uses that object as a key\n            entry = getParameterInAncestor(parameter, span);\n          }\n        }\n\n        if (entry) {\n          parameterValues[parameter] = entry.value;\n          return true;\n        }\n\n        console.warn(\n          `Skipping link pattern, missing parameter ${parameter} for key ${item.key} in ${type}.`,\n          pattern.object\n        );\n        return false;\n      });\n      if (allParameters) {\n        result.push({\n          url: callTemplate(pattern.url, parameterValues),\n          text: callTemplate(pattern.text, parameterValues),\n        });\n      }\n    }\n  });\n  return result;\n}\n\nexport function createGetLinks(\n  linkPatterns: ProcessedLinkPattern[],\n  cache: WeakMap<IAttribute, Hyperlink[]>\n): (span: IOtelSpan, items: ReadonlyArray<IAttribute>, itemIndex: number, trace: IOtelTrace) => Hyperlink[] {\n  return (span: IOtelSpan, items: ReadonlyArray<IAttribute>, itemIndex: number, trace: IOtelTrace) => {\n    if (linkPatterns.length === 0) {\n      return [];\n    }\n    const item = items[itemIndex];\n    let result = cache.get(item);\n    if (!result) {\n      result = computeLinks(linkPatterns, span, items, itemIndex, trace);\n      cache.set(item, result);\n    }\n    return result;\n  };\n}\n\nexport const processedLinks: ProcessedLinkPattern[] = (getConfigValue('linkPatterns') || [])\n  .map(processLinkPattern)\n  .filter(Boolean);\n\nexport const getTraceLinks: (trace: IOtelTrace) => Hyperlink[] = memoize(10)((trace: IOtelTrace) => {\n  return computeTraceLink(processedLinks, trace);\n});\n\nexport default createGetLinks(processedLinks, new WeakMap());\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/order-by.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/path-agnostic-decorations/index.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/path-agnostic-decorations/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/path-agnostic-decorations/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/search.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/search.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/span.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/span.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/trace-dag/DenseTrace.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":17,"column":69,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":72,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[666,669],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[666,669],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2018 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport denseTransforms from './denseTransforms';\nimport { TDenseSpan } from './types';\nimport { IOtelSpan, IOtelTrace } from '../../types/otel';\n\nfunction convSpans(spans: ReadonlyArray<IOtelSpan>) {\n  const map: Map<string, TDenseSpan> = new Map();\n  const roots: Set<string> = new Set();\n  const ids: string[] = [];\n  spans.forEach(span => {\n    const { spanID: id, name: operation, resource, parentSpanID, attributes: spanAttributes } = span;\n    ids.push(id);\n    const { serviceName: service } = resource;\n\n    const attributes = spanAttributes.reduce((accum: Record<string, any>, attr) => {\n      const { key, value } = attr;\n      return { ...accum, [key]: value };\n    }, {});\n\n    const denseSpan = {\n      id,\n      operation,\n      parentID: parentSpanID,\n      service,\n      span,\n      attributes,\n      children: new Set<string>(),\n      skipToChild: false,\n    };\n    const parent = parentSpanID && map.get(parentSpanID);\n    if (!parent) {\n      // some root spans have a parent ID but it is missing\n      roots.add(id);\n    } else {\n      parent.children.add(id);\n    }\n    map.set(id, denseSpan);\n  });\n  return { ids, map, roots };\n}\n\nfunction makeDense(spanIDs: string[], map: Map<string, TDenseSpan>) {\n  spanIDs.forEach(id => {\n    const denseSpan = map.get(id);\n    // make flow happy\n    if (denseSpan) {\n      denseTransforms(denseSpan, map);\n    }\n  });\n}\n\nexport default class DenseTrace {\n  trace: IOtelTrace;\n  rootIDs: Set<string>;\n  denseSpansMap: Map<string, TDenseSpan>;\n\n  constructor(trace: IOtelTrace) {\n    this.trace = trace;\n    const { ids, map, roots } = convSpans(trace.spans);\n    makeDense(ids, map);\n    this.rootIDs = roots;\n    this.denseSpansMap = map;\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/trace-dag/TraceDag.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/trace-dag/convPlexus.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/trace-dag/denseTransforms.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/trace-dag/id-factories.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/trace-dag/types/TDagNode.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/trace-dag/types/TDagPlexusVertex.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/trace-dag/types/index.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":14,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[335,338],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[335,338],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2018-2020 The Jaeger Authors.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { IOtelSpan } from '../../../types/otel';\nimport { TNil } from '../../../types';\n\nexport type NodeID = string;\n\nexport type TDenseSpan = {\n  span: IOtelSpan;\n  id: string;\n  service: string;\n  operation: string;\n  attributes: Record<string, any>;\n  parentID: string | TNil;\n  skipToChild: boolean;\n  children: Set<string>;\n};\n\nexport type TDenseSpanMembers = {\n  members: TDenseSpan[];\n  operation: string;\n  service: string;\n};\n\nexport type TDiffCounts = TDenseSpanMembers & {\n  a: TDenseSpan[] | null;\n  b: TDenseSpan[] | null;\n};\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/trace-viewer.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/transform-trace-data.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/model/transform-trace-data.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/prefix-url-coverage.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/reducers/config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/reducers/ddg.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/reducers/ddg.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/reducers/dependencies.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/reducers/dependencies.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":9,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[237,240],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[237,240],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":11,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[273,276],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[273,276],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":24,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[553,556],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[553,556],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":28,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[719,722],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[719,722],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2017 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { handleActions } from 'redux-actions';\n\nimport { fetchDependencies } from '../actions/jaeger-api';\n\ntype DependenciesState = {\n  dependencies: any[];\n  loading: boolean;\n  error: any;\n};\n\nconst initialState: DependenciesState = {\n  dependencies: [],\n  loading: false,\n  error: null,\n};\n\nfunction fetchStarted(state: DependenciesState): DependenciesState {\n  return { ...state, loading: true };\n}\n\nfunction fetchDepsDone(state: DependenciesState, { payload }: any): DependenciesState {\n  return { ...state, dependencies: payload.data, loading: false };\n}\n\nfunction fetchDepsErred(state: DependenciesState, { payload: error }: any): DependenciesState {\n  return { ...state, error, dependencies: [], loading: false };\n}\n\nexport default handleActions(\n  {\n    [`${fetchDependencies}_PENDING`]: fetchStarted,\n    [`${fetchDependencies}_FULFILLED`]: fetchDepsDone,\n    [`${fetchDependencies}_REJECTED`]: fetchDepsErred,\n  },\n  initialState\n);\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/reducers/embedded.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/reducers/index.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[422,425],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[422,425],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[427,430],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[427,430],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2017 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Reducer } from 'redux';\nimport config from './config';\nimport dependencies from './dependencies';\nimport ddg from './ddg';\nimport pathAgnosticDecorations from './path-agnostic-decorations';\nimport embedded from './embedded';\nimport metrics from './metrics';\nimport trace from './trace';\n\nconst reducers: Record<string, Reducer<any, any>> = {\n  config,\n  dependencies,\n  ddg,\n  embedded,\n  pathAgnosticDecorations,\n  metrics,\n  trace,\n};\n\nexport default reducers;\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/reducers/metrics.mock.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":688,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":688,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15421,15424],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15421,15424],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[{"ruleId":"no-loss-of-precision","severity":2,"message":"This number literal will lose precision at runtime.","line":588,"column":28,"nodeType":"Literal","messageId":"noLossOfPrecision","endLine":588,"endColumn":48,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-loss-of-precision","severity":2,"message":"This number literal will lose precision at runtime.","line":652,"column":28,"nodeType":"Literal","messageId":"noLossOfPrecision","endLine":652,"endColumn":48,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2021 The Jaeger Authors.\n// SPDX-License-Identifier: Apache-2.0\n\nconst serviceLatencies50 = {\n  status: 'fulfilled',\n  value: {\n    name: 'service_latencies',\n    type: 'GAUGE',\n    help: '0.5th quantile latency, grouped by service',\n    quantile: 0.5,\n    metrics: [\n      {\n        labels: [\n          {\n            name: 'service_name',\n            value: 'cartservice',\n          },\n        ],\n        metricPoints: [\n          {\n            gaugeValue: {\n              doubleValue: 189.85919098822325,\n            },\n            timestamp: '2021-09-10T11:03:43.806Z',\n          },\n          {\n            gaugeValue: {\n              doubleValue: 189.85926305015352,\n            },\n            timestamp: '2021-09-10T11:04:43.806Z',\n          },\n        ],\n      },\n    ],\n  },\n};\nconst serviceLatencies50withNull = {\n  status: 'fulfilled',\n  value: {\n    name: 'service_latencies',\n    type: 'GAUGE',\n    help: '0.5th quantile latency, grouped by service',\n    quantile: 0.5,\n    metrics: [\n      {\n        labels: [\n          {\n            name: 'service_name',\n            value: 'cartservice',\n          },\n        ],\n        metricPoints: [\n          {\n            gaugeValue: {\n              doubleValue: null,\n            },\n            timestamp: '2021-09-10T11:03:43.806Z',\n          },\n          {\n            gaugeValue: {\n              doubleValue: '189.85926305015352',\n            },\n            timestamp: '2021-09-10T11:04:43.806Z',\n          },\n        ],\n      },\n    ],\n  },\n};\nconst serviceLatencies75 = {\n  status: 'fulfilled',\n  value: {\n    name: 'service_latencies',\n    type: 'GAUGE',\n    help: '0.75th quantile latency, grouped by service',\n    quantile: 0.75,\n    metrics: [\n      {\n        labels: [\n          {\n            name: 'service_name',\n            value: 'cartservice',\n          },\n        ],\n        metricPoints: [\n          {\n            gaugeValue: {\n              doubleValue: 189.85919098822325,\n            },\n            timestamp: '2021-09-10T11:03:43.806Z',\n          },\n          {\n            gaugeValue: {\n              doubleValue: 189.85926305015352,\n            },\n            timestamp: '2021-09-10T11:04:43.806Z',\n          },\n        ],\n      },\n    ],\n  },\n};\nconst serviceLatencies95 = {\n  status: 'fulfilled',\n  value: {\n    name: 'service_latencies',\n    type: 'GAUGE',\n    help: '0.95th quantile latency, grouped by service',\n    quantile: 0.95,\n    metrics: [\n      {\n        labels: [\n          {\n            name: 'service_name',\n            value: 'cartservice',\n          },\n        ],\n        metricPoints: [\n          {\n            gaugeValue: {\n              doubleValue: 189.85919098822325,\n            },\n            timestamp: '2021-09-10T11:03:43.806Z',\n          },\n          {\n            gaugeValue: {\n              doubleValue: 189.85926305015352,\n            },\n            timestamp: '2021-09-10T11:04:43.806Z',\n          },\n        ],\n      },\n    ],\n  },\n};\nconst serviceCalls95Response = {\n  status: 'fulfilled',\n  value: {\n    name: 'service_call_rate',\n    type: 'GAUGE',\n    help: 'calls/sec, grouped by service',\n    quantile: 0.95,\n    metrics: [\n      {\n        labels: [\n          {\n            name: 'service_name',\n            value: 'cartservice',\n          },\n        ],\n        metricPoints: [\n          {\n            gaugeValue: {\n              doubleValue: 0.05256012294063042,\n            },\n            timestamp: '2021-09-10T11:03:43.806Z',\n          },\n          {\n            gaugeValue: {\n              doubleValue: 0.05228198343384174,\n            },\n            timestamp: '2021-09-10T11:04:43.806Z',\n          },\n        ],\n      },\n    ],\n  },\n};\nconst serviceErrors95Response = {\n  status: 'fulfilled',\n  value: {\n    name: 'service_error_rate',\n    type: 'GAUGE',\n    help: 'error rate, computed as a fraction of errors/sec over calls/sec, grouped by service',\n    quantile: 0.95,\n    metrics: [\n      {\n        labels: [\n          {\n            name: 'service_name',\n            value: 'cartservice',\n          },\n        ],\n        metricPoints: [\n          {\n            gaugeValue: {\n              doubleValue: 1,\n            },\n            timestamp: '2021-09-10T11:52:27.520Z',\n          },\n          {\n            gaugeValue: {\n              doubleValue: 1,\n            },\n            timestamp: '2021-09-10T11:53:27.520Z',\n          },\n        ],\n      },\n    ],\n  },\n};\n\nconst serviceOpsLatencies = {\n  status: 'fulfilled',\n  value: {\n    name: 'service_operation_latencies',\n    type: 'GAUGE',\n    help: '0.95th quantile latency, grouped by service \\u0026 operation',\n    metrics: [\n      {\n        labels: [\n          {\n            name: 'operation',\n            value: '/PlaceOrder',\n          },\n          {\n            name: 'service_name',\n            value: 'checkoutservice',\n          },\n        ],\n        metricPoints: [\n          {\n            gaugeValue: {\n              doubleValue: 737.3333333333333,\n            },\n            timestamp: '2021-09-13T12:00:36.235Z',\n          },\n          {\n            gaugeValue: {\n              doubleValue: 735,\n            },\n            timestamp: '2021-09-13T12:01:36.235Z',\n          },\n        ],\n      },\n    ],\n  },\n};\n\nconst serviceOpsLatenciesWithNull = {\n  status: 'fulfilled',\n  value: {\n    name: 'service_operation_latencies',\n    type: 'GAUGE',\n    help: '0.95th quantile latency, grouped by service \\u0026 operation',\n    metrics: [\n      {\n        labels: [\n          {\n            name: 'operation',\n            value: '/PlaceOrder',\n          },\n          {\n            name: 'service_name',\n            value: 'checkoutservice',\n          },\n        ],\n        metricPoints: [\n          {\n            gaugeValue: {\n              doubleValue: 1,\n            },\n            timestamp: '2021-09-13T12:00:36.235Z',\n          },\n          {\n            gaugeValue: {\n              doubleValue: 3,\n            },\n            timestamp: '2021-09-13T12:01:36.235Z',\n          },\n        ],\n      },\n      {\n        labels: [\n          {\n            name: 'operation',\n            value: '/Checkout',\n          },\n          {\n            name: 'service_name',\n            value: 'checkoutservice',\n          },\n        ],\n        metricPoints: [\n          {\n            gaugeValue: {\n              doubleValue: '737.3333333333333',\n            },\n            timestamp: '2021-09-13T12:00:36.235Z',\n          },\n          {\n            gaugeValue: {\n              doubleValue: null,\n            },\n            timestamp: '2021-09-13T12:01:36.235Z',\n          },\n        ],\n      },\n    ],\n  },\n};\nconst serviceOpsLatenciesZeroDivision = {\n  status: 'fulfilled',\n  value: {\n    name: 'service_operation_latencies',\n    type: 'GAUGE',\n    help: '0.95th quantile latency, grouped by service \\u0026 operation',\n    metrics: [\n      {\n        labels: [\n          {\n            name: 'operation',\n            value: '/PlaceOrder',\n          },\n          {\n            name: 'service_name',\n            value: 'checkoutservice',\n          },\n        ],\n        metricPoints: [\n          {\n            gaugeValue: {\n              doubleValue: 0,\n            },\n            timestamp: '2021-09-13T12:00:36.235Z',\n          },\n          {\n            gaugeValue: {\n              doubleValue: 0,\n            },\n            timestamp: '2021-09-13T12:01:36.235Z',\n          },\n        ],\n      },\n      {\n        labels: [\n          {\n            name: 'operation',\n            value: '/Checkout',\n          },\n          {\n            name: 'service_name',\n            value: 'checkoutservice',\n          },\n        ],\n        metricPoints: [\n          {\n            gaugeValue: {\n              doubleValue: '737.3333333333333',\n            },\n            timestamp: '2021-09-13T12:00:36.235Z',\n          },\n          {\n            gaugeValue: {\n              doubleValue: null,\n            },\n            timestamp: '2021-09-13T12:01:36.235Z',\n          },\n        ],\n      },\n    ],\n  },\n};\nconst serviceOpsErrors = {\n  status: 'fulfilled',\n  value: {\n    name: 'service_operation_error_rate',\n    type: 'GAUGE',\n    help: 'error rate, computed as a fraction of errors/sec over calls/sec, grouped by service \\u0026 operation',\n    metrics: [\n      {\n        labels: [\n          {\n            name: 'operation',\n            value: '/PlaceOrder',\n          },\n          {\n            name: 'service_name',\n            value: 'checkoutservice',\n          },\n        ],\n        metricPoints: [\n          {\n            gaugeValue: {\n              doubleValue: 1,\n            },\n            timestamp: '2021-09-13T12:00:36.235Z',\n          },\n          {\n            gaugeValue: {\n              doubleValue: 1,\n            },\n            timestamp: '2021-09-13T12:01:36.235Z',\n          },\n        ],\n      },\n    ],\n  },\n};\nconst serviceOpsErrorsWithNull = {\n  status: 'fulfilled',\n  value: {\n    name: 'service_operation_error_rate',\n    type: 'GAUGE',\n    help: 'error rate, computed as a fraction of errors/sec over calls/sec, grouped by service \\u0026 operation',\n    metrics: [\n      {\n        labels: [\n          {\n            name: 'operation',\n            value: '/PlaceOrder',\n          },\n          {\n            name: 'service_name',\n            value: 'checkoutservice',\n          },\n        ],\n        metricPoints: [\n          {\n            gaugeValue: {\n              doubleValue: '737.3333333333333',\n            },\n            timestamp: '2021-09-13T12:00:36.235Z',\n          },\n          {\n            gaugeValue: {\n              doubleValue: null,\n            },\n            timestamp: '2021-09-13T12:01:36.235Z',\n          },\n        ],\n      },\n      {\n        labels: [\n          {\n            name: 'operation',\n            value: '/Checkout',\n          },\n          {\n            name: 'service_name',\n            value: 'checkoutservice',\n          },\n        ],\n        metricPoints: [\n          {\n            gaugeValue: {\n              doubleValue: 1,\n            },\n            timestamp: '2021-09-13T12:00:36.235Z',\n          },\n          {\n            gaugeValue: {\n              doubleValue: 1,\n            },\n            timestamp: '2021-09-13T12:01:36.235Z',\n          },\n        ],\n      },\n    ],\n  },\n};\nconst serviceOpsErrorsZeroDivision = {\n  status: 'fulfilled',\n  value: {\n    name: 'service_operation_error_rate',\n    type: 'GAUGE',\n    help: 'error rate, computed as a fraction of errors/sec over calls/sec, grouped by service \\u0026 operation',\n    metrics: [\n      {\n        labels: [\n          {\n            name: 'operation',\n            value: '/PlaceOrder',\n          },\n          {\n            name: 'service_name',\n            value: 'checkoutservice',\n          },\n        ],\n        metricPoints: [\n          {\n            gaugeValue: {\n              doubleValue: '737.3333333333333',\n            },\n            timestamp: '2021-09-13T12:00:36.235Z',\n          },\n          {\n            gaugeValue: {\n              doubleValue: null,\n            },\n            timestamp: '2021-09-13T12:01:36.235Z',\n          },\n        ],\n      },\n      {\n        labels: [\n          {\n            name: 'operation',\n            value: '/Checkout',\n          },\n          {\n            name: 'service_name',\n            value: 'checkoutservice',\n          },\n        ],\n        metricPoints: [\n          {\n            gaugeValue: {\n              doubleValue: 1,\n            },\n            timestamp: '2021-09-13T12:00:36.235Z',\n          },\n          {\n            gaugeValue: {\n              doubleValue: 1,\n            },\n            timestamp: '2021-09-13T12:01:36.235Z',\n          },\n        ],\n      },\n    ],\n  },\n};\nconst serviceOpsCalls = {\n  status: 'fulfilled',\n  value: {\n    name: 'service_operation_call_rate',\n    type: 'GAUGE',\n    help: 'calls/sec, grouped by service \\u0026 operation',\n    metrics: [\n      {\n        labels: [\n          {\n            name: 'operation',\n            value: '/PlaceOrder',\n          },\n          {\n            name: 'service_name',\n            value: 'checkoutservice',\n          },\n        ],\n        metricPoints: [\n          {\n            gaugeValue: {\n              doubleValue: 0.012657559165859726,\n            },\n            timestamp: '2021-09-13T12:00:36.235Z',\n          },\n          {\n            gaugeValue: {\n              doubleValue: 0.014052384663085615,\n            },\n            timestamp: '2021-09-13T12:01:36.235Z',\n          },\n        ],\n      },\n    ],\n  },\n};\nconst serviceOpsCallsWithNull = {\n  status: 'fulfilled',\n  value: {\n    name: 'service_operation_call_rate',\n    type: 'GAUGE',\n    help: 'calls/sec, grouped by service \\u0026 operation',\n    metrics: [\n      {\n        labels: [\n          {\n            name: 'operation',\n            value: '/PlaceOrder',\n          },\n          {\n            name: 'service_name',\n            value: 'checkoutservice',\n          },\n        ],\n        metricPoints: [\n          {\n            gaugeValue: {\n              doubleValue: 0.012657559165859726,\n            },\n            timestamp: '2021-09-13T12:00:36.235Z',\n          },\n          {\n            gaugeValue: {\n              // eslint-disable-next-line\n              doubleValue: 0.031052384663085615,\n            },\n            timestamp: '2021-09-13T12:01:36.235Z',\n          },\n        ],\n      },\n      {\n        labels: [\n          {\n            name: 'operation',\n            value: '/Checkout',\n          },\n          {\n            name: 'service_name',\n            value: 'checkoutservice',\n          },\n        ],\n        metricPoints: [\n          {\n            gaugeValue: {\n              doubleValue: 0.012657559165859726,\n            },\n            timestamp: '2021-09-13T12:00:36.235Z',\n          },\n          {\n            gaugeValue: {\n              doubleValue: 0.014052384663085615,\n            },\n            timestamp: '2021-09-13T12:01:36.235Z',\n          },\n        ],\n      },\n    ],\n  },\n};\n\nconst serviceOpsCallsZeroDivision = {\n  status: 'fulfilled',\n  value: {\n    name: 'service_operation_call_rate',\n    type: 'GAUGE',\n    help: 'calls/sec, grouped by service \\u0026 operation',\n    metrics: [\n      {\n        labels: [\n          {\n            name: 'operation',\n            value: '/PlaceOrder',\n          },\n          {\n            name: 'service_name',\n            value: 'checkoutservice',\n          },\n        ],\n        metricPoints: [\n          {\n            gaugeValue: {\n              doubleValue: 0.012657559165859726,\n            },\n            timestamp: '2021-09-13T12:00:36.235Z',\n          },\n          {\n            gaugeValue: {\n              // eslint-disable-next-line\n              doubleValue: 0.031052384663085615,\n            },\n            timestamp: '2021-09-13T12:01:36.235Z',\n          },\n        ],\n      },\n      {\n        labels: [\n          {\n            name: 'operation',\n            value: '/Checkout',\n          },\n          {\n            name: 'service_name',\n            value: 'checkoutservice',\n          },\n        ],\n        metricPoints: [\n          {\n            gaugeValue: {\n              doubleValue: 0.012657559165859726,\n            },\n            timestamp: '2021-09-13T12:00:36.235Z',\n          },\n          {\n            gaugeValue: {\n              doubleValue: 0.014052384663085615,\n            },\n            timestamp: '2021-09-13T12:01:36.235Z',\n          },\n        ],\n      },\n    ],\n  },\n};\n\nconst emptyResponse = (responseWithData: any) => {\n  return {\n    ...responseWithData,\n    value: {\n      ...responseWithData.value,\n      metrics: [],\n    },\n  };\n};\n\nconst originInitialState = {\n  serviceError: {\n    service_latencies_50: null,\n    service_latencies_75: null,\n    service_latencies_95: null,\n    service_call_rate: null,\n    service_error_rate: null,\n  },\n  opsError: {\n    opsLatencies: null,\n    opsCalls: null,\n    opsErrors: null,\n  },\n  isATMActivated: null,\n  loading: false,\n  operationMetricsLoading: undefined,\n  serviceMetrics: null,\n  serviceOpsMetrics: undefined,\n};\n\nconst serviceMetrics = {\n  service_call_rate: {\n    max: 0.05,\n    metricPoints: [\n      {\n        x: 1631271823806,\n        y: 0.05,\n      },\n      {\n        x: 1631271883806,\n        y: 0.05,\n      },\n    ],\n    quantile: 0.95,\n    serviceName: 'cartservice',\n  },\n  service_error_rate: {\n    max: 1,\n    metricPoints: [\n      {\n        x: 1631274747520,\n        y: 1,\n      },\n      {\n        x: 1631274807520,\n        y: 1,\n      },\n    ],\n    quantile: 0.95,\n    serviceName: 'cartservice',\n  },\n  service_latencies: [\n    {\n      max: 189.86,\n      metricPoints: [\n        {\n          x: 1631271823806,\n          y: 189.86,\n        },\n        {\n          x: 1631271883806,\n          y: 189.86,\n        },\n      ],\n      quantile: 0.5,\n      serviceName: 'cartservice',\n    },\n    {\n      max: 189.86,\n      metricPoints: [\n        {\n          x: 1631271823806,\n          y: 189.86,\n        },\n        {\n          x: 1631271883806,\n          y: 189.86,\n        },\n      ],\n      quantile: 0.75,\n      serviceName: 'cartservice',\n    },\n    {\n      max: 189.86,\n      metricPoints: [\n        {\n          x: 1631271823806,\n          y: 189.86,\n        },\n        {\n          x: 1631271883806,\n          y: 189.86,\n        },\n      ],\n      quantile: 0.95,\n      serviceName: 'cartservice',\n    },\n  ],\n};\n\nconst serviceMetricsWithOneServiceLatency = {\n  service_call_rate: {\n    max: 0.05,\n    metricPoints: [\n      {\n        x: 1631271823806,\n        y: 0.05,\n      },\n      {\n        x: 1631271883806,\n        y: 0.05,\n      },\n    ],\n    quantile: 0.95,\n    serviceName: 'cartservice',\n  },\n  service_error_rate: {\n    max: 1,\n    metricPoints: [\n      {\n        x: 1631274747520,\n        y: 1,\n      },\n      {\n        x: 1631274807520,\n        y: 1,\n      },\n    ],\n    quantile: 0.95,\n    serviceName: 'cartservice',\n  },\n  service_latencies: {\n    max: 189.86,\n    metricPoints: [\n      {\n        x: 1631271823806,\n        y: 189.86,\n      },\n      {\n        x: 1631271883806,\n        y: 189.86,\n      },\n    ],\n    quantile: 0.5,\n    serviceName: 'cartservice',\n  },\n};\n\nconst serviceMetricsWithNulls = {\n  service_call_rate: {\n    max: 0.05,\n    metricPoints: [\n      {\n        x: 1631271823806,\n        y: 0.05,\n      },\n      {\n        x: 1631271883806,\n        y: 0.05,\n      },\n    ],\n    quantile: 0.95,\n    serviceName: 'cartservice',\n  },\n  service_error_rate: {\n    max: 1,\n    metricPoints: [\n      {\n        x: 1631274747520,\n        y: 1,\n      },\n      {\n        x: 1631274807520,\n        y: 1,\n      },\n    ],\n    quantile: 0.95,\n    serviceName: 'cartservice',\n  },\n  service_latencies: [\n    {\n      max: 0,\n      metricPoints: [\n        {\n          x: 1631271823806,\n          y: null,\n        },\n        {\n          x: 1631271883806,\n          y: null,\n        },\n      ],\n      quantile: 0.5,\n      serviceName: 'cartservice',\n    },\n    {\n      max: 189.86,\n      metricPoints: [\n        {\n          x: 1631271823806,\n          y: 189.86,\n        },\n        {\n          x: 1631271883806,\n          y: 189.86,\n        },\n      ],\n      quantile: 0.75,\n      serviceName: 'cartservice',\n    },\n    {\n      max: 189.86,\n      metricPoints: [\n        {\n          x: 1631271823806,\n          y: 189.86,\n        },\n        {\n          x: 1631271883806,\n          y: 189.86,\n        },\n      ],\n      quantile: 0.95,\n      serviceName: 'cartservice',\n    },\n  ],\n};\nconst serviceOpsMetrics = [\n  {\n    dataPoints: {\n      avg: {\n        service_operation_call_rate: 0.01,\n        service_operation_error_rate: 1,\n        service_operation_latencies: 736.16,\n      },\n      service_operation_call_rate: [\n        {\n          x: 1631534436235,\n          y: 0.01,\n        },\n        {\n          x: 1631534496235,\n          y: 0.01,\n        },\n      ],\n      service_operation_error_rate: [\n        {\n          x: 1631534436235,\n          y: 1,\n        },\n        {\n          x: 1631534496235,\n          y: 1,\n        },\n      ],\n      service_operation_latencies: [\n        {\n          x: 1631534436235,\n          y: 737.33,\n        },\n        {\n          x: 1631534496235,\n          y: 735,\n        },\n      ],\n    },\n    errRates: 1,\n    impact: 1,\n    key: 0,\n    latency: 736.16,\n    name: '/PlaceOrder',\n    requests: 0.01,\n  },\n];\nconst serviceOpsMetricsWithNull = [\n  {\n    dataPoints: {\n      avg: {\n        service_operation_call_rate: 0.02,\n        service_operation_error_rate: null,\n        service_operation_latencies: 2,\n      },\n      service_operation_call_rate: [\n        {\n          x: 1631534436235,\n          y: 0.01,\n        },\n        {\n          x: 1631534496235,\n          y: 0.03,\n        },\n      ],\n      service_operation_error_rate: [\n        {\n          x: 1631534436235,\n          y: null,\n        },\n        {\n          x: 1631534496235,\n          y: null,\n        },\n      ],\n      service_operation_latencies: [\n        {\n          x: 1631534436235,\n          y: 1,\n        },\n        {\n          x: 1631534496235,\n          y: 3,\n        },\n      ],\n    },\n    errRates: 0,\n    impact: 1,\n    key: 0,\n    latency: 2,\n    name: '/PlaceOrder',\n    requests: 0.02,\n  },\n  {\n    dataPoints: {\n      avg: {\n        service_operation_call_rate: 0.01,\n        service_operation_error_rate: 1,\n        service_operation_latencies: null,\n      },\n      service_operation_call_rate: [\n        {\n          x: 1631534436235,\n          y: 0.01,\n        },\n        {\n          x: 1631534496235,\n          y: 0.01,\n        },\n      ],\n      service_operation_error_rate: [\n        {\n          x: 1631534436235,\n          y: 1,\n        },\n        {\n          x: 1631534496235,\n          y: 1,\n        },\n      ],\n      service_operation_latencies: [\n        {\n          x: 1631534436235,\n          y: null,\n        },\n        {\n          x: 1631534496235,\n          y: null,\n        },\n      ],\n    },\n    errRates: 1,\n    impact: 0,\n    key: 1,\n    latency: 0,\n    name: '/Checkout',\n    requests: 0.01,\n  },\n];\nconst serviceOpsMetricsZeroDivision = [\n  {\n    dataPoints: {\n      avg: {\n        service_operation_call_rate: 0.02,\n        service_operation_error_rate: null,\n        service_operation_latencies: 0,\n      },\n      service_operation_call_rate: [\n        {\n          x: 1631534436235,\n          y: 0.01,\n        },\n        {\n          x: 1631534496235,\n          y: 0.03,\n        },\n      ],\n      service_operation_error_rate: [\n        {\n          x: 1631534436235,\n          y: null,\n        },\n        {\n          x: 1631534496235,\n          y: null,\n        },\n      ],\n      service_operation_latencies: [\n        {\n          x: 1631534436235,\n          y: 0,\n        },\n        {\n          x: 1631534496235,\n          y: 0,\n        },\n      ],\n    },\n    errRates: 0,\n    impact: 0,\n    key: 0,\n    latency: 0,\n    name: '/PlaceOrder',\n    requests: 0.02,\n  },\n  {\n    dataPoints: {\n      avg: {\n        service_operation_call_rate: 0.01,\n        service_operation_error_rate: 1,\n        service_operation_latencies: null,\n      },\n      service_operation_call_rate: [\n        {\n          x: 1631534436235,\n          y: 0.01,\n        },\n        {\n          x: 1631534496235,\n          y: 0.01,\n        },\n      ],\n      service_operation_error_rate: [\n        {\n          x: 1631534436235,\n          y: 1,\n        },\n        {\n          x: 1631534496235,\n          y: 1,\n        },\n      ],\n      service_operation_latencies: [\n        {\n          x: 1631534436235,\n          y: null,\n        },\n        {\n          x: 1631534496235,\n          y: null,\n        },\n      ],\n    },\n    errRates: 1,\n    impact: 0,\n    key: 1,\n    latency: 0,\n    name: '/Checkout',\n    requests: 0.01,\n  },\n];\n\nconst serviceOpsLatenciesNoMetrics = {\n  status: 'fulfilled',\n  value: {\n    name: 'service_operation_latencies',\n    type: 'GAUGE',\n    help: '0.95th quantile latency, grouped by service \\u0026 operation',\n    metrics: [\n      {\n        labels: [\n          {\n            name: 'operation',\n            value: '/PlaceOrder',\n          },\n          {\n            name: 'service_name',\n            value: 'checkoutservice',\n          },\n        ],\n        metricPoints: [],\n      },\n      {\n        labels: [\n          {\n            name: 'operation',\n            value: '/Checkout',\n          },\n          {\n            name: 'service_name',\n            value: 'checkoutservice',\n          },\n        ],\n        metricPoints: [],\n      },\n    ],\n  },\n};\nconst serviceOpsMetricsNoMetrics = [\n  {\n    dataPoints: {\n      avg: {\n        service_operation_call_rate: null,\n        service_operation_error_rate: null,\n        service_operation_latencies: null,\n      },\n      service_operation_call_rate: [],\n      service_operation_error_rate: [],\n      service_operation_latencies: [],\n    },\n    errRates: 0,\n    impact: 0,\n    key: 0,\n    latency: 0,\n    name: '/PlaceOrder',\n    requests: 0,\n  },\n  {\n    dataPoints: {\n      avg: {\n        service_operation_call_rate: null,\n        service_operation_error_rate: null,\n        service_operation_latencies: null,\n      },\n      service_operation_call_rate: [],\n      service_operation_error_rate: [],\n      service_operation_latencies: [],\n    },\n    errRates: 0,\n    impact: 0,\n    key: 1,\n    latency: 0,\n    name: '/Checkout',\n    requests: 0,\n  },\n];\n\nconst serviceOpsCallsNoMetrics = {\n  status: 'fulfilled',\n  value: {\n    name: 'service_operation_call_rate',\n    type: 'GAUGE',\n    help: 'calls/sec, grouped by service \\u0026 operation',\n    metrics: [\n      {\n        labels: [\n          {\n            name: 'operation',\n            value: '/PlaceOrder',\n          },\n          {\n            name: 'service_name',\n            value: 'checkoutservice',\n          },\n        ],\n        metricPoints: [],\n      },\n      {\n        labels: [\n          {\n            name: 'operation',\n            value: '/Checkout',\n          },\n          {\n            name: 'service_name',\n            value: 'checkoutservice',\n          },\n        ],\n        metricPoints: [],\n      },\n    ],\n  },\n};\nconst serviceOpsErrorsNoMetrics = {\n  status: 'fulfilled',\n  value: {\n    name: 'service_operation_error_rate',\n    type: 'GAUGE',\n    help: 'error rate, computed as a fraction of errors/sec over calls/sec, grouped by service \\u0026 operation',\n    metrics: [\n      {\n        labels: [\n          {\n            name: 'operation',\n            value: '/PlaceOrder',\n          },\n          {\n            name: 'service_name',\n            value: 'checkoutservice',\n          },\n        ],\n        metricPoints: [],\n      },\n      {\n        labels: [\n          {\n            name: 'operation',\n            value: '/Checkout',\n          },\n          {\n            name: 'service_name',\n            value: 'checkoutservice',\n          },\n        ],\n        metricPoints: [],\n      },\n    ],\n  },\n};\n\nconst serviceOpsLatenciesUndefinedMetrics = {\n  status: 'fulfilled',\n  value: {\n    name: 'service_operation_latencies',\n    type: 'GAUGE',\n    help: '0.95th quantile latency, grouped by service & operation',\n    metrics: undefined,\n  },\n};\n\nconst serviceOpsCallsUndefinedMetrics = {\n  status: 'fulfilled',\n  value: {\n    name: 'service_operation_call_rate',\n    type: 'GAUGE',\n    help: 'calls/sec, grouped by service & operation',\n    metrics: undefined,\n  },\n};\n\nconst serviceOpsErrorsUndefinedMetrics = {\n  status: 'fulfilled',\n  value: {\n    name: 'service_operation_error_rate',\n    type: 'GAUGE',\n    help: 'error rate, computed as a fraction of errors/sec over calls/sec, grouped by service & operation',\n    metrics: undefined,\n  },\n};\n\nexport {\n  serviceLatencies50,\n  serviceLatencies75,\n  serviceLatencies95,\n  serviceCalls95Response,\n  serviceErrors95Response,\n  serviceOpsLatencies,\n  serviceOpsErrors,\n  serviceOpsCalls,\n  emptyResponse,\n  originInitialState,\n  serviceMetrics,\n  serviceMetricsWithOneServiceLatency,\n  serviceOpsMetrics,\n  serviceLatencies50withNull,\n  serviceMetricsWithNulls,\n  serviceOpsLatenciesWithNull,\n  serviceOpsMetricsWithNull,\n  serviceOpsCallsWithNull,\n  serviceOpsErrorsWithNull,\n  serviceOpsLatenciesZeroDivision,\n  serviceOpsMetricsZeroDivision,\n  serviceOpsCallsZeroDivision,\n  serviceOpsErrorsZeroDivision,\n  serviceOpsLatenciesNoMetrics,\n  serviceOpsMetricsNoMetrics,\n  serviceOpsCallsNoMetrics,\n  serviceOpsErrorsNoMetrics,\n  serviceOpsLatenciesUndefinedMetrics,\n  serviceOpsCallsUndefinedMetrics,\n  serviceOpsErrorsUndefinedMetrics,\n};\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/reducers/metrics.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/reducers/metrics.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":81,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":81,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":218,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":218,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2021 The Jaeger Authors.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { handleActions } from 'redux-actions';\n\nimport { fetchAllServiceMetrics, fetchAggregatedServiceMetrics } from '../actions/jaeger-api';\nimport {\n  MetricPointObject,\n  MetricsReduxState,\n  ServiceMetrics,\n  MetricObject,\n  ServiceMetricsObject,\n  ServiceOpsMetrics,\n  OpsDataPoints,\n  FetchedAllServiceMetricsResponse,\n  PromiseRejectedResult,\n  FetchAggregatedServiceMetricsResponse,\n} from '../types/metrics';\n\nconst initialState: MetricsReduxState = {\n  serviceError: {\n    service_latencies_50: null,\n    service_latencies_75: null,\n    service_latencies_95: null,\n    service_call_rate: null,\n    service_error_rate: null,\n  },\n  opsError: {\n    opsLatencies: null,\n    opsCalls: null,\n    opsErrors: null,\n  },\n  isATMActivated: null,\n  loading: false,\n  operationMetricsLoading: undefined,\n  serviceMetrics: null,\n  serviceOpsMetrics: undefined,\n};\n\nfunction fetchStarted(state: MetricsReduxState) {\n  return {\n    ...state,\n    serviceError: initialState.serviceError,\n    loading: true,\n  };\n}\n\nfunction fetchServiceMetricsDone(\n  state: MetricsReduxState,\n  { payload }: { payload?: FetchedAllServiceMetricsResponse }\n) {\n  const serviceMetrics: ServiceMetrics = {\n    service_latencies: null,\n    service_call_rate: null,\n    service_error_rate: null,\n  };\n  const serviceError: MetricsReduxState['serviceError'] = {\n    service_latencies_50: null,\n    service_latencies_75: null,\n    service_latencies_95: null,\n    service_call_rate: null,\n    service_error_rate: null,\n  };\n  let isATMActivated = true;\n\n  if (payload) {\n    payload.forEach((promiseResult, i) => {\n      if (promiseResult.status === 'fulfilled') {\n        const metrics = promiseResult.value;\n        if (metrics.metrics[0]) {\n          let max = 0;\n          const metric: ServiceMetricsObject = {\n            serviceName: metrics.metrics[0].labels[0].value,\n            quantile: metrics.quantile,\n            max: 0,\n            metricPoints: metrics.metrics[0].metricPoints.map((p: MetricPointObject) => {\n              let y;\n              try {\n                y = parseFloat(p.gaugeValue.doubleValue.toFixed(2));\n                max = y > max ? y : max;\n              } catch (e) {\n                y = null;\n              }\n              return {\n                x: new Date(p.timestamp).getTime(),\n                y,\n              };\n            }),\n          };\n\n          metric.max = max;\n          if (metrics.name === 'service_latencies') {\n            if (serviceMetrics[metrics.name] === null) {\n              serviceMetrics[metrics.name] = [];\n            }\n            serviceMetrics[metrics.name]!.push(metric);\n          } else {\n            serviceMetrics[metrics.name] = metric;\n          }\n        }\n      } else {\n        const reason = (promiseResult as PromiseRejectedResult).reason;\n\n        if (typeof reason === 'object' && reason.httpStatus === 501) {\n          isATMActivated = false;\n        }\n\n        switch (i) {\n          case 0:\n            serviceError.service_latencies_50 = reason;\n            break;\n          case 1:\n            serviceError.service_latencies_75 = reason;\n            break;\n          case 2:\n            serviceError.service_latencies_95 = reason;\n            break;\n          case 3:\n            serviceError.service_call_rate = reason;\n            break;\n          case 4:\n            serviceError.service_error_rate = reason;\n            break;\n        }\n      }\n    });\n  }\n  return { ...state, serviceMetrics, serviceError, loading: false, isATMActivated };\n}\n\nfunction fetchOpsMetricsStarted(state: MetricsReduxState) {\n  return {\n    ...state,\n    opsError: initialState.opsError,\n    operationMetricsLoading: true,\n  };\n}\n\nfunction fetchOpsMetricsDone(\n  state: MetricsReduxState,\n  { payload }: { payload?: FetchAggregatedServiceMetricsResponse }\n) {\n  const opsError: MetricsReduxState['opsError'] = {\n    opsLatencies: null,\n    opsCalls: null,\n    opsErrors: null,\n  };\n\n  let opsMetrics:\n    | null\n    | {\n        [k in string]: {\n          name: string;\n          metricPoints: OpsDataPoints;\n        };\n      } = null;\n\n  let serviceOpsMetrics: ServiceOpsMetrics[] | undefined = undefined;\n\n  if (payload) {\n    payload.forEach((promiseResult, i) => {\n      if (promiseResult.status === 'fulfilled') {\n        const metric = promiseResult.value;\n        if (metric.metrics && Array.isArray(metric.metrics)) {\n          metric.metrics.forEach((metricDetails: MetricObject) => {\n            if (opsMetrics === null) {\n              opsMetrics = {};\n            }\n\n            let opsName: string | null = null;\n            const avg: {\n              service_operation_latencies: number;\n              service_operation_call_rate: number;\n              service_operation_error_rate: number;\n            } = {\n              service_operation_latencies: 0,\n              service_operation_call_rate: 0,\n              service_operation_error_rate: 0,\n            };\n            const count: {\n              service_operation_latencies: number;\n              service_operation_call_rate: number;\n              service_operation_error_rate: number;\n            } = {\n              service_operation_latencies: 0,\n              service_operation_call_rate: 0,\n              service_operation_error_rate: 0,\n            };\n            metricDetails.labels.forEach((label: { name: string; value: string }) => {\n              if (label.name === 'operation') {\n                opsName = label.value;\n              }\n            });\n\n            if (opsName) {\n              if (opsMetrics[opsName] === undefined) {\n                opsMetrics[opsName] = {\n                  name: opsName,\n                  metricPoints: {\n                    service_operation_latencies: [],\n                    service_operation_call_rate: [],\n                    service_operation_error_rate: [],\n                    avg: {\n                      service_operation_latencies: null,\n                      service_operation_call_rate: null,\n                      service_operation_error_rate: null,\n                    },\n                  },\n                };\n              }\n\n              opsMetrics[opsName].metricPoints[metric.name] = metricDetails.metricPoints.map(p => {\n                let y;\n                try {\n                  y = parseFloat(p.gaugeValue.doubleValue.toFixed(2));\n                  avg[metric.name] += y;\n                  count[metric.name] += 1; // Increment count for non-NaN values\n                } catch (e) {\n                  y = null;\n                }\n\n                return {\n                  x: new Date(p.timestamp).getTime(),\n                  y,\n                };\n              });\n\n              opsMetrics[opsName].metricPoints.avg[metric.name] =\n                count[metric.name] > 0\n                  ? parseFloat((avg[metric.name] / count[metric.name]).toFixed(2))\n                  : null;\n            }\n          });\n        }\n      } else {\n        switch (i) {\n          case 0:\n            opsError.opsLatencies = (promiseResult as PromiseRejectedResult).reason;\n            break;\n          case 1:\n            opsError.opsCalls = (promiseResult as PromiseRejectedResult).reason;\n            break;\n          case 2:\n            opsError.opsErrors = (promiseResult as PromiseRejectedResult).reason;\n            break;\n        }\n      }\n    });\n\n    const minMax: {\n      min: number;\n      max: number;\n    } = {\n      min: 0,\n      max: 0,\n    };\n\n    if (opsMetrics) {\n      serviceOpsMetrics = Object.keys(opsMetrics).map((operationName, i) => {\n        let impact = 0;\n        if (\n          opsMetrics![operationName].metricPoints.avg.service_operation_latencies !== null &&\n          opsMetrics![operationName].metricPoints.avg.service_operation_call_rate !== null\n        ) {\n          impact =\n            (opsMetrics![operationName].metricPoints.avg.service_operation_latencies! *\n              opsMetrics![operationName].metricPoints.avg.service_operation_call_rate!) /\n            100;\n        }\n\n        if (i === 0) {\n          minMax.max = impact;\n          minMax.min = impact;\n        } else {\n          minMax.max = minMax.max < impact ? impact : minMax.max;\n          minMax.min = minMax.min > impact ? impact : minMax.min;\n        }\n\n        return {\n          key: i,\n          name: opsMetrics![operationName].name,\n          latency: opsMetrics![operationName].metricPoints.avg.service_operation_latencies || 0,\n          requests: opsMetrics![operationName].metricPoints.avg.service_operation_call_rate || 0,\n          errRates: opsMetrics![operationName].metricPoints.avg.service_operation_error_rate || 0,\n          impact,\n          dataPoints: opsMetrics![operationName].metricPoints,\n        };\n      });\n\n      if (serviceOpsMetrics && serviceOpsMetrics.length === 1) {\n        serviceOpsMetrics.forEach((v, i) => {\n          serviceOpsMetrics![i].impact = 1;\n        });\n      } else if (serviceOpsMetrics && serviceOpsMetrics.length > 1) {\n        serviceOpsMetrics.forEach((v, i) => {\n          if (minMax.max - minMax.min === 0) {\n            serviceOpsMetrics![i].impact = 0;\n          } else {\n            serviceOpsMetrics![i].impact = (v.impact - minMax.min) / (minMax.max - minMax.min);\n          }\n        });\n      }\n    }\n  }\n\n  return { ...state, serviceOpsMetrics, opsError, operationMetricsLoading: false };\n}\n\nexport default handleActions(\n  {\n    [`${fetchAllServiceMetrics}_PENDING`]: fetchStarted,\n    [`${fetchAllServiceMetrics}_FULFILLED`]: fetchServiceMetricsDone,\n\n    [`${fetchAggregatedServiceMetrics}_PENDING`]: fetchOpsMetricsStarted,\n    [`${fetchAggregatedServiceMetrics}_FULFILLED`]: fetchOpsMetricsDone,\n  },\n  initialState\n);\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/reducers/path-agnostic-decorations.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/reducers/path-agnostic-decorations.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/reducers/trace.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/reducers/trace.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[476,479],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[476,479],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":15,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[505,508],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[505,508],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":18,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[565,568],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[565,568],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":20,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[589,592],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[589,592],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":31,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[760,763],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[760,763],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":37,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[979,982],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[979,982],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":40,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1086,1089],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1086,1089],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":50,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":50,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1418,1421],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1418,1421],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":57,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1677,1680],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1677,1680],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":66,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":66,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1949,1952],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1949,1952],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":68,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":68,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2035,2038],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2035,2038],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":73,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":73,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2232,2235],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2232,2235],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":82,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":82,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2532,2535],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2532,2535],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":92,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":92,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2826,2829],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2826,2829],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":102,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":102,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3048,3051],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3048,3051],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":108,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":108,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3270,3273],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3270,3273],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":121,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":121,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3762,3765],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3762,3765],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":134,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":134,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4200,4203],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4200,4203],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":137,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":137,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4326,4329],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4326,4329],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":154,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":154,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4991,4994],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4991,4994],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":20,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2017 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport _isEqual from 'lodash/isEqual';\nimport { handleActions } from 'redux-actions';\n\nimport { fetchTrace, fetchMultipleTraces, searchTraces } from '../actions/jaeger-api';\nimport { loadJsonTraces } from '../actions/file-reader-api';\nimport { fetchedState } from '../constants';\nimport transformTraceData from '../model/transform-trace-data';\n\ntype TraceState = {\n  traces: Record<string, any>;\n  search: {\n    query: any;\n    results: string[];\n    state?: string;\n    error?: any;\n  };\n  rawTraces?: any[];\n};\n\nconst initialState: TraceState = {\n  traces: {},\n  search: {\n    query: null,\n    results: [],\n  },\n};\n\nfunction fetchTraceStarted(state: TraceState, { meta }: any): TraceState {\n  const { id } = meta;\n  const traces = { ...state.traces, [id]: { id, state: fetchedState.LOADING } };\n  return { ...state, traces };\n}\n\nfunction fetchTraceDone(state: TraceState, { meta, payload }: any): TraceState {\n  const { id } = meta;\n  const data = transformTraceData(payload.data[0]);\n  let trace: any;\n  if (!data) {\n    trace = { id, state: fetchedState.ERROR, error: new Error('Invalid trace data recieved.') };\n  } else {\n    trace = { data, id, state: fetchedState.DONE };\n  }\n  const traces = { ...state.traces, [id]: trace };\n  return { ...state, traces };\n}\n\nfunction fetchTraceErred(state: TraceState, { meta, payload }: any): TraceState {\n  const { id } = meta;\n  const trace = { id, error: payload, state: fetchedState.ERROR };\n  const traces = { ...state.traces, [id]: trace };\n  return { ...state, traces };\n}\n\nfunction fetchMultipleTracesStarted(state: TraceState, { meta }: any): TraceState {\n  const { ids } = meta;\n  const traces = { ...state.traces };\n  ids.forEach((id: string) => {\n    traces[id] = { id, state: fetchedState.LOADING };\n  });\n  return { ...state, traces };\n}\n\nfunction fetchMultipleTracesDone(state: TraceState, { payload }: any): TraceState {\n  const traces = { ...state.traces };\n  payload.data.forEach((raw: any) => {\n    const data = transformTraceData(raw)!;\n    traces[data.traceID] = { data, id: data.traceID, state: fetchedState.DONE };\n  });\n  if (payload.errors) {\n    payload.errors.forEach((err: any) => {\n      const { msg, traceID } = err;\n      const error = new Error(`Error: ${msg} - ${traceID}`);\n      traces[traceID] = { error, id: traceID, state: fetchedState.ERROR };\n    });\n  }\n  return { ...state, traces };\n}\n\nfunction fetchMultipleTracesErred(state: TraceState, { meta, payload }: any): TraceState {\n  const { ids } = meta;\n  const traces = { ...state.traces };\n  const error = payload;\n  ids.forEach((id: string) => {\n    traces[id] = { error, id, state: fetchedState.ERROR };\n  });\n  return { ...state, traces };\n}\n\nfunction fetchSearchStarted(state: TraceState, { meta }: any): TraceState {\n  const { query } = meta;\n  const search = {\n    query,\n    results: [],\n    state: fetchedState.LOADING,\n  };\n  return { ...state, search };\n}\n\nfunction searchDone(state: TraceState, { meta, payload }: any): TraceState {\n  if (!_isEqual(state.search.query, meta.query)) {\n    return state;\n  }\n  const payloadData = payload.data;\n  const processed = payloadData.map(transformTraceData);\n  const resultTraces: Record<string, any> = {};\n  const results: string[] = [];\n  for (let i = 0; i < processed.length; i++) {\n    const data = processed[i];\n    const id = data.traceID;\n    resultTraces[id] = { data, id, state: fetchedState.DONE };\n    results.push(id);\n  }\n  const traces = { ...state.traces, ...resultTraces };\n  const search = { ...state.search, results, state: fetchedState.DONE };\n  return { ...state, search, traces, rawTraces: payloadData };\n}\n\nfunction searchErred(state: TraceState, { meta, payload }: any): TraceState {\n  if (!_isEqual(state.search.query, meta.query)) {\n    return state;\n  }\n  const search = { ...state.search, error: payload, results: [], state: fetchedState.ERROR };\n  return { ...state, search };\n}\n\nfunction loadJsonStarted(state: TraceState): TraceState {\n  const { search } = state;\n  return { ...state, search: { ...search, state: fetchedState.LOADING } };\n}\n\nfunction loadJsonDone(state: TraceState, { payload }: any): TraceState {\n  try {\n    const processed = payload.data.map(transformTraceData);\n    const resultTraces: Record<string, any> = {};\n    const results = new Set(state.search.results);\n    for (let i = 0; i < processed.length; i++) {\n      const data = processed[i];\n      const id = data.traceID;\n      resultTraces[id] = { data, id, state: fetchedState.DONE };\n      results.add(id);\n    }\n    const traces = { ...state.traces, ...resultTraces };\n    const search = { ...state.search, results: Array.from(results), state: fetchedState.DONE };\n    return { ...state, search, traces };\n  } catch (error) {\n    const search = { ...state.search, error, results: [], state: fetchedState.ERROR };\n    return { ...state, search };\n  }\n}\n\nfunction loadJsonErred(state: TraceState, { payload }: any): TraceState {\n  const search = { ...state.search, error: payload, results: [], state: fetchedState.ERROR };\n  return { ...state, search };\n}\n\nexport default handleActions(\n  {\n    [`${fetchTrace}_PENDING`]: fetchTraceStarted,\n    [`${fetchTrace}_FULFILLED`]: fetchTraceDone,\n    [`${fetchTrace}_REJECTED`]: fetchTraceErred,\n\n    [`${fetchMultipleTraces}_PENDING`]: fetchMultipleTracesStarted,\n    [`${fetchMultipleTraces}_FULFILLED`]: fetchMultipleTracesDone,\n    [`${fetchMultipleTraces}_REJECTED`]: fetchMultipleTracesErred,\n\n    [`${searchTraces}_PENDING`]: fetchSearchStarted,\n    [`${searchTraces}_FULFILLED`]: searchDone,\n    [`${searchTraces}_REJECTED`]: searchErred,\n\n    [`${loadJsonTraces}_PENDING`]: loadJsonStarted,\n    [`${loadJsonTraces}_FULFILLED`]: loadJsonDone,\n    [`${loadJsonTraces}_REJECTED`]: loadJsonErred,\n  },\n  initialState\n);\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/selectors/otel.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/site-prefix.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/site-prefix.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/types/TDdgState.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/types/TNil.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/types/TPathAgnosticDecorationsState.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/types/TTraceDiffState.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/types/TTraceTimeline.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/types/api-error.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/types/archive.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/types/config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/types/critical_path.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/types/embedded.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/types/external-modules.d.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":7,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[258,261],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[258,261],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":11,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[356,359],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[356,359],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":16,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[438,441],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[438,441],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":17,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[471,474],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[471,474],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2026 The Jaeger Authors.\n// SPDX-License-Identifier: Apache-2.0\n\n// Type declarations for third-party modules without TypeScript definitions\n\ndeclare module 'logfmt/lib/logfmt_parser' {\n  export function parse(input: string): Record<string, any>;\n}\n\ndeclare module 'logfmt/lib/stringify' {\n  export function stringify(data: Record<string, any>): string;\n}\n\ndeclare module 'store' {\n  const store: {\n    get(key: string): any;\n    set(key: string, value: any): void;\n  };\n  export default store;\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/types/hyperlink.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/types/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/types/metrics.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/types/otel.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/types/search.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/types/trace.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/types/tracking.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/types/units.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/DraggableManager/DraggableManager.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/DraggableManager/DraggableManager.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/DraggableManager/EUpdateTypes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/DraggableManager/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/DraggableManager/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/ValidatedFormField.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/ValidatedFormField.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":10,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[278,281],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[278,281],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2025 The Jaeger Authors.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React, { useState } from 'react';\nimport { Input, Popover } from 'antd';\nimport cx from 'classnames';\n\nimport './ValidatedFormField.css';\n\nexport default function ValidatedFormField(props: any) {\n  const [blur, setOnBlur] = useState(false);\n  const { onChange: handleChange, validate, ...rest } = props;\n\n  const validationResult = validate(rest.value);\n  const isInvalid = blur && Boolean(validationResult);\n\n  return (\n    <Popover placement=\"bottomLeft\" open={isInvalid} {...validationResult}>\n      <Input\n        className={cx({\n          'value-is-invalid': isInvalid,\n        })}\n        onChange={handleChange}\n        onBlur={() => {\n          setOnBlur(true);\n        }}\n        onFocus={() => {\n          setOnBlur(false);\n        }}\n        type=\"text\"\n        {...rest}\n      />\n    </Popover>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/color-generator.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/color-generator.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/config/get-config.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/config/get-config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/config/get-target.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/config/get-target.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/config/process-deprecation.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/config/process-deprecation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/config/process-scripts.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/config/process-scripts.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/configure-store.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/configure-store.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ReduxState' is defined but never used.","line":14,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":20},{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from '@typescript-eslint/naming-convention').","line":17,"column":3,"severity":1,"nodeType":null,"fix":{"range":[705,769],"text":" "}},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":27,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1034,1037],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1034,1037],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":30,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1143,1146],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1143,1146],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":48,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":48,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1606,1609],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1606,1609],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":1,"source":"// Copyright (c) 2017 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { createStore, combineReducers, applyMiddleware, compose, Store, StoreEnhancer } from 'redux';\nimport { createReduxHistoryContext } from 'redux-first-history';\nimport { createBrowserHistory } from 'history';\n\nimport traceDiff from '../components/TraceDiff/duck';\nimport archive from '../components/TracePage/ArchiveNotifier/duck';\nimport traceTimeline from '../components/TracePage/TraceTimelineViewer/duck';\nimport jaegerReducers from '../reducers';\nimport * as jaegerMiddlewares from '../middlewares';\nimport { getAppEnvironment } from './constants';\nimport { ReduxState } from '../types';\n\ndeclare global {\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  interface Window {\n    __REDUX_DEVTOOLS_EXTENSION__?: () => StoreEnhancer;\n  }\n}\n\nconst { createReduxHistory, routerMiddleware, routerReducer } = createReduxHistoryContext({\n  history: createBrowserHistory(),\n});\n\nexport default function configureStore(): Store<any> {\n  const middlewares = [\n    ...Object.keys(jaegerMiddlewares)\n      .map(key => (jaegerMiddlewares as any)[key])\n      .filter(Boolean),\n    routerMiddleware,\n  ];\n\n  let enhancer: StoreEnhancer = applyMiddleware(...middlewares);\n\n  if (getAppEnvironment() !== 'production' && window && window.__REDUX_DEVTOOLS_EXTENSION__) {\n    enhancer = compose(enhancer, window.__REDUX_DEVTOOLS_EXTENSION__());\n  }\n\n  return createStore(\n    combineReducers({\n      ...jaegerReducers,\n      archive,\n      traceDiff,\n      traceTimeline,\n      router: routerReducer,\n    }) as any,\n    enhancer\n  );\n}\n\nexport const store = configureStore();\nexport const history = createReduxHistory(store);\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/constants.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/date.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/date.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/documentTitle.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/documentTitle.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_' is defined but never used.","line":29,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":29,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2025 The Jaeger Authors.\n// SPDX-License-Identifier: Apache-2.0\n\nimport * as React from 'react';\n\ntype Props = {\n  title?: string | null;\n};\n\n/**\n * DocumentTitle - minimal replacement for react-helmet title usage.\n * - Sets document.title to `title` when mounted/updated.\n * - Restores previous document.title when unmounted.\n *\n * Note: client-side only. For SSR/head management, consider react-helmet-async.\n */\nconst DocumentTitle: React.FC<Props> = ({ title }) => {\n  const prevTitleRef = React.useRef<string | null>(typeof document !== 'undefined' ? document.title : null);\n\n  React.useEffect(() => {\n    const prevTitle = prevTitleRef.current;\n    if (typeof title === 'string' && title !== document.title) {\n      document.title = title;\n    }\n    return () => {\n      if (prevTitle != null) {\n        try {\n          document.title = prevTitle;\n        } catch (_) {\n          // ignore in weird test envs\n        }\n      }\n    };\n  }, [title]);\n\n  return null;\n};\n\nexport default DocumentTitle;\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/embedded-url.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/embedded-url.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":50,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":50,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1531,1534],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1531,1534],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2018 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport _flatMap from 'lodash/flatMap';\nimport queryString from 'query-string';\n\nimport { EmbeddedState } from '../types/embedded';\n\nfunction getStrings(value: string): string;\nfunction getStrings(value: object): string[];\nfunction getStrings(value: string | object): string | string[] {\n  return typeof value === 'string' ? value : _flatMap(value, getStrings);\n}\n\nconst VALUE_ENABLED = '1';\nexport const VERSION_0 = 'v0';\n\n// uiEmbed=v0\n// uiSearchHideGraph=1\n// uiTimelineCollapseTitle=1\n// uiTimelineHideMinimap=1\n// uiTimelineHideSummary=1\nconst STATE_PARAMS_V0 = {\n  searchHideGraph: 'uiSearchHideGraph',\n  timeline: {\n    collapseTitle: 'uiTimelineCollapseTitle',\n    hideMinimap: 'uiTimelineHideMinimap',\n    hideSummary: 'uiTimelineHideSummary',\n  },\n};\n\nconst PARAM_KEYS_V0 = getStrings(STATE_PARAMS_V0);\n\nexport function getEmbeddedState(search: string): null | EmbeddedState {\n  const { uiEmbed, ...rest } = queryString.parse(search);\n  if (uiEmbed !== VERSION_0) {\n    return null;\n  }\n  return {\n    version: VERSION_0,\n    searchHideGraph: rest[STATE_PARAMS_V0.searchHideGraph] === VALUE_ENABLED,\n    timeline: {\n      collapseTitle: rest[STATE_PARAMS_V0.timeline.collapseTitle] === VALUE_ENABLED,\n      hideMinimap: rest[STATE_PARAMS_V0.timeline.hideMinimap] === VALUE_ENABLED,\n      hideSummary: rest[STATE_PARAMS_V0.timeline.hideSummary] === VALUE_ENABLED,\n    },\n  };\n}\n\nexport function stripEmbeddedState(state: Record<string, any>) {\n  const { uiEmbed = undefined, ...rv } = state;\n  if (uiEmbed === VERSION_0) {\n    PARAM_KEYS_V0.forEach(Reflect.deleteProperty.bind(null, rv));\n  }\n  return rv;\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/filter-spans.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/filter-spans.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":40,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1519,1522],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1519,1522],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2019 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { KeyValuePair, Span } from '../types/trace';\nimport { IOtelSpan, IAttribute } from '../types/otel';\nimport { TNil } from '../types';\n\nexport default function filterSpans(textFilter: string, spans: ReadonlyArray<Span | IOtelSpan> | TNil) {\n  if (!spans) {\n    return null;\n  }\n\n  // if a span field includes at least one filter in includeFilters, the span is a match\n  const includeFilters: string[] = [];\n\n  // values with keys that include text in any one of the excludeKeys will be ignored\n  const excludeKeys: string[] = [];\n\n  // split textFilter by whitespace, but not that in double quotes, remove empty strings, and extract includeFilters and excludeKeys\n  const regex = /[^\\s\"]+|\"([^\"]*)\"/g;\n  const match = textFilter.match(regex);\n  const results = match ? match.map(e => e.replace(/\"(.*)\"/, '$1')) : [];\n\n  results.filter(Boolean).forEach(w => {\n    if (w[0] === '-') {\n      excludeKeys.push(w.substr(1).toLowerCase());\n    } else {\n      includeFilters.push(w.toLowerCase());\n    }\n  });\n\n  const isTextInFilters = (filters: Array<string>, text: string) =>\n    filters.some(filter => text.toLowerCase().includes(filter));\n\n  const isTextInKeyValues = (kvs: ReadonlyArray<KeyValuePair | IAttribute>) =>\n    kvs\n      ? kvs.some(kv => {\n          // ignore checking key and value for a match if key is in excludeKeys\n          if (isTextInFilters(excludeKeys, kv.key)) return false;\n          const value = (kv as any).value; // handle legacy KeyValuePair and IAttribute\n          if (value === null || value === undefined) return false;\n          const valueString = String(value);\n          // match if key, value or key=value string matches an item in includeFilters\n          return (\n            isTextInFilters(includeFilters, kv.key) ||\n            isTextInFilters(includeFilters, valueString) ||\n            isTextInFilters(includeFilters, `${kv.key}=${valueString}`)\n          );\n        })\n      : false;\n\n  const isSpanAMatch = (span: Span | IOtelSpan) => {\n    if ('operationName' in span) {\n      // Legacy Span\n      return (\n        isTextInFilters(includeFilters, span.operationName) ||\n        isTextInFilters(includeFilters, span.process.serviceName) ||\n        isTextInKeyValues(span.tags) ||\n        (Array.isArray(span.logs) && span.logs.some(log => isTextInKeyValues(log.fields))) ||\n        isTextInKeyValues(span.process.tags) ||\n        includeFilters.some(filter => filter.replace(/^0*/, '') === span.spanID.replace(/^0*/, ''))\n      );\n    }\n    // IOtelSpan\n    return (\n      isTextInFilters(includeFilters, span.name) ||\n      isTextInFilters(includeFilters, span.resource.serviceName) ||\n      isTextInKeyValues(span.attributes) ||\n      (Array.isArray(span.events) && span.events.some(event => isTextInKeyValues(event.attributes))) ||\n      isTextInKeyValues(span.resource.attributes) ||\n      includeFilters.some(filter => filter.replace(/^0*/, '') === span.spanID.replace(/^0*/, ''))\n    );\n  };\n\n  // declare as const because need to disambiguate the type\n  const rv: Set<string> = new Set(spans.filter(isSpanAMatch).map((span: Span | IOtelSpan) => span.spanID));\n  return rv;\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/generate-action-types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/guardReducer.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/guardReducer.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/link-formatting.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/link-formatting.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":72,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":72,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2461,2464],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2461,2464],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2020 The Jaeger Authors.\n// SPDX-License-Identifier: Apache-2.0\n\n/**\n * Formatters that can be used in link patterns.\n *\n * @property epoch_micros_to_date_iso - Converts epoch microseconds to ISO 8601 date string.\n * @property pad_start - Pads the start of a string with a given character to a specified length.\n * @property add - Adds a numeric offset to a number.\n */\nconst formatFunctions: Record<string, <T>(value: T, ...args: string[]) => T | string | number> = {\n  epoch_micros_to_date_iso: microsSinceEpoch => {\n    if (typeof microsSinceEpoch !== 'number') {\n      console.error('epoch_micros_to_date_iso() can only operate on numbers, ignoring formatting', {\n        value: microsSinceEpoch,\n      });\n      return microsSinceEpoch;\n    }\n\n    return new Date(microsSinceEpoch / 1000).toISOString();\n  },\n  pad_start: (value, desiredLengthString: string, padCharacter: string) => {\n    if (typeof value !== 'string') {\n      console.error('pad_start() can only operate on strings, ignoring formatting', {\n        value,\n        desiredLength: desiredLengthString,\n        padCharacter,\n      });\n      return value;\n    }\n    const desiredLength = parseInt(desiredLengthString, 10);\n    if (Number.isNaN(desiredLength)) {\n      console.error('pad_start() needs a desired length as second argument, ignoring formatting', {\n        value,\n        desiredLength: desiredLengthString,\n        padCharacter,\n      });\n    }\n\n    return value.padStart(desiredLength, padCharacter);\n  },\n\n  add: (value, offsetString: string) => {\n    if (typeof value !== 'number') {\n      console.error('add() needs a numeric offset as an argument, ignoring formatting', {\n        value,\n        offsetString,\n      });\n      return value;\n    }\n\n    const offset = parseInt(offsetString, 10);\n    if (Number.isNaN(offset)) {\n      console.error('add() needs a valid offset in microseconds as second argument, ignoring formatting', {\n        value,\n        offsetString,\n      });\n      return value;\n    }\n\n    return value + offset;\n  },\n};\n\n/**\n * Parses a parameter string that may contain formatters (e.g. \"param | formatter1 | formatter2 arg1\").\n * Returns the parameter name and a chained function that applies all specified formatters.\n *\n * @param parameter - The parameter string to parse.\n * @returns An object containing the parameter name and the formatting function (or null if no formatters).\n */\nexport function getParameterAndFormatter<T = any>(\n  parameter: string\n): {\n  parameterName: string;\n  formatFunction: ((value: T) => T | string | number) | null;\n} {\n  const [parameterName, ...formatStrings] = parameter.split('|').map(part => part.trim());\n\n  // const formatFunctions = getFormatFunctions<T>();\n\n  const formatters = formatStrings\n    .map(formatString => {\n      const [formatFunctionName, ...args] = formatString.split(/ +/);\n      const formatFunction = formatFunctions[formatFunctionName] as\n        | ((value: T, ...args: string[]) => T | string | number)\n        | undefined;\n      if (!formatFunction) {\n        console.error(\n          'Unrecognized format function name, ignoring formatting. Other formatting functions may be applied',\n          {\n            parameter,\n            formatFunctionName,\n            validValues: Object.keys(formatFunctions),\n          }\n        );\n        return null;\n      }\n      return (val: T) => formatFunction(val, ...args);\n    })\n    .filter((fn): fn is NonNullable<typeof fn> => fn != null);\n\n  const chainedFormatFunction = (value: T) => formatters.reduce((acc, fn) => fn(acc) as T, value);\n\n  return {\n    parameterName,\n    formatFunction: formatters.length ? chainedFormatFunction : null,\n  };\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/number.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/number.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/parseQuery.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/parseQuery.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/plexus/set-on-graph.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/plexus/set-on-graph.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/prefix-url.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/prefix-url.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/readJsonFile.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/readJsonFile.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":6,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[174,177],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[174,177],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":8,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[291,294],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[291,294],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":33,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":33,"endColumn":21},{"ruleId":"@typescript-eslint/no-shadow","severity":1,"message":"'error' is already declared in the upper scope on line 33 column 16.","line":36,"column":18,"nodeType":"Identifier","messageId":"noShadow","endLine":36,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2019 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport JaegerAPI from '../api/jaeger';\n\nfunction tryParseMultiLineInput(input: string): any[] {\n  const jsonStrings = input.split('\\n').filter((line: string) => line.trim() !== '');\n  const parsedObjects: any[] = [];\n\n  jsonStrings.forEach((jsonString: string, index: number) => {\n    try {\n      const traceObj = JSON.parse(jsonString.trim());\n      parsedObjects.push(traceObj);\n    } catch (error) {\n      throw new Error(`Error parsing JSON at line ${index + 1}: ${(error as Error).message}`);\n    }\n  });\n\n  return parsedObjects;\n}\n\nexport default function readJsonFile(fileList: { file: File }): Promise<string> {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = () => {\n      if (typeof reader.result !== 'string') {\n        reject(new Error('Invalid result type'));\n        return;\n      }\n      let traceObj;\n      try {\n        traceObj = JSON.parse(reader.result);\n      } catch (error) {\n        try {\n          traceObj = tryParseMultiLineInput(reader.result);\n        } catch (error) {\n          reject(error);\n          return;\n        }\n      }\n      if (Array.isArray(traceObj) && traceObj.every(obj => 'resourceSpans' in obj)) {\n        const mergedResourceSpans = traceObj.reduce((acc, obj) => {\n          acc.push(...obj.resourceSpans);\n          return acc;\n        }, []);\n\n        traceObj = { resourceSpans: mergedResourceSpans };\n      }\n\n      if ('resourceSpans' in traceObj) {\n        JaegerAPI.transformOTLP(traceObj)\n          .then((result: string) => {\n            resolve(result);\n          })\n          .catch(() => {\n            reject(new Error('Error converting traces to OTLP'));\n          });\n      } else {\n        resolve(traceObj);\n      }\n    };\n    reader.onerror = () => {\n      const errMessage = reader.error ? `: ${String(reader.error)}` : '';\n      reject(new Error(`Error reading the JSON file${errMessage}`));\n    };\n    reader.onabort = () => {\n      reject(new Error(`Reading the JSON file has been aborted`));\n    };\n    try {\n      reader.readAsText(fileList.file);\n    } catch (error) {\n      reject(new Error(`Error reading the JSON file: ${(error as Error).message}`));\n    }\n  });\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/regexp-escape.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/regexp-escape.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/sort.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/sort.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/span-ancestor-ids.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/span-ancestor-ids.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/stringSupplant.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/stringSupplant.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/test/requestAnimationFrame.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/tracking/common.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/tracking/error-capture.test.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":56,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":56,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1941,1944],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1941,1944],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":118,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":118,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4172,4175],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4172,4175],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":119,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":119,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4194,4197],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4194,4197],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":165,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":165,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5697,5700],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5697,5700],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":175,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":175,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6091,6094],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6091,6094],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":201,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":201,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6952,6955],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6952,6955],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":216,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":216,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7570,7573],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7570,7573],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":230,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":230,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8108,8111],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8108,8111],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":244,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":244,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8652,8655],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8652,8655],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":262,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":262,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9322,9325],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9322,9325],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":277,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":277,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9967,9970],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9967,9970],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2026 The Jaeger Authors.\n// SPDX-License-Identifier: Apache-2.0\n\nimport {\n  init,\n  captureException,\n  formatErrorMessage,\n  formatStackTrace,\n  resetState,\n  trackNavigation,\n} from './error-capture';\n\ndescribe('error-capture', () => {\n  let originalFetch: typeof window.fetch;\n  let addEventListenerSpy: jest.SpyInstance;\n  let mockFetch: jest.Mock;\n\n  beforeEach(() => {\n    originalFetch = window.fetch;\n    // Mock fetch to avoid network requests\n    mockFetch = jest.fn().mockReturnValue(\n      Promise.resolve({\n        status: 200,\n        json: () => Promise.resolve({}),\n      } as Response)\n    );\n    window.fetch = mockFetch;\n\n    addEventListenerSpy = jest.spyOn(window, 'addEventListener');\n    resetState();\n  });\n\n  afterEach(() => {\n    window.fetch = originalFetch;\n    jest.restoreAllMocks();\n    // Ideally we would reset the module state here, but we can't easily do that with ES modules without jest.resetModules() and dynamic imports.\n    // However, since we are testing the \"singleton\" behavior, we might need a way to reset it if we want to test \"first init\" vs \"second init\" purely.\n    // For now, we will rely on the fact that we can't easily reset the internal boolean, so we have to structure tests accordingly\n    // or we might need to export a reset function for testing purposes, but let's try to verify the behavior with what we have.\n    // Actually, if the fix works, calling init multiple times is safe.\n  });\n\n  describe('init', () => {\n    it('wraps window.fetch on first initialization', () => {\n      const initialFetch = window.fetch;\n      init();\n      expect(window.fetch).not.toBe(initialFetch);\n    });\n\n    it('uses attachEvent if addEventListener is missing', () => {\n      // Removed invalid IE8 test\n    });\n\n    it('formatStackTrace returns empty string for undefined', () => {\n      expect(formatStackTrace(undefined)).toBe('');\n      expect(formatStackTrace(null as any)).toBe('');\n      expect(formatStackTrace('')).toBe('');\n    });\n\n    it('does not re-wrap window.fetch on subsequent initialization', () => {\n      // First ensure we are in a state where it is initialized (from previous test or fresh)\n      // Since jest modules state persists, if previous test ran, it is already initialized.\n      // But let's be robust.\n\n      // Let's rely on the fact that if we fix the code, repeat calls shouldn't change it.\n      // Let's capture the state after one call.\n      init();\n      const afterFirstInitFetch = window.fetch;\n\n      // Prove it's wrapped (optional, but good)\n      expect(afterFirstInitFetch).not.toBe(mockFetch);\n\n      init();\n      expect(window.fetch).toBe(afterFirstInitFetch);\n\n      init();\n      expect(window.fetch).toBe(afterFirstInitFetch);\n    });\n\n    it('adds event listeners only once', () => {\n      // Clear previous calls from beforeEach or other tests if any\n      addEventListenerSpy.mockClear();\n\n      init();\n      // It might add 'error' and 'unhandledrejection'\n      // If already initialized, it should add NONE.\n      // If not initialized, it adds 2.\n\n      // Because we can't reset the module state easily, we have to assume the previous tests might have run.\n      // Instead of checking exact count, let's check that subsequent calls add ZERO.\n\n      addEventListenerSpy.mockClear();\n      init();\n      expect(addEventListenerSpy).not.toHaveBeenCalled();\n    });\n\n    it('updates config on subsequent calls', () => {\n      const mockOnError = jest.fn();\n      init({ onError: mockOnError });\n\n      captureException(new Error('test'));\n      expect(mockOnError).toHaveBeenCalled();\n    });\n\n    it('sets up global error handlers', () => {\n      // Simulate global error\n      const errorEvent = new ErrorEvent('error', {\n        error: new Error('Global error'),\n        message: 'Global error message',\n      });\n      window.dispatchEvent(errorEvent);\n      // We need to spy on captureException, but it is exported.\n      // Instead, we check if onErrorCallback was called (if init was called)\n    });\n\n    it('sets up unhandled rejection handler', () => {\n      class MockPromiseRejectionEvent extends Event {\n        promise: Promise<any>;\n        reason: any;\n        constructor(type: string, eventInit: PromiseRejectionEventInit) {\n          super(type, { bubbles: true, cancelable: true });\n          this.promise = eventInit.promise;\n          this.reason = eventInit.reason;\n        }\n      }\n      const rejectionEvent = new MockPromiseRejectionEvent('unhandledrejection', {\n        promise: Promise.resolve(),\n        reason: new Error('Unhandled rejection'),\n      });\n      window.dispatchEvent(rejectionEvent);\n    });\n  });\n\n  describe('captureException', () => {\n    it('captures string errors', () => {\n      const mockOnError = jest.fn();\n      init({ onError: mockOnError });\n      captureException('string error');\n      expect(mockOnError).toHaveBeenCalledWith(\n        expect.objectContaining({ name: 'Error', message: 'string error' }),\n        expect.anything()\n      );\n    });\n\n    it('captures Error objects', () => {\n      const mockOnError = jest.fn();\n      init({ onError: mockOnError });\n      const err = new Error('obj error');\n      captureException(err);\n      expect(mockOnError).toHaveBeenCalledWith(\n        expect.objectContaining({ name: 'Error', message: 'obj error' }),\n        expect.anything()\n      );\n    });\n\n    it('does nothing if no callback', () => {\n      init({ onError: undefined });\n      // Should not throw\n      captureException(new Error('foo'));\n    });\n\n    it('ignores 501 errors from metrics API', () => {\n      const mockOnError = jest.fn();\n      init({ onError: mockOnError });\n      const err: any = new Error('HTTP Error: metrics querying is currently disabled');\n      err.httpStatus = 501;\n      captureException(err);\n      // Should not call the error callback for 501 errors\n      expect(mockOnError).not.toHaveBeenCalled();\n    });\n\n    it('captures non-501 HTTP errors normally', () => {\n      const mockOnError = jest.fn();\n      init({ onError: mockOnError });\n      const err: any = new Error('HTTP Error: Not Found');\n      err.httpStatus = 404;\n      captureException(err);\n      // Should call the error callback for other HTTP errors\n      expect(mockOnError).toHaveBeenCalledWith(\n        expect.objectContaining({ name: 'Error', message: 'HTTP Error: Not Found' }),\n        expect.anything()\n      );\n    });\n  });\n\n  describe('Breadcrumbs', () => {\n    let mockOnError: jest.Mock;\n\n    beforeEach(() => {\n      mockOnError = jest.fn();\n      init({ onError: mockOnError });\n      // Reset breadcrumbs if possible? No export.\n      // But invalidating init doesn't reset them.\n    });\n\n    it('tracks fetch requests success', async () => {\n      await window.fetch('/api/test');\n      captureException(new Error('trigger'));\n\n      const context = mockOnError.mock.calls[0][1];\n      const fetchCrumb = context.breadcrumbs.find((b: any) => b.category === 'fetch');\n      expect(fetchCrumb).toBeDefined();\n      expect(fetchCrumb.data.url).toBe('/api/test');\n      expect(fetchCrumb.data.status_code).toBe(200);\n    });\n\n    it('tracks fetch requests failure', async () => {\n      mockFetch.mockRejectedValueOnce(new Error('Network error'));\n      await expect(window.fetch('/api/fail')).rejects.toThrow('Network error');\n\n      captureException(new Error('trigger'));\n      const context = mockOnError.mock.calls[0][1];\n      // We need to find the latest fetch crumb\n      const fetchCrumb = context.breadcrumbs\n        .reverse()\n        .find((b: any) => b.category === 'fetch' && b.data.url === '/api/fail');\n      expect(fetchCrumb).toBeDefined();\n      expect(fetchCrumb.data.error).toBe('Network error');\n    });\n\n    it('tracks DOM clicks', () => {\n      const btn = document.createElement('button');\n      btn.id = 'my-btn';\n      btn.className = 'btn primary';\n      document.body.appendChild(btn);\n      btn.click();\n\n      captureException(new Error('trigger'));\n      const context = mockOnError.mock.calls[0][1];\n      const uiCrumb = context.breadcrumbs.reverse().find((b: any) => b.category === 'ui.click');\n      expect(uiCrumb).toBeDefined();\n      expect(uiCrumb.message).toContain('button#my-btn');\n      document.body.removeChild(btn);\n    });\n\n    it('tracks DOM clicks with classes only', () => {\n      const btn = document.createElement('button');\n      btn.className = 'btn primary extra';\n      document.body.appendChild(btn);\n      btn.click();\n\n      captureException(new Error('trigger'));\n      const context = mockOnError.mock.calls[0][1];\n      const uiCrumb = context.breadcrumbs.reverse().find((b: any) => b.category === 'ui.click');\n      expect(uiCrumb).toBeDefined();\n      // Expect limited classes (slice(0,2))\n      // button.btn.primary\n      expect(uiCrumb.message).toContain('button.btn.primary');\n      document.body.removeChild(btn);\n    });\n\n    it('tracks DOM inputs', () => {\n      const input = document.createElement('input');\n      input.type = 'text';\n      input.name = 'username';\n      document.body.appendChild(input);\n\n      input.dispatchEvent(new Event('input', { bubbles: true }));\n\n      captureException(new Error('trigger'));\n      const context = mockOnError.mock.calls[0][1];\n      const uiCrumb = context.breadcrumbs.reverse().find((b: any) => b.category === 'ui.input');\n      expect(uiCrumb).toBeDefined();\n      // Check getCSSPath logic for attributes\n      expect(uiCrumb.message).toContain('input');\n      // getCSSPath picks the first matching attribute from ['type', 'name', 'role'].\n      // type=\"text\" is present and matched first.\n      expect(uiCrumb.message).toContain('type=\"text\"');\n      document.body.removeChild(input);\n    });\n\n    it('tracks navigation', () => {\n      trackNavigation('/new-page');\n\n      captureException(new Error('trigger'));\n      const context = mockOnError.mock.calls[0][1];\n      const navCrumb = context.breadcrumbs.reverse().find((b: any) => b.category === 'navigation');\n      expect(navCrumb).toBeDefined();\n      expect(navCrumb.data.to).toBe('/new-page');\n    });\n  });\n\n  describe('formatErrorMessage', () => {\n    it('formats error messages correctly', () => {\n      expect(formatErrorMessage('Error: something went wrong')).toBe('! something went wrong');\n      expect(formatErrorMessage('TypeError: undefined is not a function')).toBe(\n        '! Type! undefined is not a function'\n      );\n    });\n  });\n\n  describe('formatStackTrace', () => {\n    it('cleans up stack traces', () => {\n      const stack = `Error: foo\n          at bar (baz.js:10:2)\n          at qaz (qux.js:5:6)`;\n      const cleaned = formatStackTrace(stack);\n      expect(cleaned).toContain('at bar');\n      // The current implementation only trims whitespace, it doesn't remove the message line\n      expect(cleaned).toContain('Error: foo');\n      expect(cleaned).not.toContain('  at bar'); // Should be trimmed\n    });\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/tracking/error-capture.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":76,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":76,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2653,2656],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2653,2656],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":275,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":275,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7508,7511],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7508,7511],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":280,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":280,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7780,7783],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7780,7783],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2026 The Jaeger Authors.\n// SPDX-License-Identifier: Apache-2.0\n\n/**\n * Error Capture Module\n *\n * Provides error capturing and breadcrumb tracking functionality for analytics.\n * This module is tracking-implementation agnostic - it captures errors and user\n * interactions, allowing the consumer to format the data as needed.\n *\n * Key features:\n * - Captures JavaScript errors (window.onerror, unhandledrejection)\n * - Tracks user interactions as breadcrumbs (navigation, fetch requests, DOM events)\n * - Provides error context including stack trace, breadcrumbs, and session duration\n *\n * Breadcrumbs are a chronological log of user actions and events that occurred before\n * an error. They provide context for debugging by showing what the user was doing\n * leading up to the error. Examples:\n * - Navigation: User navigated from /search to /trace/abc123\n * - Fetch: API call to /api/traces returned 404\n * - UI: User clicked on button.submit-btn\n * - UI: User typed into input#search-field\n *\n * Each breadcrumb contains:\n * - type: The type of event (e.g., 'http', 'ui', 'navigation')\n * - category: More specific categorization (e.g., 'fetch', 'ui.click')\n * - message: Human-readable description (e.g., CSS selector for UI events)\n * - data: Additional structured data (e.g., HTTP status code, URL)\n * - timestamp: When the event occurred\n *\n * Example usage:\n * ```typescript\n * import { init, captureException } from './error-capture';\n *\n * init({\n *   onError: (error, context) => {\n *     // Format and send error data to your analytics service\n *     console.log('Error:', error.message);\n *     console.log('Stack:', error.stack);\n *     console.log('Breadcrumbs:', context.breadcrumbs);\n *     // breadcrumbs will be an array like:\n *     // [\n *     //   { category: 'navigation', data: { to: '/search' }, timestamp: 1234567890 },\n *     //   { category: 'fetch', data: { url: '/api/traces', status_code: 200 }, timestamp: 1234567891 },\n *     //   { category: 'ui.click', message: 'button.search-btn', timestamp: 1234567892 }\n *     // ]\n *   },\n *   tags: { version: '1.0.0' }\n * });\n *\n * // Manually capture an error\n * captureException(new Error('Something went wrong'));\n * ```\n */\n\n// Error data structure\nexport interface IErrorData {\n  name: string;\n  message: string;\n  stack?: string;\n}\n\n// Context data provided with errors\nexport interface IErrorContext {\n  breadcrumbs: IBreadcrumb[];\n  tags: { [key: string]: string };\n  sessionDuration: number;\n  url: string;\n}\n\n// Breadcrumb structure\nexport interface IBreadcrumb {\n  type?: string;\n  category?: string;\n  message?: string;\n  data?: { [key: string]: any };\n  timestamp?: number;\n}\n\n// Configuration options\ninterface IInitOptions {\n  onError?: (error: IErrorData, context: IErrorContext) => void;\n  tags?: { [key: string]: string };\n}\n\n// Internal state\nlet breadcrumbsList: IBreadcrumb[] = [];\nlet onErrorCallback: ((error: IErrorData, context: IErrorContext) => void) | null = null;\nlet sessionStartTime = Date.now();\nlet errorTags: { [key: string]: string } = {};\nlet isInitialized = false;\n\nconst MAX_BREADCRUMBS = 100;\n\n// Utility functions for formatting\n\n/**\n * Collapse whitespace in a string - replaces newlines with \"|\" and multiple spaces with single space\n */\nfunction collapseWhitespace(value: string): string {\n  return value.trim().replace(/\\n/g, '|').replace(/\\s\\s+/g, ' ').trim();\n}\n\n/**\n * Format an error message by removing \"Error:\" prefix and cleaning up\n * Example: \"TypeError: Cannot read property 'x'\" -> \"! Type! Cannot read property 'x'\"\n */\nexport function formatErrorMessage(message: string): string {\n  let msg = collapseWhitespace(message);\n  const parts = ['! '];\n  const j = msg.indexOf(':');\n  if (j > -1) {\n    const start = msg.slice(0, j).replace(/error/i, '').trim();\n    if (start) {\n      parts.push(start, '! ');\n    }\n    msg = msg.slice(j + 1);\n  }\n  parts.push(msg.trim());\n  return parts.join('');\n}\n\n/**\n * Clean up a stack trace string by removing noise\n * - Removes error message line\n * - Collapses whitespace\n */\nexport function formatStackTrace(stack: string | undefined): string {\n  if (!stack) {\n    return '';\n  }\n\n  const lines: string[] = [];\n  const stackLines = stack.split('\\n');\n\n  for (const line of stackLines) {\n    // Collapse whitespace and trim\n    const cleaned = line.replace(/\\s\\s+/g, ' ').trim();\n\n    if (cleaned) {\n      lines.push(cleaned);\n    }\n  }\n\n  return lines.join('\\n');\n}\n\n// Add a breadcrumb to the list\nfunction addBreadcrumb(breadcrumb: IBreadcrumb) {\n  breadcrumbsList.push({\n    ...breadcrumb,\n    timestamp: Date.now(),\n  });\n  if (breadcrumbsList.length > MAX_BREADCRUMBS) {\n    breadcrumbsList = breadcrumbsList.slice(-MAX_BREADCRUMBS);\n  }\n}\n\n// Helper to get CSS path for DOM elements\nfunction getCSSPath(element: HTMLElement): string {\n  if (!element || element.nodeType !== 1) return '';\n\n  const path: string[] = [];\n  let current: HTMLElement | null = element;\n\n  while (current && current.nodeType === 1 && path.length < 5) {\n    let selector = current.tagName.toLowerCase();\n\n    if (current.id) {\n      selector += `#${current.id}`;\n      path.unshift(selector);\n      break;\n    }\n\n    if (current.className && typeof current.className === 'string') {\n      const classes = current.className\n        .split(/\\s+/)\n        .filter(c => c && c.trim())\n        .slice(0, 2)\n        .join('.');\n      if (classes) {\n        selector += `.${classes}`;\n      }\n    }\n\n    const attrs = ['type', 'name', 'role'];\n    for (const attr of attrs) {\n      const value = current.getAttribute(attr);\n      if (value) {\n        selector += `[${attr}=\"${value}\"]`;\n        break;\n      }\n    }\n\n    path.unshift(selector);\n    current = current.parentElement;\n  }\n\n  return path.join(' > ');\n}\n\n// Setup breadcrumb tracking with hardcoded settings\nfunction setupBreadcrumbs() {\n  if (typeof window === 'undefined') return;\n\n  // Track fetch requests\n  const originalFetch = window.fetch;\n  window.fetch = function (...args: Parameters<typeof fetch>) {\n    const url =\n      typeof args[0] === 'string' ? args[0] : args[0] instanceof Request ? args[0].url : args[0].toString();\n\n    return originalFetch.apply(this, args).then(\n      response => {\n        addBreadcrumb({\n          type: 'http',\n          category: 'fetch',\n          data: {\n            url,\n            status_code: response.status,\n            method: args[1]?.method || 'GET',\n          },\n        });\n        return response;\n      },\n      error => {\n        addBreadcrumb({\n          type: 'http',\n          category: 'fetch',\n          data: {\n            url,\n            status_code: 0,\n            error: error.message,\n          },\n        });\n        throw error;\n      }\n    );\n  };\n\n  // Track DOM events (click and input)\n  if (typeof document !== 'undefined') {\n    document.addEventListener(\n      'click',\n      event => {\n        const target = event.target as HTMLElement;\n        addBreadcrumb({\n          type: 'ui',\n          category: 'ui.click',\n          message: getCSSPath(target),\n        });\n      },\n      true\n    );\n\n    document.addEventListener(\n      'input',\n      event => {\n        const target = event.target as HTMLElement;\n        addBreadcrumb({\n          type: 'ui',\n          category: 'ui.input',\n          message: getCSSPath(target),\n        });\n      },\n      true\n    );\n  }\n}\n\n// Public API\n\n/**\n * Capture an error and trigger the error callback with context\n */\nexport function captureException(error: any) {\n  const errorObj = error instanceof Error ? error : new Error(String(error));\n\n  // Ignore 501 errors from metrics API - they indicate metrics storage is not configured,\n  // which is an expected state that should be handled gracefully by the UI\n  if ((errorObj as any).httpStatus === 501) {\n    return;\n  }\n\n  // Add error as breadcrumb\n  addBreadcrumb({\n    category: 'error',\n    message: `${errorObj.name}: ${errorObj.message}`,\n  });\n\n  // Call callback with error and context\n  if (onErrorCallback) {\n    const context: IErrorContext = {\n      breadcrumbs: [...breadcrumbsList],\n      tags: errorTags,\n      sessionDuration: Date.now() - sessionStartTime,\n      url: typeof window !== 'undefined' ? window.location.href : '',\n    };\n\n    const errorData: IErrorData = {\n      name: errorObj.name || 'Error',\n      message: errorObj.message || 'Unknown error',\n      stack: errorObj.stack,\n    };\n\n    onErrorCallback(errorData, context);\n  }\n}\n\n/**\n * Initialize error capture with callback and configuration\n */\nexport function init(options: IInitOptions = {}) {\n  const { onError, tags = {} } = options;\n\n  onErrorCallback = onError || null;\n  errorTags = tags;\n\n  if (isInitialized) {\n    return;\n  }\n\n  // Setup breadcrumb tracking\n  setupBreadcrumbs();\n\n  // Setup global error handlers\n  if (typeof window !== 'undefined') {\n    window.addEventListener('error', event => {\n      const error = event.error || new Error(event.message);\n      captureException(error);\n    });\n\n    window.addEventListener('unhandledrejection', event => {\n      const error = event.reason instanceof Error ? event.reason : new Error(String(event.reason));\n      captureException(error);\n    });\n  }\n\n  isInitialized = true;\n}\n\n/**\n * Track a navigation event as a breadcrumb\n */\nexport function trackNavigation(to: string) {\n  addBreadcrumb({\n    category: 'navigation',\n    data: { to },\n  });\n}\n\n/**\n * Reset internal state for testing purposes\n */\nexport function resetState() {\n  isInitialized = false;\n  breadcrumbsList = [];\n  onErrorCallback = null;\n  errorTags = {};\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/tracking/ga-coverage.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/tracking/ga.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/tracking/ga.ts","messages":[{"ruleId":"@typescript-eslint/no-shadow","severity":1,"message":"'context' is already declared in the upper scope on line 276 column 9.","line":347,"column":46,"nodeType":"Identifier","messageId":"noShadow","endLine":347,"endColumn":68}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2021 The Jaeger Authors.\n// SPDX-License-Identifier: Apache-2.0\n\nimport _get from 'lodash/get';\nimport {\n  IErrorData,\n  IErrorContext,\n  IBreadcrumb,\n  captureException,\n  init as ErrorCaptureInit,\n  trackNavigation,\n  formatErrorMessage,\n} from './error-capture';\n\nimport { TNil } from '../../types';\nimport { Config } from '../../types/config';\nimport { IWebAnalyticsFunc } from '../../types/tracking';\nimport { getAppEnvironment, shouldDebugGoogleAnalytics } from '../constants';\nimport parseQuery from '../parseQuery';\nimport prefixUrl from '../prefix-url';\n\n// Modify the `window` object to have an additional attribute `dataLayer`\n// This is required by the gtag.js script to work\n\ninterface WindowWithGATracking extends Window {\n  dataLayer: (string | object)[][] | undefined;\n}\n\ndeclare let window: WindowWithGATracking;\n\n// GA-specific formatting utilities\nlet origin: string | null = null;\nfunction getOrigin(): string {\n  if (origin === null && typeof window !== 'undefined') {\n    origin = window.location.origin + prefixUrl('');\n  }\n  return origin || '';\n}\n\nconst warn = console.warn.bind(console);\n\nconst UNKNOWN_SYM = { sym: '??', word: '??' };\n\nconst NAV_SYMBOLS = [\n  { sym: 'dp', word: 'dependencies', rx: /^\\/dep/i },\n  { sym: 'tr', word: 'trace', rx: /^\\/trace/i },\n  { sym: 'sd', word: 'search', rx: /^\\/search\\?./i },\n  { sym: 'sr', word: 'search', rx: /^\\/search/i },\n  { sym: 'rt', word: 'home', rx: /^\\/$/ },\n];\n\nconst FETCH_SYMBOLS = [\n  { sym: 'svc', word: '', rx: /^\\/api\\/services$/i },\n  { sym: 'op', word: '', rx: /^\\/api\\/.*?operations$/i },\n  { sym: 'sr', word: '', rx: /^\\/api\\/traces\\?/i },\n  { sym: 'tr', word: '', rx: /^\\/api\\/traces\\/./i },\n  { sym: 'dp', word: '', rx: /^\\/api\\/dep/i },\n  { sym: '__IGNORE__', word: '', rx: /\\.js(\\.map)?$/i },\n];\n\nfunction truncate(str: string, len: number, front = false) {\n  if (str.length > len) {\n    if (!front) {\n      return `${str.slice(0, len - 1)}~`;\n    }\n    return `~${str.slice(1 - len)}`;\n  }\n  return str;\n}\n\nfunction getSym(syms: typeof NAV_SYMBOLS | typeof FETCH_SYMBOLS, str: string) {\n  for (let i = 0; i < syms.length; i++) {\n    const { rx } = syms[i];\n    if (rx.test(str)) {\n      return syms[i];\n    }\n  }\n  warn(`Unable to find symbol for: \"${str}\"`);\n  return UNKNOWN_SYM;\n}\n\nfunction compressCssSelector(selector: string) {\n  return selector\n    .replace(/\\.(?=\\s|$)/g, '')\n    .replace(/\\.ub-[^. [:]+/g, '')\n    .replace(/^(\\w+ > )+/, '')\n    .replace(/(^| )\\w+?(?=\\.)/g, '$1')\n    .replace(/ > /g, ' >');\n}\n\n// GA-specific stack formatting that removes Jaeger-specific paths\nfunction formatStackForGA(stack: string | undefined): string {\n  if (!stack) {\n    return '';\n  }\n\n  const lines: string[] = [];\n  const stackLines = stack.split('\\n');\n\n  for (const line of stackLines) {\n    // Clean up the line - remove origin, static/js prefix, and collapse whitespace\n    let cleaned = line\n      .replace(getOrigin(), '')\n      .replace(/\\/static\\/js\\//gi, '')\n      .trim();\n\n    // Collapse whitespace\n    cleaned = cleaned.replace(/\\s\\s+/g, ' ');\n\n    if (cleaned) {\n      lines.push(cleaned);\n    }\n  }\n\n  return lines.join('\\n');\n}\n\nfunction formatBreadcrumbs(crumbs: IBreadcrumb[]): string {\n  if (!Array.isArray(crumbs) || !crumbs.length) {\n    return '';\n  }\n\n  let iLastUi = -1;\n  for (let i = crumbs.length - 1; i >= 0; i--) {\n    if (crumbs[i]?.category?.slice(0, 2) === 'ui') {\n      iLastUi = i;\n      break;\n    }\n  }\n\n  let joiner: string[] = [];\n  let onNewLine = true;\n\n  for (let i = 0; i < crumbs.length; i++) {\n    const c = crumbs[i];\n    const cStart = c.category?.split('.')[0];\n\n    switch (cStart) {\n      case 'fetch': {\n        if (c.data) {\n          const { url, status_code } = c.data;\n          const statusStr = status_code === 200 ? '' : `|${status_code}`;\n          const sym = getSym(FETCH_SYMBOLS, url);\n          if (sym.sym !== '__IGNORE__') {\n            joiner.push(`[${sym.sym}${statusStr}]`);\n            onNewLine = false;\n          }\n        }\n        break;\n      }\n\n      case 'navigation': {\n        if (c.data?.to) {\n          const sym = getSym(NAV_SYMBOLS, c.data.to);\n          joiner.push(`${onNewLine ? '' : '\\n'}\\n${sym.sym}\\n`);\n          onNewLine = true;\n        }\n        break;\n      }\n\n      case 'ui': {\n        if (c.category && i === iLastUi) {\n          const selector = c.message ? compressCssSelector(c.message) : null;\n          joiner.push(`${c.category[3]}{${selector}}`);\n        } else if (c.category) {\n          joiner.push(c.category[3]);\n        }\n        onNewLine = false;\n        break;\n      }\n\n      case 'error': {\n        const msg = c.message ? truncate(formatErrorMessage(c.message), 58) : null;\n        joiner.push(`${onNewLine ? '' : '\\n'}${msg}\\n`);\n        onNewLine = true;\n        break;\n      }\n\n      default:\n      // skip\n    }\n  }\n\n  joiner = joiner.filter(Boolean);\n\n  // Compact repeating UI chars\n  let c = '';\n  let ci = -1;\n  const compacted = joiner.reduce((accum: string[], value: string, j: number): string[] => {\n    if (value === c) {\n      return accum;\n    }\n    if (c) {\n      if (j - ci > 1) {\n        accum.push(String(j - ci));\n      }\n      c = '';\n      ci = -1;\n    }\n    accum.push(value);\n    if (value.length === 1) {\n      c = value;\n      ci = j;\n    }\n    return accum;\n  }, []);\n\n  return compacted\n    .join('')\n    .trim()\n    .replace(/\\n\\n\\n/g, '\\n');\n}\n\nfunction formatErrorForGA(\n  error: IErrorData,\n  context: IErrorContext\n): {\n  message: string;\n  category: string;\n  action: string;\n  label: string;\n  value: number;\n} {\n  const errorType = error.name || 'Error';\n  const errorValue = error.message || 'Unknown error';\n\n  // Format message\n  const message = truncate(formatErrorMessage(`${errorType}: ${errorValue}`), 149);\n\n  // Format stack trace\n  const stack = formatStackForGA(error.stack);\n\n  // Get page info\n  const url = truncate(context.url.replace(getOrigin(), ''), 50);\n  const { word: page } = getSym(NAV_SYMBOLS, url);\n\n  // Calculate duration\n  const value = Math.round(context.sessionDuration / 1000);\n\n  // Build category\n  const category = `jaeger/${page}/error`;\n\n  // Build action (message + tags + url + stack)\n  let action = [message, context.tags.git, url, '', stack].filter(v => v != null).join('\\n');\n  action = truncate(action, 499);\n\n  // Build label (message + page + duration + git + breadcrumbs)\n  const header = [message, page, value, context.tags.git, ''].filter(v => v != null).join('\\n');\n  const crumbs = formatBreadcrumbs(context.breadcrumbs);\n  const label = `${header}\\n${truncate(crumbs, 498 - header.length, true)}`;\n\n  return {\n    message,\n    category,\n    action,\n    label,\n    value,\n  };\n}\n\nconst isTruish = (value?: string | string[]) => {\n  return Boolean(value) && value !== '0' && value !== 'false';\n};\n\nconst GA: IWebAnalyticsFunc = (config: Config, versionShort: string, versionLong: string) => {\n  const appEnv = getAppEnvironment();\n  const isProd = appEnv === 'production';\n  const isDev = appEnv === 'development';\n  const isTest = appEnv === 'test';\n  const isDebugMode =\n    (isDev && isTruish(shouldDebugGoogleAnalytics())) ||\n    isTruish(parseQuery(_get(window, 'location.search'))['ga-debug']);\n  const gaID = _get(config, 'tracking.gaID');\n  const isErrorsEnabled = isDebugMode || Boolean(_get(config, 'tracking.trackErrors'));\n  const cookiesToDimensions = _get(config, 'tracking.cookiesToDimensions');\n  const context = isErrorsEnabled ? true : null;\n  const EVENT_LENGTHS = {\n    action: 499,\n    category: 149,\n    label: 499,\n  };\n\n  const isEnabled = () => {\n    return isTest || isDebugMode || (isProd && Boolean(gaID));\n  };\n\n  // Function to add a new event to the Google Analytics dataLayer\n  const gtag = (...args: (string | object)[]) => {\n    if (window !== undefined)\n      if (window.dataLayer !== undefined && Array.isArray(window.dataLayer)) {\n        window.dataLayer.push(args);\n        if (isDebugMode) {\n          console.log('[GA Tracking]', ...args);\n        }\n      }\n  };\n\n  const trackError = (description: string) => {\n    let msg = description;\n    if (!/^jaeger/i.test(msg)) {\n      msg = `jaeger/${msg}`;\n    }\n    msg = msg.slice(0, 149);\n\n    gtag('event', 'exception', {\n      description: msg,\n      fatal: false,\n    });\n  };\n\n  const trackEvent = (\n    category: string,\n    action: string,\n    labelOrValue?: string | number | TNil,\n    value?: number | TNil\n  ) => {\n    const event: {\n      action: string;\n      category: string;\n      label?: string;\n      value?: number;\n    } = {\n      category: !/^jaeger/i.test(category)\n        ? `jaeger/${category}`.slice(0, EVENT_LENGTHS.category)\n        : category.slice(0, EVENT_LENGTHS.category),\n      action: action.slice(0, EVENT_LENGTHS.action),\n    };\n    if (labelOrValue != null) {\n      if (typeof labelOrValue === 'string') {\n        event.label = labelOrValue.slice(0, EVENT_LENGTHS.action);\n      } else {\n        // value should be an int\n        event.value = Math.round(labelOrValue);\n      }\n    }\n    if (value != null) {\n      event.value = Math.round(value);\n    }\n\n    gtag('event', event.action, {\n      event_category: event.category,\n      ...(event.label && { event_label: event.label }),\n      ...(event.value && { event_value: event.value }),\n    });\n  };\n\n  const trackErrorData = (error: IErrorData, context: IErrorContext) => {\n    const gaData = formatErrorForGA(error, context);\n    trackError(gaData.message);\n    trackEvent(gaData.category, gaData.action, gaData.label, gaData.value);\n  };\n\n  const init = () => {\n    if (!isEnabled()) {\n      return;\n    }\n\n    const gtagUrl = 'https://www.googletagmanager.com/gtag/js';\n    const GA_MEASUREMENT_ID = gaID || 'debug-mode';\n\n    // Load the script asynchronously\n    const script = document.createElement('script');\n    script.async = true;\n    script.src = `${gtagUrl}?id=${GA_MEASUREMENT_ID}`;\n    document.body.appendChild(script);\n\n    // Initialize the dataLayer and send initial configuration data\n    window.dataLayer = window.dataLayer || [];\n    gtag('js', new Date());\n    gtag('config', GA_MEASUREMENT_ID);\n    gtag('set', {\n      appId: 'github.com/jaegertracing/jaeger-ui',\n      appName: 'Jaeger UI',\n      appVersion: versionLong,\n    });\n\n    if (cookiesToDimensions !== undefined) {\n      (cookiesToDimensions as unknown as Array<{ cookie: string; dimension: string }>).forEach(\n        ({ cookie, dimension }: { cookie: string; dimension: string }) => {\n          const match = ` ${document.cookie}`.match(new RegExp(`[; ]${cookie}=([^\\\\s;]*)`));\n          if (match) {\n            gtag('set', {\n              [dimension]: match[1],\n            });\n          } else console.warn(`${cookie} not present in cookies, could not set dimension: ${dimension}`);\n        }\n      );\n    }\n    if (isErrorsEnabled) {\n      ErrorCaptureInit({\n        onError: trackErrorData,\n        ...(versionShort &&\n          versionShort !== 'unknown' && {\n            tags: {\n              git: versionShort,\n            },\n          }),\n      });\n\n      window.onunhandledrejection = function trackRejectedPromise(evt) {\n        captureException(evt.reason);\n      };\n    }\n  };\n\n  const trackPageView = (pathname: string, search: string | TNil) => {\n    const pagePath = search ? `${pathname}${search}` : pathname;\n    trackNavigation(pagePath);\n    gtag('event', 'page_view', {\n      page_path: pagePath,\n    });\n  };\n\n  return {\n    isEnabled,\n    init,\n    context,\n    trackPageView,\n    trackError,\n    trackEvent,\n  };\n};\n\nexport default GA;\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/tracking/getTrackFilter.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/tracking/getTrackFilter.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/tracking/index.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/tracking/index.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_' is defined but never used.","line":27,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":27,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2017 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { TNil } from '../../types';\nimport { IWebAnalyticsFunc } from '../../types/tracking';\nimport GA from './ga';\nimport NoopWebAnalytics from './noopWebAnalytics';\nimport getConfig from '../config/get-config';\nimport { getVersionInfo } from '../constants';\n\nconst TrackingImplementation = () => {\n  const config = getConfig();\n  let versionShort;\n  let versionLong;\n\n  const versionInfo = getVersionInfo();\n\n  if (versionInfo) {\n    try {\n      const data = JSON.parse(versionInfo);\n      const joiner = [data.objName];\n      if (data.changed.hasChanged) {\n        joiner.push(data.changed.pretty);\n      }\n      versionShort = joiner.join(' ');\n      versionLong = data.pretty;\n    } catch (_) {\n      versionShort = versionInfo;\n      versionLong = versionInfo;\n    }\n    versionLong = versionLong.length > 99 ? `${versionLong.slice(0, 96)}...` : versionLong;\n  } else {\n    versionShort = 'unknown';\n    versionLong = 'unknown';\n  }\n\n  let webAnalyticsFunc = NoopWebAnalytics;\n\n  if (config.tracking && config.tracking.customWebAnalytics) {\n    webAnalyticsFunc = config.tracking.customWebAnalytics as IWebAnalyticsFunc;\n  } else if (config.tracking && config.tracking.gaID) {\n    webAnalyticsFunc = GA;\n  }\n\n  const webAnalytics = webAnalyticsFunc(config, versionShort, versionLong);\n  webAnalytics.init();\n\n  return webAnalytics;\n};\n\nconst tracker = TrackingImplementation();\n\nexport function trackPageView(pathname: string, search: string | TNil) {\n  return tracker.trackPageView(pathname, search);\n}\n\nexport function trackError(description: string) {\n  return tracker.trackError(description);\n}\n\nexport function trackEvent(\n  category: string,\n  action: string,\n  labelOrValue?: string | number | TNil,\n  value?: number | TNil\n) {\n  return tracker.trackEvent(category, action, labelOrValue, value);\n}\n\nexport const context = tracker.context;\nexport const isWaEnabled = tracker.isEnabled();\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/tracking/noopWebAnalytics.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/ts/pluckTruthy.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":6,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[257,260],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[257,260],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/update-ui-find.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/update-ui-find.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_oldUiFind' is assigned a value but never used.","line":23,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":23,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2019 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport queryString from 'query-string';\nimport { NavigateFunction } from 'react-router-dom-v5-compat';\nimport { History as RouterHistory, Location } from 'history';\n\nimport { TNil } from '../types';\n\nexport default function updateUiFind({\n  history,\n  navigate,\n  location,\n  trackFindFunction,\n  uiFind,\n}: {\n  history?: RouterHistory;\n  navigate?: NavigateFunction;\n  location: Location;\n  trackFindFunction?: (uiFind: string | TNil) => void;\n  uiFind?: string | TNil;\n}) {\n  const { uiFind: _oldUiFind, ...queryParams } = queryString.parse(location.search);\n  if (trackFindFunction) trackFindFunction(uiFind);\n  if (uiFind) (queryParams as Record<string, string>).uiFind = uiFind;\n  if (navigate) {\n    navigate(\n      { pathname: location.pathname, search: `?${queryString.stringify(queryParams)}` },\n      { replace: true }\n    );\n  } else if (history) {\n    history.replace({\n      ...location,\n      search: `?${queryString.stringify(queryParams)}`,\n    });\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/version/get-version.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/version/get-version.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/withRouteProps.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/utils/withRouteProps.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/jaeger-ui/src/vite-env.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/.eslintrc.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/babel.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/src/Digraph/HtmlLayer.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/src/Digraph/HtmlLayer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/src/Digraph/HtmlLayersGroup.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/src/Digraph/HtmlLayersGroup.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/src/Digraph/MeasurableNode.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/src/Digraph/MeasurableNodes.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/src/Digraph/MeasurableNodesLayer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/src/Digraph/Node.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":19,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[658,661],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[658,661],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2019 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport * as React from 'react';\n\nimport { TRendererUtils, TLayerType, ELayerType, TRenderNodeFn, TSetProps, TAnyProps } from './types';\nimport { assignMergeCss, getProps } from './utils';\nimport { TLayoutVertex } from '../types';\n\nexport type TProps<T = {}> = {\n  getClassName: (name: string) => string;\n  layerType: TLayerType;\n  layoutVertex: TLayoutVertex<T>;\n  renderNode: TRenderNodeFn<T>;\n  renderUtils: TRendererUtils;\n  setOnNode?: TSetProps<(layoutVertex: TLayoutVertex<T>, utils: TRendererUtils) => TAnyProps | null>;\n};\n\nfunction getHtmlStyle(lv: TLayoutVertex<any>) {\n  const { height, left, top, width } = lv;\n  return {\n    height,\n    width,\n    position: 'absolute',\n    transform: left == null || top == null ? undefined : `translate(${left.toFixed()}px,${top.toFixed()}px)`,\n  };\n}\n\nexport default class Node<T = {}> extends React.PureComponent<TProps<T>> {\n  render() {\n    const { getClassName, layerType, renderNode, renderUtils, setOnNode, layoutVertex } = this.props;\n    const nodeContent = renderNode(layoutVertex, renderUtils);\n    if (!nodeContent) {\n      return null;\n    }\n    const { left, top } = layoutVertex;\n    const props = assignMergeCss(\n      {\n        className: getClassName('Node'),\n        style: layerType === ELayerType.Html ? getHtmlStyle(layoutVertex) : null,\n        transform: layerType === ELayerType.Svg ? `translate(${left.toFixed()},${top.toFixed()})` : null,\n      },\n      getProps(setOnNode, layoutVertex, renderUtils)\n    );\n    const Wrapper = layerType === ELayerType.Html ? 'div' : 'g';\n    return <Wrapper {...props}>{nodeContent}</Wrapper>;\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/src/Digraph/Nodes.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/src/Digraph/NodesLayer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/src/Digraph/SvgDefEntry.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":29,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[771,774],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[771,774],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":29,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[776,779],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[776,779],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2019 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport * as React from 'react';\n\nimport { TFromGraphStateFn, TAnyProps, TSetProps, TExposedGraphState } from './types';\nimport { assignMergeCss, getProps, getValueScaler } from './utils';\n\ntype TProps<T = {}, U = {}> = {\n  getClassName: (name: string) => string;\n  graphState: TExposedGraphState<T, U>;\n  localId: string;\n  renderEntry?: (\n    graphState: TExposedGraphState<T, U>,\n    entryProps: TAnyProps | null,\n    id: string\n  ) => React.ReactElement;\n  setOnEntry?: TSetProps<TFromGraphStateFn<T, U>>;\n};\n\nconst getMarkerScale = getValueScaler({\n  factorMax: 1,\n  factorMin: 0.1,\n  valueMax: 2,\n  valueMin: 6,\n});\n\nfunction renderDefaultMarker(\n  graphState: TExposedGraphState<any, any>,\n  entryProps: TAnyProps | null,\n  id: string\n) {\n  const scale = getMarkerScale(graphState.zoomTransform.k);\n  return (\n    <marker\n      id={id}\n      markerHeight={scale * 8}\n      markerUnits=\"userSpaceOnUse\"\n      markerWidth={scale * 8}\n      orient=\"auto\"\n      refX={scale * 8}\n      refY={scale * 3}\n      {...entryProps}\n    >\n      <path d={`M0,0 L0,${scale * 6} L${scale * 9},${scale * 3} z`} />\n    </marker>\n  );\n}\n\nexport default class SvgDefEntry<T = {}, U = {}> extends React.PureComponent<TProps<T, U>> {\n  render() {\n    const { getClassName, localId, graphState, renderEntry = renderDefaultMarker, setOnEntry } = this.props;\n    const id = graphState.renderUtils.getGlobalId(localId);\n    const entryProps = assignMergeCss(\n      {\n        className: getClassName('DefEntry'),\n      },\n      getProps(setOnEntry, graphState)\n    );\n    return renderEntry(graphState, entryProps, id);\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/src/Digraph/SvgEdge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/src/Digraph/SvgEdges.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/src/Digraph/SvgEdgesLayer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/src/Digraph/SvgLayer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/src/Digraph/SvgLayersGroup.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/src/Digraph/index.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":68,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":68,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1990,1993],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1990,1993],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":68,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":68,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1995,1998],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1995,1998],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_' is assigned a value but never used.","line":155,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":155,"endColumn":28}],"suppressedMessages":[{"ruleId":"react/sort-comp","severity":2,"message":"propsFactories should be placed after componentDidMount","line":68,"column":3,"nodeType":"PropertyDefinition","messageId":"unsortedProps","endLine":74,"endColumn":5,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2019 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport * as React from 'react';\nimport memoizeOne from 'memoize-one';\n\nimport HtmlLayersGroup from './HtmlLayersGroup';\nimport MeasurableNodesLayer from './MeasurableNodesLayer';\nimport NodesLayer from './NodesLayer';\nimport { classNameIsSmall, scaleProperty } from './props-factories';\nimport SvgEdgesLayer from './SvgEdgesLayer';\nimport SvgLayersGroup from './SvgLayersGroup';\nimport {\n  ELayoutPhase,\n  TExposedGraphState,\n  TFromGraphStateFn,\n  TLayer,\n  TRendererUtils,\n  ELayerType,\n  TSetProps,\n} from './types';\nimport { assignMergeCss, getProps } from './utils';\nimport LayoutManager from '../LayoutManager';\nimport { TCancelled, TEdge, TLayoutDone, TSizeVertex, TVertex } from '../types';\nimport TNonEmptyArray from '../types/TNonEmptyArray';\nimport MiniMap from '../zoom/MiniMap';\nimport ZoomManager, { zoomIdentity, ZoomTransform } from '../zoom/ZoomManager';\n\ntype TDigraphState<T = {}, U = {}> = Omit<TExposedGraphState<T, U>, 'renderUtils'> & {\n  sizeVertices: TSizeVertex<T>[] | null;\n};\n\ntype TDigraphProps<T = unknown, U = unknown> = {\n  className?: string;\n  classNamePrefix?: string;\n  edges: TEdge<U>[];\n  layers: TNonEmptyArray<TLayer<T, U>>;\n  layoutManager: LayoutManager;\n  measurableNodesKey: string;\n  minimap?: boolean;\n  minimapClassName?: string;\n  setOnGraph?: TSetProps<TFromGraphStateFn<T, U>>;\n  style?: React.CSSProperties;\n  vertices: TVertex<T>[];\n  zoom?: boolean;\n};\n\nconst WRAPPER_STYLE_ZOOM: React.CSSProperties = {\n  height: '100%',\n  overflow: 'hidden',\n  position: 'relative',\n  width: '100%',\n};\n\nconst WRAPPER_STYLE: React.CSSProperties = {\n  position: 'relative',\n};\n\nlet idCounter = 0;\n\nexport default class Digraph<T = unknown, U = unknown> extends React.PureComponent<\n  TDigraphProps<T, U>,\n  TDigraphState<T, U>\n> {\n  renderUtils: TRendererUtils;\n\n  // eslint-disable-next-line react/sort-comp\n  static propsFactories: Record<string, TFromGraphStateFn<any, any>> = {\n    classNameIsSmall,\n    scaleOpacity: scaleProperty.opacity,\n    scaleStrokeOpacity: scaleProperty.strokeOpacity,\n    scaleStrokeOpacityStrong: scaleProperty.strokeOpacityStrong,\n    scaleStrokeOpacityStrongest: scaleProperty.strokeOpacityStrongest,\n  };\n\n  static scaleProperty = scaleProperty;\n\n  static defaultProps = {\n    className: '',\n    classNamePrefix: 'plexus',\n    minimap: false,\n    minimapClassName: '',\n    zoom: false,\n  };\n\n  state: TDigraphState<T, U> = {\n    edges: [],\n    layoutEdges: null,\n    layoutGraph: null,\n    layoutPhase: ELayoutPhase.NoData,\n    layoutVertices: null,\n    sizeVertices: null,\n    vertices: [],\n    zoomTransform: zoomIdentity,\n  };\n\n  baseId = `plexus--Digraph--${idCounter++}`;\n\n  makeClassNameFactory = memoizeOne((classNamePrefix: string) => {\n    return (name: string) => `${classNamePrefix} ${classNamePrefix}-Digraph--${name}`;\n  });\n\n  rootRef = React.createRef<HTMLDivElement>();\n\n  zoomManager: ZoomManager | null = null;\n\n  constructor(props: TDigraphProps<T, U>) {\n    super(props);\n    const { edges, vertices, zoom: zoomEnabled } = props;\n    if (Array.isArray(edges) && edges.length && Array.isArray(vertices) && vertices.length) {\n      this.state.layoutPhase = ELayoutPhase.CalcSizes;\n      this.state.edges = edges;\n      this.state.vertices = vertices;\n    }\n    if (zoomEnabled) {\n      this.zoomManager = new ZoomManager(this.onZoomUpdated);\n    }\n    this.renderUtils = {\n      getGlobalId: this.getGlobalId,\n      getZoomTransform: this.getZoomTransform,\n    };\n  }\n\n  componentDidMount() {\n    const { current } = this.rootRef;\n    if (current && this.zoomManager) {\n      this.zoomManager.setElement(current);\n    }\n  }\n\n  getGlobalId = (name: string) => `${this.baseId}--${name}`;\n\n  getZoomTransform = () => this.state.zoomTransform;\n\n  private setSizeVertices = (senderKey: string, sizeVertices: TSizeVertex<T>[]) => {\n    const { edges, layoutManager, measurableNodesKey: expectedKey } = this.props;\n    if (senderKey !== expectedKey) {\n      const values = `expected ${JSON.stringify(expectedKey)}, recieved ${JSON.stringify(senderKey)}`;\n      throw new Error(`Key mismatch for measuring nodes; ${values}`);\n    }\n    this.setState({ sizeVertices });\n    const { layout } = layoutManager.getLayout(edges, sizeVertices);\n    layout.then(this.onLayoutDone);\n    this.setState({ sizeVertices, layoutPhase: ELayoutPhase.CalcPositions });\n    // We can add support for drawing nodes in the correct position before we have edges\n    // via the following (instead of the above)\n    // const { positions, layout } = layoutManager.getLayout(edges, sizeVertices);\n    // positions.then(this._onPositionsDone);\n  };\n\n  private renderLayers() {\n    const { classNamePrefix, layers: topLayers } = this.props;\n    const getClassName = this.makeClassNameFactory(classNamePrefix || '');\n\n    const { sizeVertices: _, ...partialGraphState } = this.state;\n    const graphState = {\n      ...partialGraphState,\n      renderUtils: this.renderUtils,\n    };\n    const { layoutPhase } = graphState;\n    return topLayers.map(layer => {\n      const { layerType, key, setOnContainer } = layer;\n      if (layer.layers) {\n        if (layer.layerType === ELayerType.Html) {\n          return (\n            <HtmlLayersGroup<T, U>\n              key={key}\n              graphState={graphState}\n              layers={layer.layers}\n              getClassName={getClassName}\n              setOnContainer={setOnContainer}\n              setSizeVertices={this.setSizeVertices}\n            />\n          );\n        }\n        // svg group layer, the if is for TypeScript\n        if (layer.layerType === ELayerType.Svg) {\n          return (\n            <SvgLayersGroup<T, U>\n              key={key}\n              getClassName={getClassName}\n              defs={layer.defs}\n              graphState={graphState}\n              layers={layer.layers}\n              setOnContainer={setOnContainer}\n            />\n          );\n        }\n      }\n      if (layer.edges) {\n        // edges standalone layer\n        const { defs, markerEndId, markerStartId, setOnEdge } = layer;\n        return layoutPhase === ELayoutPhase.Done ? (\n          <SvgEdgesLayer\n            key={key}\n            standalone\n            getClassName={getClassName}\n            defs={defs}\n            graphState={graphState}\n            markerEndId={markerEndId}\n            markerStartId={markerStartId}\n            setOnContainer={setOnContainer}\n            setOnEdge={setOnEdge}\n          />\n        ) : null;\n      }\n      if (layer.measurable) {\n        // standalone measurable Nodes Layer\n        const { measureNode, renderNode, setOnNode } = layer;\n        return (\n          <MeasurableNodesLayer<T, U>\n            key={key}\n            standalone\n            getClassName={getClassName}\n            graphState={graphState}\n            layerType={layerType}\n            measureNode={measureNode}\n            renderNode={renderNode}\n            senderKey={key}\n            setOnContainer={setOnContainer}\n            setOnNode={setOnNode}\n            setSizeVertices={this.setSizeVertices}\n          />\n        );\n      }\n      const { renderNode } = layer;\n      if (renderNode !== undefined) {\n        return (\n          <NodesLayer<T, U>\n            key={key}\n            standalone\n            getClassName={getClassName}\n            graphState={graphState}\n            layerType={layer.layerType}\n            renderNode={renderNode}\n            setOnContainer={setOnContainer}\n            setOnNode={layer.setOnNode}\n          />\n        );\n      }\n      throw new Error('Unrecognized layer');\n    });\n  }\n\n  private onZoomUpdated = (zoomTransform: ZoomTransform) => {\n    this.setState({ zoomTransform });\n  };\n\n  private onLayoutDone = (result: TCancelled | TLayoutDone<T, U>) => {\n    if (result.isCancelled) {\n      return;\n    }\n    const { edges: layoutEdges, graph: layoutGraph, vertices: layoutVertices } = result;\n    this.setState({ layoutEdges, layoutGraph, layoutVertices, layoutPhase: ELayoutPhase.Done });\n    if (this.zoomManager) {\n      this.zoomManager.setContentSize(layoutGraph);\n    }\n  };\n\n  render() {\n    const {\n      className,\n      classNamePrefix,\n      minimap: minimapEnabled,\n      minimapClassName,\n      setOnGraph,\n      style,\n    } = this.props;\n    const builtinStyle = this.zoomManager ? WRAPPER_STYLE_ZOOM : WRAPPER_STYLE;\n    const rootProps = assignMergeCss(\n      {\n        style: builtinStyle,\n        className: `${classNamePrefix} ${classNamePrefix}-Digraph`,\n      },\n      { className, style },\n      getProps(setOnGraph, { ...this.state, renderUtils: this.renderUtils })\n    );\n    return (\n      <div {...rootProps}>\n        <div style={builtinStyle} ref={this.rootRef}>\n          {this.renderLayers()}\n        </div>\n        {minimapEnabled && this.zoomManager && (\n          <MiniMap\n            className={minimapClassName}\n            classNamePrefix={classNamePrefix}\n            {...this.zoomManager.getProps()}\n          />\n        )}\n      </div>\n    );\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/src/Digraph/props-factories.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":40,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1251,1254],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1251,1254],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":40,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1256,1259],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1256,1259],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-shadow","severity":1,"message":"'classNameIsSmall' is already declared in the upper scope on line 7 column 14.","line":12,"column":12,"nodeType":"Identifier","messageId":"noShadow","endLine":12,"endColumn":28,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-shadow","severity":1,"message":"'scaleProperty' is already declared in the upper scope on line 23 column 14.","line":30,"column":12,"nodeType":"Identifier","messageId":"noShadow","endLine":30,"endColumn":25,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2019 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { TExposedGraphState } from './types';\nimport { getValueScaler } from './utils';\n\nexport const classNameIsSmall = (() => {\n  // define via an IIFE to sequester consts\n  const SCALE_THRESHOLD_SMALL = 0.29;\n\n  // eslint-disable-next-line @typescript-eslint/no-shadow\n  function classNameIsSmall<T = {}, U = {}>(graphState: TExposedGraphState<T, U>) {\n    const { k = 1 } = graphState.zoomTransform || {};\n    if (k <= SCALE_THRESHOLD_SMALL) {\n      return { className: 'is-small' };\n    }\n    return null;\n  }\n\n  return classNameIsSmall;\n})();\n\nexport const scaleProperty = (() => {\n  // define via an IIFE to sequester consts\n  const MAX = 1;\n  const MIN = 0.3;\n  const EXP_ADJUSTER = 0.5;\n\n  // eslint-disable-next-line @typescript-eslint/no-shadow\n  function scaleProperty(\n    property: keyof React.CSSProperties,\n    valueMin: number = MIN,\n    valueMax: number = MAX,\n    expAdjuster: number = EXP_ADJUSTER\n  ) {\n    const defaultStyle = { style: { [property]: valueMax } };\n    const fnName = `scale_${property}`;\n    const valueScaler = getValueScaler({ valueMax, valueMin, expAdjuster });\n    const o = {\n      [fnName](graphState: TExposedGraphState<any, any>) {\n        const { zoomTransform } = graphState;\n        if (!zoomTransform) {\n          return defaultStyle;\n        }\n        const value = valueScaler(zoomTransform.k);\n        return { style: { [property]: value } };\n      },\n    };\n    return o[fnName];\n  }\n\n  scaleProperty.opacity = scaleProperty('opacity');\n  scaleProperty.strokeOpacity = scaleProperty('strokeOpacity');\n  scaleProperty.strokeOpacityStrong = scaleProperty('strokeOpacity', MIN, MAX, 0.75);\n  scaleProperty.strokeOpacityStrongest = scaleProperty('strokeOpacity', MIN, MAX, 1);\n  return scaleProperty;\n})();\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/src/Digraph/types.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":46,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1249,1252],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1249,1252],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":57,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1593,1596],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1593,1596],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":57,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1602,1605],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1602,1605],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2019 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport * as React from 'react';\n\nimport { TEdge, TLayoutEdge, TLayoutGraph, TLayoutVertex, TVertex } from '../types';\nimport { TOneOfFour, TOneOfTwo } from '../types/TOneOf';\nimport { ZoomTransform } from '../zoom/ZoomManager';\nimport TNonEmptyArray from '../types/TNonEmptyArray';\n\nexport enum ELayoutPhase {\n  NoData = 'NoData',\n  CalcSizes = 'CalcSizes',\n  CalcPositions = 'CalcPositions',\n  CalcEdges = 'CalcEdges',\n  Done = 'Done',\n}\n\nexport type TLayerType = 'html' | 'svg';\nexport enum ELayerType {\n  Html = 'html',\n  Svg = 'svg',\n}\n\nexport type TRendererUtils = {\n  getGlobalId: (name: string) => string;\n  getZoomTransform: () => ZoomTransform;\n};\n\nexport type TExposedGraphState<T = Record<string, unknown>, U = Record<string, unknown>> = {\n  edges: TEdge<U>[];\n  layoutEdges: TLayoutEdge<U>[] | null;\n  layoutGraph: TLayoutGraph | null;\n  layoutPhase: ELayoutPhase;\n  layoutVertices: TLayoutVertex<T>[] | null;\n  renderUtils: TRendererUtils;\n  vertices: TVertex<T>[];\n  zoomTransform: ZoomTransform;\n};\n\nexport type TAnyProps = Record<string, unknown> & {\n  className?: string;\n  style?: React.CSSProperties;\n};\n\nexport type TPropFactoryFn = (...args: any[]) => TAnyProps | null;\n\nexport type TSetProps<TFactoryFn extends TPropFactoryFn> =\n  | TAnyProps\n  | TFactoryFn\n  | TNonEmptyArray<TAnyProps | TFactoryFn>;\n\nexport type TFromGraphStateFn<T = Record<string, unknown>, U = Record<string, unknown>> = (\n  input: TExposedGraphState<T, U>\n) => TAnyProps | null;\n\nexport type TSetOnContainer<T = any, U = any> = {\n  setOnContainer?: TSetProps<TFromGraphStateFn<T, U>>;\n};\n\ntype TKeyed = { key: string };\n\nexport type TDefEntry<T = Record<string, unknown>, U = Record<string, unknown>> = {\n  renderEntry?: (\n    graphState: TExposedGraphState<T, U>,\n    entryProps: TAnyProps | null,\n    id: string\n  ) => React.ReactElement;\n  localId: string;\n  setOnEntry?: TSetProps<TFromGraphStateFn<T, U>>;\n};\n\nexport type TRenderNodeFn<T = Record<string, unknown>> = (\n  vertex: TLayoutVertex<T>,\n  utils: TRendererUtils\n) => React.ReactNode;\n\nexport type TRenderMeasurableNodeFn<T = Record<string, unknown>> = (\n  vertex: TVertex<T>,\n  utils: TRendererUtils,\n  layoutVertex: TLayoutVertex<T> | null\n) => React.ReactNode;\n\nexport type TMeasureNodeUtils = {\n  layerType: 'html' | 'svg';\n  getWrapperSize: () => { height: number; width: number };\n  getWrapper: () => TOneOfTwo<{ htmlWrapper: HTMLDivElement | null }, { svgWrapper: SVGGElement | null }>;\n};\n\nexport type TMeasurableNodeRenderer<T = Record<string, unknown>> = {\n  measurable: true;\n  measureNode?: (vertex: TVertex<T>, utils: TMeasureNodeUtils) => { height: number; width: number };\n  renderNode: TRenderMeasurableNodeFn<T>;\n  setOnNode?: TSetProps<\n    (vertex: TVertex<T>, utils: TRendererUtils, layoutVertex: TLayoutVertex<T> | null) => TAnyProps | null\n  >;\n};\n\nexport type TNodeRenderer<T = Record<string, unknown>> = {\n  renderNode: TRenderNodeFn<T> | null;\n  setOnNode?: TSetProps<(layoutVertex: TLayoutVertex<T>, utils: TRendererUtils) => TAnyProps | null>;\n};\n\ntype TNodesLayer<T = Record<string, unknown>, U = Record<string, unknown>> = TKeyed &\n  TOneOfTwo<TNodeRenderer<T>, TMeasurableNodeRenderer<T>> &\n  TSetOnContainer<T, U>;\n\ntype TStandaloneNodesLayer<T = Record<string, unknown>, U = Record<string, unknown>> = TNodesLayer<T, U> &\n  (\n    | { layerType: Extract<TLayerType, 'html'> }\n    | {\n        layerType: Extract<TLayerType, 'svg'>;\n        defs?: TNonEmptyArray<TDefEntry<T, U>>;\n      }\n  );\n\nexport type TEdgesLayer<T = Record<string, unknown>, U = Record<string, unknown>> = TKeyed &\n  TSetOnContainer<T, U> & {\n    edges: true;\n    markerEndId?: string;\n    markerStartId?: string;\n    setOnEdge?: TSetProps<(edge: TLayoutEdge<U>, utils: TRendererUtils) => TAnyProps | null>;\n  };\n\nexport type TStandaloneEdgesLayer<T = Record<string, unknown>, U = Record<string, unknown>> = TEdgesLayer<\n  T,\n  U\n> & {\n  defs?: TNonEmptyArray<TDefEntry<T, U>>;\n  layerType: Extract<TLayerType, 'svg'>;\n};\n\nexport type THtmlLayersGroup<T = Record<string, unknown>, U = Record<string, unknown>> = TKeyed &\n  TSetOnContainer<T, U> & {\n    layerType: Extract<TLayerType, 'html'>;\n    layers: TNonEmptyArray<TNodesLayer<T, U>>;\n  };\n\nexport type TSvgLayersGroup<T = Record<string, unknown>, U = Record<string, unknown>> = TKeyed &\n  TSetOnContainer<T, U> & {\n    layerType: Extract<TLayerType, 'svg'>;\n    defs?: TNonEmptyArray<TDefEntry<T, U>>;\n    layers: TNonEmptyArray<TOneOfTwo<TNodesLayer<T, U>, TEdgesLayer<T, U>>>;\n  };\n\nexport type TLayer<T = Record<string, unknown>, U = Record<string, unknown>> = TOneOfFour<\n  THtmlLayersGroup<T, U>,\n  TSvgLayersGroup<T, U>,\n  TStandaloneNodesLayer<T, U>,\n  TStandaloneEdgesLayer<T, U>\n>;\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/src/Digraph/utils.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":6,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[174,177],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[174,177],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":6,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[198,201],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[198,201],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":20,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[668,671],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[668,671],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":71,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":71,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2104,2107],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2104,2107],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":71,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":71,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2123,2126],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2123,2126],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":76,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":76,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2263,2266],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2263,2266],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-shadow","severity":1,"message":"'getValueScaler' is already declared in the upper scope on line 36 column 14.","line":54,"column":12,"nodeType":"Identifier","messageId":"noShadow","endLine":54,"endColumn":26,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2019 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { TPropFactoryFn, TSetProps } from './types';\n\nfunction reduce(a: Record<string, any>, b: Record<string, any>) {\n  let { className, style, ...rest } = a;\n  const { className: bClassName, style: bStyle, ...bRest } = b;\n  // merge className props\n  if (bClassName) {\n    className = className ? `${className} ${bClassName}` : bClassName;\n  }\n  // merge style props\n  if (bStyle && typeof bStyle === 'object') {\n    style = style ? { ...style, ...bStyle } : bStyle;\n  }\n  return { className, style, ...rest, ...bRest };\n}\n\nexport function assignMergeCss(...objs: Record<string, any>[]) {\n  return objs.reduce(reduce);\n}\n\nexport function getProps<TFactoryFn extends TPropFactoryFn>(\n  propSpec: TSetProps<TFactoryFn> | void,\n  ...args: Parameters<TFactoryFn>\n) {\n  if (!propSpec) {\n    return {};\n  }\n  const specs = Array.isArray(propSpec) ? propSpec : [propSpec];\n  const propsList = specs.map(spec => (typeof spec === 'function' ? spec(...args) || {} : spec));\n  return assignMergeCss(...propsList);\n}\n\nexport const getValueScaler = (() => {\n  // define via an IIFE to sequester non-public stuff\n  type TScalerParams = {\n    expAdjuster: number;\n    factorMax: number;\n    factorMin: number;\n    valueMax: number;\n    valueMin: number;\n  };\n  const DEFAULT_PARAMS: TScalerParams = {\n    expAdjuster: 0.5,\n    factorMax: 1,\n    factorMin: 0,\n    valueMax: 1,\n    valueMin: 0.3,\n  };\n\n  // eslint-disable-next-line @typescript-eslint/no-shadow\n  function getValueScaler(config: Partial<TScalerParams> = {}) {\n    const { expAdjuster, factorMax, factorMin, valueMax, valueMin } = { ...DEFAULT_PARAMS, ...config };\n    return function scaleValue(factor: number) {\n      if (factor >= factorMax) {\n        return valueMax;\n      }\n      if (factor <= factorMin) {\n        return valueMin;\n      }\n      return (\n        valueMin + ((factor - factorMin) / (factorMax - factorMin)) ** expAdjuster * (valueMax - valueMin)\n      );\n    };\n  }\n  return getValueScaler;\n})();\n\nexport function isSamePropSetter(a: TSetProps<any>, b: TSetProps<any>) {\n  if (Array.isArray(a)) {\n    if (!Array.isArray(b) || a.length !== b.length) {\n      return false;\n    }\n    return !a.some((item: any, i: number) => item !== b[i]);\n  }\n  return a === b;\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/src/LayoutManager/Coordinator.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":28,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[626,629],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[626,629],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":29,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[693,696],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[693,696],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":30,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[767,770],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[767,770],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":31,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[801,804],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[801,804],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":68,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":68,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1685,1688],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1685,1688],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":68,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":68,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1690,1693],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1690,1693],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":70,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":70,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1747,1750],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1747,1750],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":70,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":70,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1752,1755],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1752,1755],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":134,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":134,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3869,3872],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3869,3872],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":214,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":214,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6334,6337],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6334,6337],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2017 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport * as convCoord from './dot/conv-coord';\nimport convInputs from './convInputs';\n\nimport LayoutWorker from './layout.worker.bundled';\n\nimport {\n  ECoordinatorPhase,\n  EWorkerErrorType,\n  EWorkerPhase,\n  TLayoutOptions,\n  TUpdate,\n  TWorkerErrorMessage,\n  TWorkerInputMessage,\n  TWorkerOutputMessage,\n} from './types';\nimport { TEdge, TLayoutVertex, TSizeVertex, TLayoutEdge } from '../types';\n\ntype TCurrentLayout = {\n  cleaned: {\n    edges: TEdge<{}>[];\n    vertices: TSizeVertex<{}>[];\n  };\n  id: number;\n  input: {\n    edges: TEdge<any>[];\n    unmapEdges: (output: TLayoutEdge<{}>[]) => TLayoutEdge<any>[];\n    unmapVertices: (output: TLayoutVertex<{}>[]) => TLayoutVertex<any>[];\n    vertices: TSizeVertex<any>[];\n  };\n  options: TLayoutOptions | null;\n  status: {\n    workerId?: number | null;\n    phase: ECoordinatorPhase;\n  };\n};\n\nfunction killWorker(worker: LayoutWorker) {\n  const w = worker;\n  // to make flow happy\n  const noop = () => {};\n  w.onmessage = noop;\n  // $FlowIgnore - https://github.com/facebook/flow/issues/6191\n  w.onmessageerror = noop;\n  w.onerror = noop;\n  w.terminate();\n}\n\nfunction findAndRemoveWorker(lists: LayoutWorker[][], worker: LayoutWorker) {\n  for (let i = 0; i < lists.length; i++) {\n    const list = lists[i];\n    const wi = list.indexOf(worker);\n    if (wi >= 0) {\n      list.splice(wi, 1);\n      return { ok: true, list };\n    }\n  }\n  return { ok: false };\n}\n\nexport default class Coordinator {\n  currentLayout: TCurrentLayout | null;\n  nextWorkerId: number;\n  idleWorkers: LayoutWorker[];\n  busyWorkers: LayoutWorker[];\n  callback: (update: TUpdate<any, any>) => void;\n\n  constructor(callback: (update: TUpdate<any, any>) => void) {\n    this.callback = callback;\n    this.currentLayout = null;\n    this.nextWorkerId = 0;\n    this.idleWorkers = [];\n    this.busyWorkers = [];\n  }\n\n  getLayout<T, U>(\n    id: number,\n    inEdges: TEdge<U>[],\n    inVertices: TSizeVertex<T>[],\n    options: TLayoutOptions | void\n  ) {\n    this.busyWorkers.forEach(killWorker);\n    this.busyWorkers.length = 0;\n    const { edges, unmapEdges, unmapVertices, vertices: _vertices } = convInputs(inEdges, inVertices);\n    const vertices = _vertices.map(v => convCoord.vertexToDot(v, options));\n    this.currentLayout = {\n      id,\n      cleaned: { edges, vertices },\n      options: options || null,\n      input: { edges: inEdges, unmapEdges, unmapVertices, vertices: inVertices },\n      status: { phase: ECoordinatorPhase.NotStarted },\n    };\n    const isDotOnly = Boolean(options && options.useDotEdges);\n    const phase = isDotOnly ? EWorkerPhase.DotOnly : EWorkerPhase.Positions;\n    this._postWork(phase, edges, vertices);\n  }\n\n  stopAndRelease() {\n    this.idleWorkers.forEach(killWorker);\n    this.idleWorkers.length = 0;\n    this.busyWorkers.forEach(killWorker);\n    this.busyWorkers.length = 0;\n    this.currentLayout = null;\n  }\n\n  _initWorker() {\n    const worker = new LayoutWorker();\n    worker.id = this.nextWorkerId;\n    this.nextWorkerId++;\n    worker.onerror = this._handleVizWorkerError;\n    worker.onmessageerror = this._handleVizWorkerMessageError;\n    worker.onmessage = this._handleVizWorkerMessage;\n    return worker;\n  }\n\n  _makeWorkerIdle(worker: LayoutWorker) {\n    const { ok } = findAndRemoveWorker([this.busyWorkers, this.idleWorkers], worker);\n    if (ok) {\n      this.idleWorkers.push(worker);\n    } else {\n      killWorker(worker);\n    }\n  }\n\n  _postWork(phase: EWorkerPhase, edges: TEdge[], vertices: TSizeVertex[] | TLayoutVertex[]) {\n    if (!this.currentLayout) {\n      throw new Error('_startWork called without a current layout');\n    }\n    const { id, options, status } = this.currentLayout;\n    const worker = this.idleWorkers.pop() || this._initWorker();\n    this.busyWorkers.push(worker);\n    status.phase = phase as any;\n    status.workerId = worker.id;\n    const message: TWorkerInputMessage = {\n      options,\n      edges,\n      vertices,\n      meta: {\n        phase,\n        layoutId: id,\n        workerId: worker.id,\n      },\n    };\n    worker.postMessage(message);\n  }\n\n  _handleVizWorkerError = (event: ErrorEvent) => {\n    const worker = event.target as LayoutWorker;\n    const { ok } = findAndRemoveWorker([this.busyWorkers, this.idleWorkers], worker);\n    if (ok) {\n      console.error('Viz worker onerror');\n      console.error(event);\n      killWorker(worker);\n    } else {\n      console.error('Viz worker onerror from unknown viz worker');\n      console.error(event);\n    }\n  };\n\n  _handleVizWorkerMessageError = (event: ErrorEvent) => {\n    // TODO(joe): something more useful\n    const msg = {\n      event,\n      currentLayout: this.currentLayout,\n      errorType: '_handleVizWorkerMessageError',\n    };\n    console.error(msg);\n  };\n\n  _handleVizWorkerMessage = (event: MessageEvent) => {\n    const worker: LayoutWorker = event.target as LayoutWorker;\n    const workerMessage = event.data as TWorkerOutputMessage | TWorkerErrorMessage;\n    const { type } = workerMessage;\n    this._makeWorkerIdle(worker);\n    const isStale =\n      !this.currentLayout ||\n      Boolean(workerMessage.meta && workerMessage.meta.layoutId !== this.currentLayout.id);\n    if (type === EWorkerErrorType.Error) {\n      console.error(`${isStale ? '(stale) ' : ''}Error from viz.worker`, event);\n      return;\n    }\n    if (isStale) {\n      return;\n    }\n    if (type === EWorkerErrorType.LayoutError) {\n      // TODO(joe): implement retries with more spacing\n      console.error('layout-error', event);\n      return;\n    }\n    if (\n      workerMessage.type === EWorkerPhase.Positions ||\n      workerMessage.type === EWorkerPhase.Edges ||\n      workerMessage.type === EWorkerPhase.DotOnly\n    ) {\n      this._processResult(type, workerMessage);\n      return;\n    }\n    console.error(`Unknown worker message type: ${type}`, event);\n  };\n\n  _processResult(phase: EWorkerPhase, workerMessage: TWorkerOutputMessage) {\n    const layout = this.currentLayout;\n    if (!layout) {\n      // make flow happy - this is already checked and should not happen\n      return;\n    }\n    const { edges, graph, meta, vertices } = workerMessage;\n    const { workerId } = meta;\n    const { cleaned, input, status, options } = layout;\n    const { phase: stPhase, workerId: stWorkerId } = status;\n\n    if ((phase as any) !== stPhase || workerId !== stWorkerId) {\n      console.error(`Have work results, but in an invalid state`);\n      return;\n    }\n    if (!vertices || !graph || (phase !== EWorkerPhase.Positions && !edges)) {\n      console.error('Have work results, but recieved invalid result data');\n      return;\n    }\n\n    const layoutOptions = options || undefined;\n    const adjVertexCoords = convCoord.vertexToPixels.bind(null, graph);\n    const adjCleanVertices = vertices.map<TLayoutVertex>(v => adjVertexCoords(v, layoutOptions));\n    const adjVertices = input.unmapVertices(adjCleanVertices);\n    const adjGraph = convCoord.graphToPixels(graph, layoutOptions);\n\n    if (phase === EWorkerPhase.Positions || phase === EWorkerPhase.DotOnly) {\n      this.callback({\n        type: ECoordinatorPhase.Positions,\n        layoutId: layout.id,\n        graph: adjGraph,\n        vertices: adjVertices,\n      });\n    }\n    // phase is either edges or dot-only\n    if (edges) {\n      const pixelEdges = edges.map(edge => convCoord.edgeToPixels(graph, edge, layoutOptions));\n      const mergedEdges = input.unmapEdges(pixelEdges);\n      this.callback({\n        type: ECoordinatorPhase.Done,\n        layoutId: layout.id,\n        graph: adjGraph,\n        edges: mergedEdges,\n        vertices: adjVertices,\n      });\n    }\n    if (phase === EWorkerPhase.Positions) {\n      this._postWork(EWorkerPhase.Edges, cleaned.edges, vertices);\n    }\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/src/LayoutManager/LayoutManager.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":19,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[645,648],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[645,648],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":19,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[650,653],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[650,653],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":67,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":67,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2198,2201],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2198,2201],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":67,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":67,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2203,2206],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2203,2206],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2017 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { ECoordinatorPhase, TLayoutOptions, TUpdate } from './types';\nimport { TCancelled, TEdge, TLayoutDone, TPendingLayoutResult, TPositionsDone, TSizeVertex } from '../types';\n\nimport Coordinator from './Coordinator';\n\ntype TPendingResult<T, U> = {\n  id: number;\n  isPositionsResolved: boolean;\n  resolvePositions?: (result: TCancelled | TPositionsDone<T>) => void;\n  resolveLayout?: (result: TCancelled | TLayoutDone<T, U>) => void;\n};\n\nexport default class LayoutManager {\n  layoutId: number;\n  coordinator: Coordinator;\n  pendingResult: TPendingResult<any, any> | null;\n  options: TLayoutOptions | void;\n\n  constructor(options: TLayoutOptions | void) {\n    this.options = options;\n    this.layoutId = 0;\n    this.coordinator = new Coordinator(this._handleUpdate);\n    this.pendingResult = null;\n  }\n\n  getLayout<T, U>(edges: TEdge<U>[], vertices: TSizeVertex<T>[]): TPendingLayoutResult<T, U> {\n    this._cancelPending();\n    this.layoutId++;\n    const id = this.layoutId;\n    this.coordinator.getLayout(id, edges, vertices, this.options);\n    this.pendingResult = { id, isPositionsResolved: false };\n    const positions: Promise<TCancelled | TPositionsDone<T>> = new Promise(resolve => {\n      if (this.pendingResult && id === this.pendingResult.id) {\n        this.pendingResult.resolvePositions = resolve;\n      }\n    });\n    const layout: Promise<TCancelled | TLayoutDone<T, U>> = new Promise(resolve => {\n      if (this.pendingResult && id === this.pendingResult.id) {\n        this.pendingResult.resolveLayout = resolve;\n      }\n    });\n    return { layout, positions };\n  }\n\n  stopAndRelease() {\n    this._cancelPending();\n    this.coordinator.stopAndRelease();\n  }\n\n  _cancelPending() {\n    const pending = this.pendingResult;\n    if (pending) {\n      if (!pending.isPositionsResolved && pending.resolvePositions) {\n        pending.resolvePositions({ isCancelled: true });\n        pending.isPositionsResolved = true;\n      }\n      if (pending.resolveLayout) {\n        pending.resolveLayout({ isCancelled: true });\n      }\n      this.pendingResult = null;\n    }\n  }\n\n  _handleUpdate = (data: TUpdate<any, any>) => {\n    const pendingResult = this.pendingResult;\n    if (!pendingResult || data.layoutId !== pendingResult.id) {\n      return;\n    }\n    if (data.type === ECoordinatorPhase.Positions) {\n      const { isPositionsResolved, resolvePositions } = pendingResult;\n      if (isPositionsResolved) {\n        console.warn('Duplicate positiosn update', data);\n        return;\n      }\n      const { graph, vertices } = data;\n      if (!vertices || !resolvePositions) {\n        // make flow happy\n        throw new Error('Invalid state');\n      }\n      pendingResult.isPositionsResolved = true;\n      resolvePositions({\n        graph,\n        vertices,\n        isCancelled: false,\n      });\n    } else if (data.type === ECoordinatorPhase.Done) {\n      const { resolveLayout } = pendingResult;\n      const { edges, graph, vertices } = data;\n      if (!edges || !vertices || !resolveLayout) {\n        // make flow happy\n        throw new Error('Invalid state');\n      }\n      this.pendingResult = null;\n      resolveLayout({\n        edges,\n        graph,\n        vertices,\n        isCancelled: false,\n      });\n    } else {\n      throw new Error('Unrecognized update type');\n    }\n  };\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/src/LayoutManager/convInputs.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":6,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[194,197],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[194,197],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":9,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[297,300],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[297,300],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":22,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[653,656],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[653,656],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":35,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":35,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[977,980],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[977,980],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":35,"column":84,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":35,"endColumn":87,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1009,1012],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1009,1012],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":37,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1113,1116],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1113,1116],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":38,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1164,1167],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1164,1167],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2019 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { TEdge, TLayoutEdge, TLayoutVertex, TSizeVertex } from '../types';\n\nconst makeEdgeId = (edge: TEdge<any>) => `${edge.from}\\v${edge.to}`;\n\nfunction unmapVertices<T>(\n  idToVertex: Map<string, TSizeVertex<any>>,\n  output: TLayoutVertex<{}>[]\n): TLayoutVertex<T>[] {\n  return output.map(lv => {\n    const sv = idToVertex.get(lv.vertex.key);\n    if (!sv) {\n      throw new Error(`Unable to find Vertex for ${lv.vertex.key}`);\n    }\n    return { ...lv, vertex: sv.vertex };\n  });\n}\n\nfunction unmapEdges<T = Record<string, unknown>>(\n  idsToEdge: Map<string, TEdge<any>>,\n  output: TLayoutEdge<{}>[]\n): TLayoutEdge<T>[] {\n  return output.map(le => {\n    const id = makeEdgeId(le.edge);\n    const edge = idsToEdge.get(id);\n    if (!edge) {\n      throw new Error(`Unable to find edge for ${id}`);\n    }\n    return { ...le, edge };\n  });\n}\n\nexport default function convInputs(srcEdges: TEdge<any>[], inVertices: TSizeVertex<any>[]) {\n  const keyToId = new Map<string, string>();\n  const idToVertex = new Map<string, TSizeVertex<any>>();\n  const idsToEdge = new Map<string, TEdge<any>>();\n  const vertices = inVertices.map(v => {\n    const {\n      vertex: { key },\n      ...rest\n    } = v;\n    if (keyToId.has(key)) {\n      throw new Error(`Non-unique vertex key: ${key}`);\n    }\n    const id = String(keyToId.size);\n    keyToId.set(key, id);\n    idToVertex.set(id, v);\n    return { vertex: { key: id }, ...rest };\n  });\n  const edges = srcEdges.map(e => {\n    const { from, to, isBidirectional } = e;\n    const fromId = keyToId.get(from);\n    const toId = keyToId.get(to);\n    if (fromId == null) {\n      throw new Error(`Unrecognized key on edge, from: ${from}`);\n    }\n    if (toId == null) {\n      throw new Error(`Unrecognized key on edge, to: ${to}`);\n    }\n    const edge = {\n      isBidirectional,\n      from: fromId,\n      to: toId,\n    };\n    idsToEdge.set(makeEdgeId(edge), e);\n    return edge;\n  });\n  return {\n    edges,\n    vertices,\n    unmapEdges: unmapEdges.bind(null, idsToEdge),\n    unmapVertices: unmapVertices.bind(null, idToVertex),\n  };\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/src/LayoutManager/dot/conv-coord.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/src/LayoutManager/dot/convPlain.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/src/LayoutManager/dot/toDot.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/src/LayoutManager/getLayout.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/src/LayoutManager/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/src/LayoutManager/layout.worker.bundled.d.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":9,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[399,402],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[399,402],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2019 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nexport default class LayoutkWorker extends Worker {\n  id: number;\n  constructor();\n  // `onmessageerror` is missing from the TypeScript type def for workers\n  // https://html.spec.whatwg.org/multipage/workers.html#dedicated-workers-and-the-worker-interface\n  onmessageerror: ((this: Worker, event: ErrorEvent) => any | void) | null;\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/src/LayoutManager/layout.worker.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":15,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[345,348],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[345,348],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":20,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[469,472],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[469,472],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2017 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport getLayout from './getLayout';\n\nimport {\n  EWorkerErrorType,\n  TLayoutWorkerMeta,\n  TWorkerInputMessage,\n  TWorkerErrorMessage,\n  TWorkerOutputMessage,\n} from './types';\n\ntype TMessageErrorTarget = {\n  onmessageerror: ((this: Worker, ev: ErrorEvent) => any | void) | null;\n};\n\n// TODO: Use WorkerGlobalScope instead of Worker\n\nconst ctx: Worker & TMessageErrorTarget = self as any;\n\nlet currentMeta: TLayoutWorkerMeta | null;\n\nasync function handleMessage(event: MessageEvent) {\n  const { edges, meta, options, vertices } = event.data as TWorkerInputMessage;\n  currentMeta = meta;\n  const { layoutError, ...result } = await getLayout(meta.phase, edges, vertices, options);\n  const type = layoutError ? EWorkerErrorType.LayoutError : meta.phase;\n  const message: TWorkerOutputMessage = { meta, type, ...result };\n  ctx.postMessage(message);\n  currentMeta = null;\n}\n\nfunction errorMessageFromEvent(errorType: string, event: ErrorEvent | MessageEvent) {\n  if (event instanceof ErrorEvent) {\n    const { colno, error, filename, lineno, message } = event;\n\n    return {\n      colno,\n      error,\n      errorType,\n      filename,\n      lineno,\n      message,\n    };\n  }\n\n  return {\n    message: event.data,\n  };\n}\n\nfunction handleError(errorType: string, event: ErrorEvent | MessageEvent) {\n  const payload: TWorkerErrorMessage = {\n    type: EWorkerErrorType.Error,\n    meta: currentMeta,\n    errorMessage: errorMessageFromEvent(errorType, event),\n  };\n  ctx.postMessage(payload);\n}\n\nctx.onmessage = handleMessage;\nctx.onerror = handleError.bind(null, 'error');\nctx.onmessageerror = handleError.bind(ctx, 'messageerror');\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/src/LayoutManager/types.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":67,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":67,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1513,1516],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1513,1516],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2017 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { TEdge, TLayoutEdge, TLayoutGraph, TLayoutVertex, TSizeVertex } from '../types';\n\nexport enum EWorkerErrorType {\n  Error = 'Error',\n  LayoutError = 'LayoutError',\n}\n\nexport enum ECoordinatorPhase {\n  Done = 'Done',\n  DotOnly = 'DotOnly',\n  Edges = 'Edges',\n  NotStarted = 'NotStarted',\n  Positions = 'Positions',\n}\n\nexport enum EWorkerPhase {\n  DotOnly = ECoordinatorPhase.DotOnly,\n  Edges = ECoordinatorPhase.Edges,\n  Positions = ECoordinatorPhase.Positions,\n}\n\nexport type TLayoutOptions = {\n  rankdir?: 'TB' | 'LR' | 'BT' | 'RL';\n  ranksep?: number;\n  nodesep?: number;\n  sep?: number;\n  shape?: string;\n  splines?: string;\n  useDotEdges?: boolean;\n  totalMemory?: number;\n  engine?: 'dot' | 'neato' | 'sfdp';\n  sfdpOptions?: {\n    repulsiveforce?: number;\n    overlap?: boolean;\n    maxiter?: number;\n    dim?: 2 | 3;\n  };\n  dpi?: number;\n};\n\nexport type TLayoutWorkerMeta = {\n  layoutId: number;\n  workerId: number;\n  phase: EWorkerPhase;\n};\n\nexport type TWorkerInputMessage = {\n  edges: TEdge<{}>[];\n  meta: TLayoutWorkerMeta;\n  options: TLayoutOptions | null;\n  vertices: TSizeVertex<{}>[] | TLayoutVertex<{}>[];\n};\n\nexport type TWorkerOutputMessage = {\n  type: EWorkerPhase | EWorkerErrorType.LayoutError;\n  edges: TLayoutEdge<{}>[] | null;\n  graph: TLayoutGraph;\n  layoutErrorMessage?: string;\n  meta: TLayoutWorkerMeta;\n  vertices: TLayoutVertex<{}>[];\n};\n\nexport type TWorkerErrorMessage = {\n  errorMessage: any;\n  meta: TLayoutWorkerMeta | null;\n  type: EWorkerErrorType.Error;\n};\n\nexport type TNodesUpdate<T = Record<string, unknown>> = {\n  type: ECoordinatorPhase.Positions;\n  layoutId: number;\n  graph: TLayoutGraph;\n  vertices: TLayoutVertex<T>[];\n};\n\nexport type TLayoutUpdate<T = Record<string, unknown>, U = Record<string, unknown>> = {\n  type: ECoordinatorPhase.Done;\n  layoutId: number;\n  graph: TLayoutGraph;\n  edges: TLayoutEdge<U>[];\n  vertices: TLayoutVertex<T>[];\n};\n\nexport type TUpdate<T = Record<string, unknown>, U = Record<string, unknown>> =\n  | TNodesUpdate<T>\n  | TLayoutUpdate<T, U>;\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/src/cacheAs.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":5,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":5,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[153,156],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[153,156],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":6,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[207,210],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[207,210],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2019 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nexport function makeCacheScope() {\n  const cache = new Map<string, any>();\n  return function cacheAs(key: string, value: any) {\n    const stored = cache.get(key);\n    if (stored) {\n      return stored;\n    }\n    cache.set(key, value);\n    return value;\n  };\n}\n\nconst defaultScope = Object.assign(makeCacheScope(), { makeScope: makeCacheScope });\n\nexport default defaultScope;\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/src/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/src/input.fixture.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/src/types/TNonEmptyArray.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/src/types/TOneOf.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/src/types/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/src/zoom/MiniMap.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/src/zoom/ZoomManager.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":54,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1248,1251],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1248,1251],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":54,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1253,1256],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1253,1256],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Copyright (c) 2019 Uber Technologies, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { select, Selection } from 'd3-selection';\nimport {\n  zoom as d3Zoom,\n  zoomTransform as getTransform,\n  ZoomTransform as ZoomTransform_,\n  ZoomBehavior,\n  zoomIdentity,\n} from 'd3-zoom';\n\nimport {\n  constrainZoom,\n  DEFAULT_SCALE_EXTENT,\n  fitWithinContainer,\n  getScaleExtent,\n  getZoomAttr,\n  getZoomStyle,\n} from './utils';\n\nexport { zoomIdentity } from 'd3-zoom';\n\nexport type ZoomTransform = ZoomTransform_;\n\ntype TUpdateCallback = (xform: ZoomTransform) => void;\n\ntype TSize = { height: number; width: number };\n\ntype TZoomProps = {\n  x: number;\n  y: number;\n  k: number;\n  contentHeight: number;\n  contentWidth: number;\n  viewAll: () => void;\n  zoomIn: () => void;\n  zoomOut: () => void;\n  viewportHeight: number;\n  viewportWidth: number;\n};\n\nexport default class ZoomManager {\n  static getZoomAttr(zoomTransform: ZoomTransform | void) {\n    return getZoomAttr(zoomTransform);\n  }\n\n  static getZoomStyle(zoomTransform: ZoomTransform | void): React.CSSProperties {\n    return getZoomStyle(zoomTransform);\n  }\n\n  private elem: Element | null = null;\n  private contentSize: TSize | null = null;\n  private selection: Selection<Element, ZoomTransform, any, any> | null = null;\n  private readonly updateCallback: TUpdateCallback;\n  private readonly zoom: ZoomBehavior<Element, ZoomTransform>;\n  private currentTransform: ZoomTransform = zoomIdentity;\n\n  constructor(updateCallback: TUpdateCallback) {\n    this.updateCallback = updateCallback;\n    this.zoom = d3Zoom<Element, ZoomTransform>()\n      .scaleExtent(DEFAULT_SCALE_EXTENT)\n      .constrain(this.constrainZoom)\n      .on('zoom', this.onZoomed);\n  }\n\n  public setElement(elem: Element) {\n    if (elem === this.elem) {\n      return;\n    }\n    this.elem = elem;\n    this.selection = select(elem);\n    this.selection.call(this.zoom);\n    this.setExtent();\n    this.resetZoom();\n  }\n\n  public setContentSize(size: TSize) {\n    if (\n      !this.contentSize ||\n      this.contentSize.height !== size.height ||\n      this.contentSize.width !== size.width\n    ) {\n      this.contentSize = size;\n    }\n    this.setExtent();\n    this.resetZoom();\n  }\n\n  public zoomIn = () => {\n    const selection = this.selection;\n    if (!selection) {\n      this.updateCallback(zoomIdentity);\n      return;\n    }\n    this.zoom.scaleBy(selection, 1.2);\n  };\n\n  public zoomOut = () => {\n    const selection = this.selection;\n    if (!selection) {\n      this.updateCallback(zoomIdentity);\n      return;\n    }\n    this.zoom.scaleBy(selection, 0.8);\n  };\n\n  public resetZoom = () => {\n    const elem = this.elem;\n    const selection = this.selection;\n    const size = this.contentSize;\n    if (!elem || !selection || !size) {\n      this.updateCallback(zoomIdentity);\n      return;\n    }\n    const { clientHeight: viewHeight, clientWidth: viewWidth } = elem;\n    this.currentTransform = fitWithinContainer(size.width, size.height, viewWidth, viewHeight);\n    this.zoom.transform(selection, this.currentTransform);\n    this.updateCallback(this.currentTransform);\n  };\n\n  public getProps(): TZoomProps {\n    const { x, y, k } = this.currentTransform;\n    const { height: contentHeight = 1, width: contentWidth = 1 } = this.contentSize || {};\n    const { clientHeight: viewportHeight = 1, clientWidth: viewportWidth = 1 } = this.elem || {};\n    return {\n      contentHeight,\n      contentWidth,\n      k,\n      viewportHeight,\n      viewportWidth,\n      x,\n      y,\n      viewAll: this.resetZoom,\n      zoomIn: this.zoomIn,\n      zoomOut: this.zoomOut,\n    };\n  }\n\n  private setExtent() {\n    const elem = this.elem;\n    const size = this.contentSize;\n    if (!elem || !size) {\n      return;\n    }\n    const { clientHeight: viewHeight, clientWidth: viewWidth } = elem;\n    const scaleExtent = getScaleExtent(size.width, size.height, viewWidth, viewHeight);\n    this.zoom.scaleExtent(scaleExtent);\n  }\n\n  private onZoomed = () => {\n    if (!this.elem) {\n      return;\n    }\n    this.currentTransform = getTransform(this.elem);\n    this.updateCallback(this.currentTransform);\n  };\n\n  private constrainZoom = (transform: ZoomTransform, extent: [[number, number], [number, number]]) => {\n    if (!this.contentSize) {\n      return transform;\n    }\n    const { height, width } = this.contentSize;\n    const [, [vw, vh]] = extent;\n    return constrainZoom(transform, width, height, vw, vh);\n  };\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/src/zoom/utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/webpack-factory.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/webpack.dev.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/webpack.layout-worker.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/packages/plexus/webpack.umd.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/scripts/find-jsx.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/scripts/generateDepcheckrcJaegerUI.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/scripts/generateDepcheckrcPlexus.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/divyanshu/projects/jaeger-ui/scripts/get-tracking-version.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
